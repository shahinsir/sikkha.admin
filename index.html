<!DOCTYPE html>
<html lang="bn">
<head>
  <base href="./">
     
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#3498db">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ ‡¶è‡¶°‡¶Æ‡¶ø‡¶®">
    <meta name="description" content="‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ ‡¶∏‡¶π‡¶æ‡¶Ø‡¶º‡¶ø‡¶ï‡¶æ ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ - ‡¶™‡ßÇ‡¶∞‡ßç‡¶£‡¶æ‡¶ô‡ßç‡¶ó ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™">
    <meta name="keywords" content="‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ, ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü, ‡¶è‡¶°‡¶Æ‡¶ø‡¶®, ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂, ‡¶¨‡¶á, ‡¶ó‡¶æ‡¶á‡¶°, PWA">
    <title>‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ ‡¶∏‡¶π‡¶æ‡¶Ø‡¶º‡¶ø‡¶ï‡¶æ ‡¶è‡¶°‡¶Æ‡¶ø‡¶®</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="https://i.ibb.co/XGNQ8V4/icon-180x180.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://i.ibb.co/XGNQ8V4/icon-180x180.png">
    <link rel="apple-touch-icon" sizes="167x167" href="https://i.ibb.co/XGNQ8V4/icon-180x180.png">
    <link rel="apple-touch-icon" sizes="152x152" href="https://i.ibb.co/XGNQ8V4/icon-180x180.png">
    <link rel="apple-touch-icon" sizes="120x120" href="https://i.ibb.co/XGNQ8V4/icon-180x180.png">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://i.ibb.co/wFnz89n6/icon-192x192.png">
    
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-storage-compat.js"></script>
    
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2c3e50;
            --success-color: #27ae60;
            --danger-color: #e74c3c;
            --warning-color: #f39c12;
            --dark-color: #2c3e50;
            --light-color: #ecf0f1;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, var(--secondary-color), #4a6491);
            color: white;
            min-height: 100vh;
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            user-select: none;
        }
        
        /* Login Modal */
        #loginModal {
            display: flex;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--secondary-color), #4a6491);
            z-index: 9999;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .login-container {
            background: white;
            padding: 40px 30px;
            border-radius: 20px;
            max-width: 400px;
            width: 100%;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            animation: slideUp 0.5s ease;
        }
        
        @keyframes slideUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .login-container h2 {
            color: var(--secondary-color);
            margin-bottom: 30px;
            font-size: 24px;
        }
        
        .login-form-group {
            margin-bottom: 20px;
            text-align: left;
        }
        
        .login-form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: var(--secondary-color);
            font-size: 14px;
        }
        
        .login-form-group input {
            width: 100%;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        .login-form-group input:focus {
            border-color: var(--primary-color);
            outline: none;
        }
        
        #loginError {
            background: #fee;
            color: #c33;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
            border: 1px solid #fcc;
        }
        
        .login-btn {
            background: linear-gradient(135deg, var(--primary-color), #2980b9);
            color: white;
            border: none;
            width: 100%;
            padding: 16px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            margin-top: 10px;
            transition: all 0.3s;
        }
        
        .login-btn:hover {
            background: linear-gradient(135deg, #2980b9, #1c5a7d);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }
        
        .login-footer {
            margin-top: 25px;
            color: #666;
            font-size: 14px;
            line-height: 1.5;
        }
        
        /* Main App Styles */
        .admin-container {
            max-width: 1200px;
            margin: 20px auto;
            background: white;
            color: #333;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
            display: none; /* Hidden until login */
        }
        
        .app-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--primary-color);
        }
        
        .header-left h1 {
            color: var(--secondary-color);
            font-size: 24px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .header-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .user-info {
            background: var(--light-color);
            padding: 8px 15px;
            border-radius: 20px;
            color: var(--secondary-color);
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .logout-btn {
            background: var(--danger-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s;
        }
        
        .logout-btn:hover {
            background: #c0392b;
        }
        
        .connection-status {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: var(--success-color);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
        }
        
        .status-offline {
            background: var(--danger-color);
        }
        
        .pwa-status-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: var(--secondary-color);
            color: white;
            padding: 8px 20px;
            font-size: 13px;
            text-align: center;
            z-index: 9998;
            display: none;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .app-installed-badge {
            position: fixed;
            top: 15px;
            right: 15px;
            background: var(--success-color);
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            z-index: 9997;
            display: none;
            animation: pulse 2s infinite;
            box-shadow: 0 4px 12px rgba(39, 174, 96, 0.3);
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(39, 174, 96, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(39, 174, 96, 0); }
            100% { box-shadow: 0 0 0 0 rgba(39, 174, 96, 0); }
        }
        
        .form-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            border: 1px solid #e9ecef;
        }
        
        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
        }
        
        @media (max-width: 768px) {
            .two-column {
                grid-template-columns: 1fr;
            }
            .admin-container {
                padding: 20px;
                margin: 10px;
            }
        }
        
        .btn {
            background: linear-gradient(135deg, var(--primary-color), #2980b9);
            color: white;
            border: none;
            padding: 14px 25px;
            cursor: pointer;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s;
            width: 100%;
            margin-top: 10px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }
        
        .btn-success {
            background: linear-gradient(135deg, var(--success-color), #219653);
        }
        
        .btn-install {
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
            margin-top: 20px;
        }
        
        .btn-install:hover {
            background: linear-gradient(135deg, #8e44ad, #7d3c98);
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            margin-top: 20px;
            border-radius: 10px;
            overflow: hidden;
        }
        
        th {
            background: var(--primary-color);
            color: white;
            padding: 15px;
            text-align: left;
        }
        
        td {
            padding: 15px;
            border-bottom: 1px solid #eee;
        }
        
        tr:hover {
            background-color: #f8f9fa;
        }
        
        .material-type {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .material-type.book { background: #e3f2fd; color: #1976d2; }
        .material-type.guide { background: #e8f5e9; color: #388e3c; }
        .material-type.note { background: #fff3e0; color: #f57c00; }
        .material-type.video { background: #f3e5f5; color: #7b1fa2; }
        .material-type.image { background: #e0f7fa; color: #0097a7; }
        .material-type.pdf { background: #ffebee; color: #d32f2f; }
        .material-type.question { background: #fce4ec; color: #c2185b; }
        
        .action-buttons {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .view-btn, .edit-btn, .delete-btn, .download-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s;
        }
        
        .view-btn { background: var(--success-color); color: white; }
        .edit-btn { background: var(--warning-color); color: white; }
        .delete-btn { background: var(--danger-color); color: white; }
        .download-btn { background: var(--primary-color); color: white; }
        
        .view-btn:hover { background: #219653; }
        .edit-btn:hover { background: #d68910; }
        .delete-btn:hover { background: #c0392b; }
        .download-btn:hover { background: #2980b9; }
        
        /* PWA Install Prompt */
        #installPrompt {
            display: none;
            position: fixed;
            bottom: 25px;
            right: 25px;
            background: white;
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.3);
            z-index: 9999;
            max-width: 350px;
            animation: slideInRight 0.4s ease;
            border: 3px solid var(--primary-color);
        }
        
        @keyframes slideInRight {
            from {
                transform: translateX(100px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        #installPrompt h4 {
            color: var(--secondary-color);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 18px;
        }
        
        #installPrompt p {
            color: #555;
            margin-bottom: 20px;
            line-height: 1.6;
        }
        
        .prompt-buttons {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }
        
        .prompt-buttons button {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            font-size: 15px;
        }
        
        .install-btn {
            background: linear-gradient(135deg, var(--success-color), #219653);
            color: white;
        }
        
        .install-btn:hover {
            background: linear-gradient(135deg, #219653, #1e8449);
        }
        
        .later-btn {
            background: #95a5a6;
            color: white;
        }
        
        .later-btn:hover {
            background: #7f8c8d;
        }
        
        /* iOS Install Instructions */
        #iosInstallModal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 10000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .ios-modal-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            max-width: 500px;
            width: 100%;
            animation: popIn 0.3s ease;
        }
        
        @keyframes popIn {
            from {
                transform: scale(0.9);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        .ios-modal-content h3 {
            color: var(--secondary-color);
            margin-bottom: 20px;
            text-align: center;
        }
        
        .ios-steps {
            margin: 25px 0;
            padding-left: 20px;
        }
        
        .ios-steps li {
            margin-bottom: 12px;
            color: #555;
            line-height: 1.5;
        }
        
        /* Android Install Instructions */
        #androidInstallModal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 10001;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .android-modal-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            max-width: 500px;
            width: 100%;
            animation: popIn 0.3s ease;
        }
        
        /* Custom Install Button Styles */
        .install-button-container {
            text-align: center;
            margin: 30px 0;
            padding: 20px;
            background: linear-gradient(135deg, #f5f7fa, #c3cfe2);
            border-radius: 15px;
            border: 2px dashed var(--primary-color);
        }
        
        .install-button-container h3 {
            color: var(--secondary-color);
            margin-bottom: 15px;
            font-size: 20px;
        }
        
        .install-features {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 20px 0;
        }
        
        .install-feature {
            background: white;
            padding: 12px;
            border-radius: 8px;
            font-size: 13px;
            text-align: center;
            border: 1px solid #e0e0e0;
        }
        
        .install-feature span {
            display: block;
            font-size: 20px;
            margin-bottom: 5px;
        }
        
        /* Touch Optimizations */
        @media (hover: none) and (pointer: coarse) {
            .btn, .view-btn, .edit-btn, .delete-btn, .logout-btn {
                min-height: 44px;
                min-width: 44px;
            }
            
            input, select, textarea, button {
                font-size: 16px !important;
            }
            
            .action-buttons {
                gap: 10px;
            }
            
            .action-buttons button {
                padding: 12px 20px;
                min-width: 60px;
            }
        }
        
        /* Status Messages */
        .status-message {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 10px;
            color: white;
            z-index: 9996;
            display: none;
            animation: slideDown 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        @keyframes slideDown {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .status-success {
            background: var(--success-color);
        }
        
        .status-error {
            background: var(--danger-color);
        }
        
        .status-warning {
            background: var(--warning-color);
        }
        
        .status-info {
            background: var(--primary-color);
        }
        
        /* Form Elements */
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: var(--secondary-color);
            font-size: 14px;
        }
        
        .form-group select, .form-group input, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        .form-group select:focus, .form-group input:focus, .form-group textarea:focus {
            border-color: var(--primary-color);
            outline: none;
        }
        
        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }
        
        /* File Upload Styles */
        .file-upload-container {
            background: #f8f9fa;
            border: 2px dashed #3498db;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            margin: 20px 0;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .file-upload-container:hover {
            background: #e8f4fc;
            border-color: #2980b9;
        }
        
        .file-upload-container.dragover {
            background: #d6eaf8;
            border-color: #1abc9c;
            transform: scale(1.02);
        }
        
        .file-preview {
            max-width: 200px;
            max-height: 200px;
            margin: 10px auto;
            display: block;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .file-info {
            background: #e8f4fd;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            font-size: 14px;
            color: #2c3e50;
        }
        
        .file-size {
            font-size: 12px;
            color: #7f8c8d;
            margin-top: 5px;
        }
        
        .upload-progress {
            width: 100%;
            height: 10px;
            background: #ecf0f1;
            border-radius: 5px;
            margin: 10px 0;
            overflow: hidden;
            display: none;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #3498db, #2ecc71);
            width: 0%;
            transition: width 0.3s;
        }
        
        /* File Management Tabs */
        .tabs {
            display: flex;
            border-bottom: 2px solid #e0e0e0;
            margin-bottom: 20px;
        }
        
        .tab {
            padding: 12px 20px;
            cursor: pointer;
            background: none;
            border: none;
            font-size: 16px;
            font-weight: bold;
            color: #7f8c8d;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }
        
        .tab.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* File Type Badges */
        .file-type-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: bold;
            margin-right: 5px;
        }
        
        .file-type-pdf { background: #ffebee; color: #d32f2f; }
        .file-type-image { background: #e8f5e9; color: #388e3c; }
        .file-type-video { background: #f3e5f5; color: #7b1fa2; }
        .file-type-doc { background: #e3f2fd; color: #1976d2; }
        .file-type-zip { background: #fff3e0; color: #f57c00; }
        .file-type-other { background: #f5f5f5; color: #616161; }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 10002;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            max-width: 600px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            animation: popIn 0.3s ease;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #eee;
        }
        
        .close-modal {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #7f8c8d;
        }
        
        .file-viewer {
            max-width: 100%;
            max-height: 400px;
            margin: 0 auto;
            display: block;
        }
        
        .file-viewer.pdf {
            width: 100%;
            height: 400px;
            border: 1px solid #ddd;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-box {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid #e9ecef;
        }
        
        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 12px;
            color: #7f8c8d;
        }
    </style>
</head>
<body>
    <!-- Login Modal -->
    <div id="loginModal">
        <div class="login-container">
            <h2>üîí ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ ‡¶∏‡¶π‡¶æ‡¶Ø‡¶º‡¶ø‡¶ï‡¶æ ‡¶è‡¶°‡¶Æ‡¶ø‡¶®</h2>
            <p style="color: #666; margin-bottom: 25px; font-size: 15px;">‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶Ö‡¶®‡ßÅ‡¶Æ‡ßã‡¶¶‡¶ø‡¶§ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®‡¶¶‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶¨‡ßá‡¶∂</p>
            
            <div id="loginError"></div>
            
            <div class="login-form-group">
                <label for="adminEmail">‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶è‡¶°‡ßç‡¶∞‡ßá‡¶∏</label>
                <input type="email" id="adminEmail" placeholder="admin@example.com" autocomplete="email">
            </div>
            
            <div class="login-form-group">
                <label for="adminPassword">‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°</label>
                <input type="password" id="adminPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password">
            </div>
            
            <button onclick="loginAdmin()" class="login-btn">
                üîë ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®
            </button>
            
            <div class="install-button-container" style="margin-top: 30px;">
                <h3>üì± ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶á‡¶®‡¶∏‡ßç‡¶ü‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
                <div class="install-features">
                    <div class="install-feature">‚úÖ ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶™‡¶≤‡ßã‡¶°</div>
                    <div class="install-feature">üöÄ ‡¶¶‡ßç‡¶∞‡ßÅ‡¶§ ‡¶è‡¶ï‡ßç‡¶∏‡ßá‡¶∏</div>
                    <div class="install-feature">üìÅ ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú</div>
                    <div class="install-feature">üîî ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶®</div>
                </div>
                <button id="installButtonMain" class="btn btn-install" style="max-width: 300px; margin: 0 auto;">
                    <span style="font-size: 24px; display: block; margin-bottom: 5px;">üì±</span>
                    <strong>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶á‡¶®‡¶∏‡ßç‡¶ü‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®</strong>
                    <br>
                    <small style="font-size: 12px; opacity: 0.8;">‡¶π‡ßã‡¶Æ ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡ßá ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®</small>
                </button>
            </div>
            
            <div class="login-footer">
                <p>üì± ‡¶è‡¶á ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡¶ü‡¶ø PWA ‡¶π‡¶ø‡¶∏‡ßá‡¶¨‡ßá ‡¶á‡¶®‡¶∏‡ßç‡¶ü‡¶≤ ‡¶ï‡¶∞‡ßá ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                <p style="font-size: 13px; color: #888; margin-top: 10px;">‡¶á‡¶®‡¶∏‡ßç‡¶ü‡¶≤‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶â‡¶™‡¶∞‡ßá‡¶∞ ‡¶á‡¶®‡¶∏‡ßç‡¶ü‡¶≤ ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®</p>
            </div>
        </div>
    </div>
    
    <!-- PWA Status Bar -->
    <div id="pwaStatus" class="pwa-status-bar"></div>
    
    <!-- App Installed Badge -->
    <div class="app-installed-badge">üì≤ ‡¶á‡¶®‡¶∏‡ßç‡¶ü‡¶≤ ‡¶ï‡¶∞‡¶æ</div>
    
    <!-- Status Messages -->
    <div id="statusMessage" class="status-message"></div>
    
    <!-- File View Modal -->
    <div id="fileViewModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="fileViewTitle">‡¶´‡¶æ‡¶á‡¶≤ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</h3>
                <button onclick="closeFileViewer()" class="close-modal">√ó</button>
            </div>
            <div id="fileViewContent">
                <!-- File content will be loaded here -->
            </div>
        </div>
    </div>
    
    <!-- File Edit Modal -->
    <div id="fileEditModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>‡¶´‡¶æ‡¶á‡¶≤ ‡¶è‡¶°‡¶ø‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
                <button onclick="closeFileEditor()" class="close-modal">√ó</button>
            </div>
            <div id="fileEditContent">
                <!-- File edit form will be loaded here -->
            </div>
        </div>
    </div>
    
    <!-- Main App Container -->
    <div class="admin-container" id="adminContainer">
        <div class="app-header">
            <div class="header-left">
                <h1><img src="https://i.ibb.co/wFnz89n6/icon-192x192.png" alt="‡¶Ü‡¶á‡¶ï‡¶®" style="width: 40px; height: 40px; border-radius: 8px;"> ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ ‡¶∏‡¶π‡¶æ‡¶Ø‡¶º‡¶ø‡¶ï‡¶æ ‡¶è‡¶°‡¶Æ‡¶ø‡¶®</h1>
            </div>
            <div class="header-right">
                <div class="user-info">
                    <span id="userEmail">admin@example.com</span>
                </div>
                <button onclick="logoutAdmin()" class="logout-btn">üö™ ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü</button>
            </div>
        </div>
        
        <div style="text-align: center; margin-bottom: 20px;">
            <span id="connectionStatus" class="connection-status">
                <span id="statusIcon">üü¢</span>
                <span id="statusText">‡¶Ö‡¶®‡¶≤‡¶æ‡¶á‡¶®</span>
            </span>
        </div>
        
        <!-- File Management Tabs -->
        <div class="tabs">
            <button class="tab active" onclick="switchTab('contentTab')">üìù ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü</button>
            <button class="tab" onclick="switchTab('fileTab')">üìÅ ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü</button>
            <button class="tab" onclick="switchTab('uploadTab')">üì§ ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶™‡¶≤‡ßã‡¶°</button>
        </div>
        
        <!-- Content Tab (Existing) -->
        <div id="contentTab" class="tab-content active">
            <div class="instruction form-section">
                <h4>üìå ‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡ßç‡¶¨‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡ßá‡¶∂‡¶®‡¶æ:</h4>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 10px; margin-top: 15px;">
                    <p>1. ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏ ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶® (‡ß¨-‡ßß‡ß¶)</p>
                    <p>2. ‡¶¨‡¶ø‡¶∑‡ßü ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                    <p>3. ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶ü‡¶æ‡¶á‡¶™ ‡¶è‡¶¨‡¶Ç ‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤ ‡¶¶‡¶ø‡¶®</p>
                    <p>4. ‡¶ó‡ßÅ‡¶ó‡¶≤ ‡¶°‡ßç‡¶∞‡¶æ‡¶á‡¶≠ ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                    <p>5. ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßá ‡¶∏‡ßç‡¶¨‡ßü‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡ßü‡¶≠‡¶æ‡¶¨‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá</p>
                    <p>6. üì± ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡¶ü‡¶ø ‡¶á‡¶®‡¶∏‡ßç‡¶ü‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶® (‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶¨‡¶æ‡¶ü‡¶®‡ßá)</p>
                </div>
            </div>
            
            <div class="two-column">
                <!-- Form Section -->
                <div class="form-section">
                    <h3>‚ûï ‡¶®‡¶§‡ßÅ‡¶® ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
                    
                    <div class="form-group">
                        <label>‡¶ï‡ßç‡¶≤‡¶æ‡¶∏ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®:</label>
                        <select id="classSelect">
                            <option value="">-- ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏ ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶® --</option>
                            <option value="Class 6">Class 6 - ‡¶∑‡¶∑‡ßç‡¶† ‡¶∂‡ßç‡¶∞‡ßá‡¶£‡ßÄ</option>
                            <option value="Class 7">Class 7 - ‡¶∏‡¶™‡ßç‡¶§‡¶Æ ‡¶∂‡ßç‡¶∞‡ßá‡¶£‡ßÄ</option>
                            <option value="Class 8">Class 8 - ‡¶Ö‡¶∑‡ßç‡¶ü‡¶Æ ‡¶∂‡ßç‡¶∞‡ßá‡¶£‡ßÄ</option>
                            <option value="Class 9">Class 9 - ‡¶®‡¶¨‡¶Æ ‡¶∂‡ßç‡¶∞‡ßá‡¶£‡ßÄ</option>
                            <option value="Class 10">Class 10 - ‡¶¶‡¶∂‡¶Æ ‡¶∂‡ßç‡¶∞‡ßá‡¶£‡ßÄ</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>‡¶¨‡¶ø‡¶∑‡ßü ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®:</label>
                        <select id="subjectSelect">
                            <option value="">-- ‡¶¨‡¶ø‡¶∑‡ßü ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶® --</option>
                            <option value="math">‡¶ó‡¶£‡¶ø‡¶§ (Mathematics)</option>
                            <option value="english">‡¶á‡¶Ç‡¶∞‡ßá‡¶ú‡¶ø (English)</option>
                            <option value="science">‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶® (Science)</option>
                            <option value="ict">‡¶§‡¶•‡ßç‡¶Ø ‡¶ì ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶™‡ßç‡¶∞‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§‡¶ø (ICT)</option>
                            <option value="agriculture">‡¶ï‡ßÉ‡¶∑‡¶ø ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ (Agriculture)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶ü‡¶æ‡¶á‡¶™:</label>
                        <select id="typeSelect">
                            <option value="‡¶¨‡¶á">‡¶¨‡¶á (Book)</option>
                            <option value="‡¶ó‡¶æ‡¶á‡¶°">‡¶ó‡¶æ‡¶á‡¶° (Guide)</option>
                            <option value="‡¶®‡ßã‡¶ü">‡¶®‡ßã‡¶ü (Note)</option>
                            <option value="‡¶≠‡¶ø‡¶°‡¶ø‡¶ì">‡¶≠‡¶ø‡¶°‡¶ø‡¶ì (Video)</option>
                            <option value="‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®">‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® (Question)</option>
                            <option value="‡¶™‡¶ø‡¶°‡¶ø‡¶è‡¶´">‡¶™‡¶ø‡¶°‡¶ø‡¶è‡¶´ (PDF)</option>
                            <option value="‡¶õ‡¶¨‡¶ø">‡¶õ‡¶¨‡¶ø (Image)</option>
                            <option value="MCQ">MCQ</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>‡¶∂‡¶ø‡¶∞‡ßã‡¶®‡¶æ‡¶Æ (Title):</label>
                        <input type="text" id="title" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶ó‡¶£‡¶ø‡¶§ ‡¶¨‡¶á, ‡¶á‡¶Ç‡¶∞‡ßá‡¶ú‡¶ø ‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡¶æ‡¶∞, ‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶® ‡¶®‡ßã‡¶ü">
                    </div>
                    
                    <div class="form-group">
                        <label>‡¶¨‡¶∞‡ßç‡¶£‡¶®‡¶æ (Description):</label>
                        <textarea id="description" rows="3" placeholder="‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶¨‡¶∞‡ßç‡¶£‡¶®‡¶æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>‡¶≤‡¶ø‡¶ô‡ßç‡¶ï (Link):</label>
                        <input type="text" id="link" placeholder="https://drive.google.com/file/d/XXXXX/view">
                        <small style="color: #666; display: block; margin-top: 5px;">
                            Google Drive, YouTube, PDF ‡¶¨‡¶æ ‡¶Ö‡¶®‡ßç‡¶Ø ‡¶Ø‡ßá‡¶ï‡ßã‡¶®‡ßã ‡¶´‡¶æ‡¶á‡¶≤ ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶¶‡¶ø‡¶®
                        </small>
                    </div>
                    
                    <div class="form-group">
                        <label>‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶ü‡¶æ‡¶á‡¶™:</label>
                        <select id="linkType">
                            <option value="drive">Google Drive</option>
                            <option value="youtube">YouTube</option>
                            <option value="pdf">PDF ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï</option>
                            <option value="image">‡¶õ‡¶¨‡¶ø ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï</option>
                            <option value="website">‡¶ì‡ßü‡ßá‡¶¨‡¶∏‡¶æ‡¶á‡¶ü</option>
                            <option value="other">‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø</option>
                        </select>
                    </div>
                    
                    <button onclick="addData()" class="btn btn-success" id="submitBtn">
                        üíæ ‡¶°‡ßá‡¶ü‡¶æ ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®
                    </button>
                </div>
                
                <!-- Link Guide Section -->
                <div class="form-section">
                    <h3>üîó ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶ó‡¶æ‡¶á‡¶°</h3>
                    
                    <div class="link-box" style="background: #e8f4fd; padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                        <strong>üìå ‡¶ó‡ßÅ‡¶ó‡¶≤ ‡¶°‡ßç‡¶∞‡¶æ‡¶á‡¶≠ ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶§‡ßà‡¶∞‡¶ø:</strong>
                        <div style="background: #f8f9fa; padding: 10px; border-radius: 5px; margin-top: 10px; font-size: 14px; color: #666;">
                            1. ‡¶´‡¶æ‡¶á‡¶≤ ‡¶ó‡ßÅ‡¶ó‡¶≤ ‡¶°‡ßç‡¶∞‡¶æ‡¶á‡¶≠‡ßá ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®<br>
                            2. ‡¶´‡¶æ‡¶á‡¶≤‡ßá ‡¶∞‡¶æ‡¶á‡¶ü-‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‚Üí "Get link"<br>
                            3. "Anyone with the link" ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®<br>
                            4. ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶™‡ßá‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
                        </div>
                    </div>
                </div>
            </div>

            <!-- Display Section -->
            <div class="form-section">
                <h3>üìã ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü‡¶∏‡¶Æ‡ßÇ‡¶π</h3>
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 10px;">
                    <div style="color: #666;">
                        ‡¶Æ‡ßã‡¶ü: <span id="totalCount" style="font-weight: bold;">0</span>‡¶ü‡¶ø | 
                        ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶∏‡¶π: <span id="linkCount" style="font-weight: bold;">0</span>‡¶ü‡¶ø |
                        ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™: <span id="appStatus" style="font-weight: bold;">‡¶ì‡ßü‡ßá‡¶¨</span>
                    </div>
                    
                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                        <select id="filterClass" onchange="filterData()" style="padding: 8px 12px; border: 2px solid #ddd; border-radius: 8px; min-width: 120px;">
                            <option value="">‡¶∏‡¶¨ ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏</option>
                            <option value="Class 6">Class 6</option>
                            <option value="Class 7">Class 7</option>
                            <option value="Class 8">Class 8</option>
                            <option value="Class 9">Class 9</option>
                            <option value="Class 10">Class 10</option>
                        </select>
                        
                        <select id="filterSubject" onchange="filterData()" style="padding: 8px 12px; border: 2px solid #ddd; border-radius: 8px; min-width: 120px;">
                            <option value="">‡¶∏‡¶¨ ‡¶¨‡¶ø‡¶∑‡ßü</option>
                            <option value="math">‡¶ó‡¶£‡¶ø‡¶§</option>
                            <option value="english">‡¶á‡¶Ç‡¶∞‡ßá‡¶ú‡¶ø</option>
                            <option value="science">‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶®</option>
                            <option value="ict">ICT</option>
                            <option value="agriculture">‡¶ï‡ßÉ‡¶∑‡¶ø</option>
                        </select>
                        
                        <input type="text" id="searchInput" placeholder="‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶®..." onkeyup="filterData()" style="padding: 8px 12px; border: 2px solid #ddd; border-radius: 8px; min-width: 150px;">
                    </div>
                </div>
                
                <div id="loading" style="text-align: center; padding: 40px; color: #666;">‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</div>
                <div id="dataDisplay"></div>
            </div>
        </div>
        
        <!-- File Management Tab -->
        <div id="fileTab" class="tab-content">
            <div class="form-section">
                <h3>üìÅ ‡¶Ü‡¶™‡¶≤‡ßã‡¶°‡¶ï‡ßÉ‡¶§ ‡¶´‡¶æ‡¶á‡¶≤‡¶∏‡¶Æ‡ßÇ‡¶π</h3>
                
                <div class="stats-grid">
                    <div class="stat-box">
                        <div class="stat-number" id="totalFiles">0</div>
                        <div class="stat-label">‡¶Æ‡ßã‡¶ü ‡¶´‡¶æ‡¶á‡¶≤</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-number" id="totalSize">0 MB</div>
                        <div class="stat-label">‡¶Æ‡ßã‡¶ü ‡¶∏‡¶æ‡¶á‡¶ú</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-number" id="pdfFiles">0</div>
                        <div class="stat-label">PDF ‡¶´‡¶æ‡¶á‡¶≤</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-number" id="imageFiles">0</div>
                        <div class="stat-label">‡¶õ‡¶¨‡¶ø</div>
                    </div>
                </div>
                
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 10px;">
                    <div style="color: #666;">
                        <span id="fileCount">0‡¶ü‡¶ø ‡¶´‡¶æ‡¶á‡¶≤</span> |
                        <span id="storageUsed">0 MB ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡ßÉ‡¶§</span>
                    </div>
                    
                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                        <select id="fileTypeFilter" onchange="filterFiles()" style="padding: 8px 12px; border: 2px solid #ddd; border-radius: 8px; min-width: 120px;">
                            <option value="">‡¶∏‡¶¨ ‡¶ü‡¶æ‡¶á‡¶™</option>
                            <option value="pdf">PDF</option>
                            <option value="image">‡¶õ‡¶¨‡¶ø</option>
                            <option value="video">‡¶≠‡¶ø‡¶°‡¶ø‡¶ì</option>
                            <option value="doc">‡¶°‡¶ï‡ßÅ‡¶Æ‡ßá‡¶®‡ßç‡¶ü</option>
                            <option value="zip">‡¶ú‡¶ø‡¶™ ‡¶´‡¶æ‡¶á‡¶≤</option>
                        </select>
                        
                        <input type="text" id="fileSearch" placeholder="‡¶´‡¶æ‡¶á‡¶≤ ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶®..." onkeyup="filterFiles()" style="padding: 8px 12px; border: 2px solid #ddd; border-radius: 8px; min-width: 150px;">
                        
                        <button onclick="refreshFiles()" class="btn" style="width: auto; padding: 8px 15px;">
                            üîÑ ‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂
                        </button>
                    </div>
                </div>
                
                <div id="filesLoading" style="text-align: center; padding: 40px; color: #666;">‡¶´‡¶æ‡¶á‡¶≤ ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</div>
                <div id="filesDisplay"></div>
            </div>
        </div>
        
        <!-- File Upload Tab -->
        <div id="uploadTab" class="tab-content">
            <div class="form-section">
                <h3>üì§ ‡¶®‡¶§‡ßÅ‡¶® ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
                
                <div class="two-column">
                    <div>
                        <div class="form-group">
                            <label>‡¶´‡¶æ‡¶á‡¶≤ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®:</label>
                            <div class="file-upload-container" id="dropArea" onclick="document.getElementById('fileInput').click()">
                                <div style="font-size: 48px; color: var(--primary-color);">üìÅ</div>
                                <p style="color: #666; margin: 10px 0;">‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶¨‡¶æ ‡¶´‡¶æ‡¶á‡¶≤ ‡¶°‡ßç‡¶∞‡¶™ ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                                <p style="font-size: 14px; color: #888;">‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü‡ßá‡¶°: PDF, Image, Video, Word, Excel, PowerPoint, ZIP</p>
                                <p style="font-size: 12px; color: #aaa;">‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶∏‡¶ø‡¶Æ‡¶æ‡¶Æ ‡¶∏‡¶æ‡¶á‡¶ú: 50MB</p>
                            </div>
                            <input type="file" id="fileInput" multiple style="display: none;" onchange="handleFileSelect(event)">
                        </div>
                        
                        <div class="upload-progress" id="uploadProgress">
                            <div class="progress-bar" id="progressBar"></div>
                        </div>
                        
                        <div id="filePreview"></div>
                        
                        <div class="form-group">
                            <label>‡¶´‡¶æ‡¶á‡¶≤‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ (‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶¨‡¶æ ‡¶á‡¶Ç‡¶∞‡ßá‡¶ú‡¶ø):</label>
                            <input type="text" id="fileName" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶ó‡¶£‡¶ø‡¶§ ‡¶¨‡¶á, English Grammar, Science Note">
                        </div>
                        
                        <div class="form-group">
                            <label>‡¶¨‡¶∞‡ßç‡¶£‡¶®‡¶æ (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï):</label>
                            <textarea id="fileDescription" rows="3" placeholder="‡¶´‡¶æ‡¶á‡¶≤‡ßá‡¶∞ ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶¨‡¶∞‡ßç‡¶£‡¶®‡¶æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..."></textarea>
                        </div>
                    </div>
                    
                    <div>
                        <div class="form-group">
                            <label>‡¶ï‡ßç‡¶≤‡¶æ‡¶∏ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®:</label>
                            <select id="fileClass">
                                <option value="">-- ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏ ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶® --</option>
                                <option value="Class 6">Class 6 - ‡¶∑‡¶∑‡ßç‡¶† ‡¶∂‡ßç‡¶∞‡ßá‡¶£‡ßÄ</option>
                                <option value="Class 7">Class 7 - ‡¶∏‡¶™‡ßç‡¶§‡¶Æ ‡¶∂‡ßç‡¶∞‡ßá‡¶£‡ßÄ</option>
                                <option value="Class 8">Class 8 - ‡¶Ö‡¶∑‡ßç‡¶ü‡¶Æ ‡¶∂‡ßç‡¶∞‡ßá‡¶£‡ßÄ</option>
                                <option value="Class 9">Class 9 - ‡¶®‡¶¨‡¶Æ ‡¶∂‡ßç‡¶∞‡ßá‡¶£‡ßÄ</option>
                                <option value="Class 10">Class 10 - ‡¶¶‡¶∂‡¶Æ ‡¶∂‡ßç‡¶∞‡ßá‡¶£‡ßÄ</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>‡¶¨‡¶ø‡¶∑‡ßü ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®:</label>
                            <select id="fileSubject">
                                <option value="">-- ‡¶¨‡¶ø‡¶∑‡ßü ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶® --</option>
                                <option value="math">‡¶ó‡¶£‡¶ø‡¶§ (Mathematics)</option>
                                <option value="english">‡¶á‡¶Ç‡¶∞‡ßá‡¶ú‡¶ø (English)</option>
                                <option value="science">‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶® (Science)</option>
                                <option value="ict">‡¶§‡¶•‡ßç‡¶Ø ‡¶ì ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶™‡ßç‡¶∞‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§‡¶ø (ICT)</option>
                                <option value="agriculture">‡¶ï‡ßÉ‡¶∑‡¶ø ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ (Agriculture)</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>‡¶´‡¶æ‡¶á‡¶≤ ‡¶ü‡¶æ‡¶á‡¶™:</label>
                            <select id="fileType">
                                <option value="pdf">PDF ‡¶°‡¶ï‡ßÅ‡¶Æ‡ßá‡¶®‡ßç‡¶ü</option>
                                <option value="image">‡¶õ‡¶¨‡¶ø (Image)</option>
                                <option value="video">‡¶≠‡¶ø‡¶°‡¶ø‡¶ì (Video)</option>
                                <option value="doc">‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶°‡¶ï‡ßÅ‡¶Æ‡ßá‡¶®‡ßç‡¶ü</option>
                                <option value="excel">‡¶è‡¶ï‡ßç‡¶∏‡ßá‡¶≤ ‡¶´‡¶æ‡¶á‡¶≤</option>
                                <option value="ppt">‡¶™‡¶æ‡¶ì‡ßü‡¶æ‡¶∞‡¶™‡ßü‡ßá‡¶®‡ßç‡¶ü</option>
                                <option value="zip">‡¶ï‡¶Æ‡ßç‡¶™‡ßç‡¶∞‡ßá‡¶∏‡¶° ‡¶´‡¶æ‡¶á‡¶≤ (ZIP/RAR)</option>
                                <option value="other">‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>‡¶ü‡ßç‡¶Ø‡¶æ‡¶ó‡¶∏ (‡¶ï‡¶Æ‡¶æ ‡¶¶‡¶ø‡ßü‡ßá ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®):</label>
                            <input type="text" id="fileTags" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶¨‡¶á, ‡¶ó‡¶æ‡¶á‡¶°, ‡¶®‡ßã‡¶ü, ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®, ‡¶∏‡¶Æ‡¶æ‡¶ß‡¶æ‡¶®">
                            <small style="color: #666;">‡¶è‡¶ï‡¶æ‡¶ß‡¶ø‡¶ï ‡¶ü‡ßç‡¶Ø‡¶æ‡¶ó ‡¶ï‡¶Æ‡¶æ (,) ‡¶¶‡¶ø‡ßü‡ßá ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®</small>
                        </div>
                        
                        <button onclick="uploadFile()" class="btn btn-success" id="uploadBtn">
                            üì§ ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®
                        </button>
                    </div>
                </div>
                
                <!-- PWA Install Button -->
                <div class="install-button-container">
                    <h3>üì± ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶á‡¶®‡¶∏‡ßç‡¶ü‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
                    <div class="install-features">
                        <div class="install-feature"><span>üìÅ</span> ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú</div>
                        <div class="install-feature"><span>üöÄ</span> ‡¶¶‡ßç‡¶∞‡ßÅ‡¶§ ‡¶≤‡ßã‡¶°</div>
                        <div class="install-feature"><span>üì∂</span> ‡¶Ö‡¶´‡¶≤‡¶æ‡¶á‡¶®</div>
                        <div class="install-feature"><span>üîî</span> ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶®</div>
                    </div>
                    <button id="installButton" class="btn btn-install" style="max-width: 300px; margin: 0 auto;">
                        <span style="font-size: 24px; display: block; margin-bottom: 5px;">üì±</span>
                        <strong>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶á‡¶®‡¶∏‡ßç‡¶ü‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®</strong>
                        <br>
                        <small style="font-size: 12px; opacity: 0.8;">‡¶π‡ßã‡¶Æ ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡ßá ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®</small>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- PWA Install Prompt -->
    <div id="installPrompt">
        <h4>üì± ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ ‡¶∏‡¶π‡¶æ‡¶Ø‡¶º‡¶ø‡¶ï‡¶æ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™</h4>
        <p>‡¶è‡¶á ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡¶ü‡¶ø‡¶ï‡ßá ‡¶á‡¶®‡¶∏‡ßç‡¶ü‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶™‡ßÇ‡¶∞‡ßç‡¶£‡¶æ‡¶ô‡ßç‡¶ó ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßá‡¶∞ ‡¶Æ‡¶§‡ßã ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®:</p>
        <ul style="text-align: left; color: #555; margin: 15px 0; padding-left: 20px; font-size: 14px;">
            <li>‡¶π‡ßã‡¶Æ ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡ßá ‡¶Ü‡¶á‡¶ï‡¶® ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶π‡¶¨‡ßá</li>
            <li>‡¶´‡ßÅ‡¶≤‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶® ‡¶Æ‡ßã‡¶°‡ßá ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶π‡¶¨‡ßá</li>
            <li>‡¶Ö‡¶´‡¶≤‡¶æ‡¶á‡¶®‡ßá‡¶ì ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®</li>
            <li>‡¶¶‡ßç‡¶∞‡ßÅ‡¶§ ‡¶è‡¶ï‡ßç‡¶∏‡ßá‡¶∏ ‡¶™‡¶æ‡¶¨‡ßá‡¶®</li>
            <li>‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶™‡¶æ‡¶¨‡ßá‡¶®</li>
        </ul>
        <div class="prompt-buttons">
            <button onclick="installApp()" class="install-btn">‡¶á‡¶®‡¶∏‡ßç‡¶ü‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            <button onclick="hideInstallPrompt()" class="later-btn">‡¶™‡¶∞‡ßá</button>
        </div>
    </div>

    <!-- iOS Install Instructions Modal -->
    <div id="iosInstallModal">
        <div class="ios-modal-content">
            <h3>üì± iOS-‡¶è ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶á‡¶®‡¶∏‡ßç‡¶ü‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
            <p style="color: #666; margin-bottom: 20px; text-align: center;">
                iOS ‡¶°‡¶ø‡¶≠‡¶æ‡¶á‡¶∏‡ßá ‡¶è‡¶á ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶á‡¶®‡¶∏‡ßç‡¶ü‡¶≤ ‡¶ï‡¶∞‡¶§‡ßá ‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶∏‡ßç‡¶ü‡ßá‡¶™‡¶ó‡ßÅ‡¶≤‡ßã ‡¶´‡¶≤‡ßã ‡¶ï‡¶∞‡ßÅ‡¶®:
            </p>
            
            <ol class="ios-steps">
                <li><strong>Safari ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞</strong> ‡¶ì‡¶™‡ßá‡¶® ‡¶ï‡¶∞‡ßÅ‡¶® (Chrome ‡¶®‡ßü)</li>
                <li>‡¶è‡¶á ‡¶™‡ßá‡¶ú‡ßá ‡¶Ø‡¶æ‡¶®: <code style="background: #f1f1f1; padding: 2px 5px; border-radius: 3px;" id="currentUrl"></code></li>
                <li>‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶∂‡ßá‡ßü‡¶æ‡¶∞ ‡¶Ü‡¶á‡¶ï‡¶®‡ßá ‡¶ü‡ßç‡¶Ø‡¶æ‡¶™ ‡¶ï‡¶∞‡ßÅ‡¶® (‡¶¨‡¶ï‡ßç‡¶∏ ‡¶•‡ßá‡¶ï‡ßá ‡¶¨‡ßá‡¶∞ ‡¶π‡¶ì‡ßü‡¶æ ‡¶§‡ßÄ‡¶∞‡ßá‡¶∞ ‡¶Ü‡¶á‡¶ï‡¶®)</li>
                <li>‡¶≤‡¶ø‡¶∏‡ßç‡¶ü ‡¶•‡ßá‡¶ï‡ßá <strong>"Add to Home Screen"</strong> ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</li>
                <li>"Add" ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ü‡ßç‡¶Ø‡¶æ‡¶™ ‡¶ï‡¶∞‡ßÅ‡¶®</li>
                <li>‡¶π‡ßã‡¶Æ ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶Ü‡¶á‡¶ï‡¶® ‡¶¶‡ßá‡¶ñ‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá</li>
            </ol>
            
            <div style="background: #e8f4fd; padding: 15px; border-radius: 10px; margin: 20px 0;">
                <strong>üí° ‡¶ü‡¶ø‡¶™:</strong> Safari ‡¶è‡¶∞ Settings ‚Üí General ‚Üí iPhone Storage ‚Üí Website Data ‡¶•‡ßá‡¶ï‡ßá ‡¶ì‡ßü‡ßá‡¶¨‡¶∏‡¶æ‡¶á‡¶ü ‡¶°‡ßá‡¶ü‡¶æ ‡¶ï‡ßç‡¶≤‡¶ø‡ßü‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡¶® ‡¶Ø‡¶¶‡¶ø ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡ßü‡•§
            </div>
            
            <button onclick="closeIOSModal()" class="btn" style="background: var(--primary-color); color: white; width: 100%;">
                ‡¶¨‡ßÅ‡¶ù‡ßá‡¶õ‡¶ø, ‡¶ß‡¶®‡ßç‡¶Ø‡¶¨‡¶æ‡¶¶
            </button>
        </div>
    </div>

    <!-- Android Install Instructions Modal -->
    <div id="androidInstallModal">
        <div class="android-modal-content">
            <h3>üì± Android-‡¶è ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶á‡¶®‡¶∏‡ßç‡¶ü‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
            <p style="color: #666; margin-bottom: 20px; text-align: center;">
                Android ‡¶°‡¶ø‡¶≠‡¶æ‡¶á‡¶∏‡ßá ‡¶è‡¶á ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶á‡¶®‡¶∏‡ßç‡¶ü‡¶≤ ‡¶ï‡¶∞‡¶§‡ßá ‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶∏‡ßç‡¶ü‡ßá‡¶™‡¶ó‡ßÅ‡¶≤‡ßã ‡¶´‡¶≤‡ßã ‡¶ï‡¶∞‡ßÅ‡¶®:
            </p>
            
            <ol class="ios-steps">
                <li><strong>Chrome ‡¶¨‡¶æ Brave ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞</strong> ‡¶ì‡¶™‡ßá‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</li>
                <li>‡¶è‡¶á ‡¶™‡ßá‡¶ú‡ßá ‡¶Ø‡¶æ‡¶®: <code style="background: #f1f1f1; padding: 2px 5px; border-radius: 3px;" id="androidCurrentUrl"></code></li>
                <li>‡¶â‡¶™‡¶∞‡ßá‡¶∞ ‡¶°‡¶ü‡¶∏ ‡¶Æ‡ßá‡¶®‡ßÅ‡¶§‡ßá ‡¶ü‡ßç‡¶Ø‡¶æ‡¶™ ‡¶ï‡¶∞‡ßÅ‡¶® (‚ãÆ)</li>
                <li>‡¶≤‡¶ø‡¶∏‡ßç‡¶ü ‡¶•‡ßá‡¶ï‡ßá <strong>"Install app"</strong> ‡¶¨‡¶æ <strong>"Add to Home screen"</strong> ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</li>
                <li>"Install" ‡¶¨‡¶æ "Add" ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ü‡ßç‡¶Ø‡¶æ‡¶™ ‡¶ï‡¶∞‡ßÅ‡¶®</li>
                <li>‡¶π‡ßã‡¶Æ ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶Ü‡¶á‡¶ï‡¶® ‡¶¶‡ßá‡¶ñ‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá</li>
            </ol>
            
            <div style="background: #e8f4fd; padding: 15px; border-radius: 10px; margin: 20px 0;">
                <strong>üí° ‡¶ü‡¶ø‡¶™:</strong> ‡¶Ø‡¶¶‡¶ø "Install app" ‡¶Ö‡¶™‡¶∂‡¶® ‡¶®‡¶æ ‡¶¶‡ßá‡¶ñ‡ßá‡¶®, ‡¶§‡¶¨‡ßá "Add to Home screen" ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®‡•§
            </div>
            
            <div class="prompt-buttons" style="margin-top: 20px;">
                <button onclick="closeAndroidModal()" class="btn" style="background: var(--primary-color); color: white; flex: 1;">
                    ‡¶¨‡ßÅ‡¶ù‡ßá‡¶õ‡¶ø
                </button>
                <button onclick="tryAutoInstall()" class="btn" style="background: var(--success-color); color: white; flex: 1;">
                    ‡¶∏‡ßç‡¶¨‡ßü‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡ßü ‡¶á‡¶®‡¶∏‡ßç‡¶ü‡¶≤
                </button>
            </div>
        </div>
    </div>

    <script>
        // ‚úÖ Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyB1vOW-DY6zIkXhPK5CRF3N8w-LzUKsvgg",
            authDomain: "education-app-8931d.firebaseapp.com",
            databaseURL: "https://education-app-8931d-default-rtdb.firebaseio.com",
            projectId: "education-app-8931d",
            storageBucket: "education-app-8931d.firebasestorage.app",
            messagingSenderId: "667995018685",
            appId: "1:667995018685:web:c8cdc1d432748cdc98eed4"
        };

        // ‚úÖ Global Variables
        let db;
        let auth;
        let storage;
        let currentUser = null;
        let currentData = [];
        let currentFiles = [];
        let selectedFile = null;
        let deferredPrompt = null;
        let isAppInstalled = false;

        // ‚úÖ Initialize Firebase
        function initializeFirebase() {
            try {
                firebase.initializeApp(firebaseConfig);
                db = firebase.database();
                auth = firebase.auth();
                storage = firebase.storage();
                console.log("‚úÖ Firebase initialized successfully");
                setupAuth();
            } catch (error) {
                console.error("‚ùå Firebase initialization error:", error);
                showStatus("Firebase ‡¶∏‡¶Ç‡¶Ø‡ßã‡¶ó ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•", "error");
            }
        }

        // ‚úÖ Authentication Setup
        function setupAuth() {
            auth.onAuthStateChanged((user) => {
                if (user) {
                    // User is signed in
                    currentUser = user;
                    document.getElementById('userEmail').textContent = user.email;
                    document.getElementById('loginModal').style.display = 'none';
                    document.getElementById('adminContainer').style.display = 'block';
                    document.title = "‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ ‡¶è‡¶°‡¶Æ‡¶ø‡¶® - " + user.email;
                    
                    // Show PWA status
                    checkAppInstalled();
                    
                    // Load data
                    loadData();
                    loadFiles();
                    
                    // Check if we should show install prompt
                    setTimeout(() => {
                        if (!isAppInstalled && deferredPrompt) {
                            showInstallPrompt();
                        }
                    }, 3000);
                    
                    showStatus("‡¶≤‡¶ó‡¶á‡¶® ‡¶∏‡¶´‡¶≤", "success");
                } else {
                    // User is signed out
                    currentUser = null;
                    document.getElementById('loginModal').style.display = 'flex';
                    document.getElementById('adminContainer').style.display = 'none';
                    showStatus("‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü ‡¶π‡ßü‡ßá‡¶õ‡ßá", "info");
                }
            });
        }

        // ‚úÖ Login Function
        function loginAdmin() {
            const email = document.getElementById('adminEmail').value.trim();
            const password = document.getElementById('adminPassword').value.trim();
            const errorDiv = document.getElementById('loginError');
            
            if (!email || !password) {
                errorDiv.textContent = "‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶è‡¶¨‡¶Ç ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡¶ø‡¶®";
                errorDiv.style.display = 'block';
                return;
            }
            
            auth.signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    errorDiv.style.display = 'none';
                    showStatus("‡¶≤‡¶ó‡¶á‡¶® ‡¶∏‡¶´‡¶≤ ‡¶π‡ßü‡ßá‡¶õ‡ßá", "success");
                })
                .catch((error) => {
                    let errorMessage = "‡¶≤‡¶ó‡¶á‡¶® ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•";
                    switch(error.code) {
                        case 'auth/invalid-email': errorMessage = "‡¶≠‡ßÅ‡¶≤ ‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶´‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ü"; break;
                        case 'auth/user-disabled': errorMessage = "‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶®‡¶ø‡¶∑‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º"; break;
                        case 'auth/user-not-found': errorMessage = "‡¶è‡¶á ‡¶á‡¶Æ‡ßá‡¶á‡¶≤‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶®‡ßá‡¶á"; break;
                        case 'auth/wrong-password': errorMessage = "‡¶≠‡ßÅ‡¶≤ ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°"; break;
                        case 'auth/too-many-requests': errorMessage = "‡¶Ö‡¶®‡ßá‡¶ï‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶®, ‡¶™‡¶∞‡ßá ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®"; break;
                    }
                    errorDiv.textContent = errorMessage;
                    errorDiv.style.display = 'block';
                });
        }

        // ‚úÖ Logout Function
        function logoutAdmin() {
            auth.signOut()
                .then(() => {
                    showStatus("‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü ‡¶∏‡¶´‡¶≤", "info");
                })
                .catch((error) => {
                    console.error("Logout error:", error);
                });
        }

        // ‚úÖ Tab Switching
        function switchTab(tabName) {
            // Hide all tabs
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all tab buttons
            const tabButtons = document.querySelectorAll('.tab');
            tabButtons.forEach(button => {
                button.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to clicked button
            event.target.classList.add('active');
            
            // Load files if file tab is selected
            if (tabName === 'fileTab') {
                loadFiles();
            }
        }

        // ‚úÖ File Upload Functions
        let selectedFiles = [];
        
        function handleFileSelect(event) {
            selectedFiles = Array.from(event.target.files);
            displayFilePreview();
        }
        
        function displayFilePreview() {
            const previewDiv = document.getElementById('filePreview');
            previewDiv.innerHTML = '';
            
            selectedFiles.forEach((file, index) => {
                const fileDiv = document.createElement('div');
                fileDiv.className = 'file-info';
                fileDiv.style.marginBottom = '10px';
                
                const fileName = file.name;
                const fileSize = formatFileSize(file.size);
                const fileType = getFileType(file.type);
                
                fileDiv.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong>${fileName}</strong>
                            <div class="file-size">${fileSize} ‚Ä¢ ${fileType}</div>
                        </div>
                        <button onclick="removeFile(${index})" style="background: #e74c3c; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer;">
                            √ó
                        </button>
                    </div>
                `;
                
                previewDiv.appendChild(fileDiv);
            });
            
            if (selectedFiles.length > 0) {
                document.getElementById('fileName').value = selectedFiles[0].name.split('.')[0];
            }
        }
        
        function removeFile(index) {
            selectedFiles.splice(index, 1);
            displayFilePreview();
        }
        
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }
        
        function getFileType(mimeType) {
            if (mimeType.includes('pdf')) return 'PDF';
            if (mimeType.includes('image')) return 'Image';
            if (mimeType.includes('video')) return 'Video';
            if (mimeType.includes('word') || mimeType.includes('document')) return 'Word';
            if (mimeType.includes('excel') || mimeType.includes('spreadsheet')) return 'Excel';
            if (mimeType.includes('powerpoint') || mimeType.includes('presentation')) return 'PowerPoint';
            if (mimeType.includes('zip') || mimeType.includes('compressed')) return 'ZIP';
            return 'Other';
        }
        
        // ‚úÖ Upload File to Firebase Storage
        function uploadFile() {
            if (!selectedFiles.length) {
                showStatus("‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶´‡¶æ‡¶á‡¶≤ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®", "error");
                return;
            }
            
            const fileName = document.getElementById('fileName').value.trim();
            const fileDescription = document.getElementById('fileDescription').value.trim();
            const fileClass = document.getElementById('fileClass').value;
            const fileSubject = document.getElementById('fileSubject').value;
            const fileType = document.getElementById('fileType').value;
            const fileTags = document.getElementById('fileTags').value;
            
            if (!fileName || !fileClass || !fileSubject) {
                showStatus("‡¶´‡¶æ‡¶á‡¶≤‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ, ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏ ‡¶è‡¶¨‡¶Ç ‡¶¨‡¶ø‡¶∑‡ßü ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®", "error");
                return;
            }
            
            const file = selectedFiles[0];
            const maxSize = 50 * 1024 * 1024; // 50MB
            
            if (file.size > maxSize) {
                showStatus("‡¶´‡¶æ‡¶á‡¶≤ ‡¶∏‡¶æ‡¶á‡¶ú 50MB ‡¶è‡¶∞ ‡¶ï‡¶Æ ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá", "error");
                return;
            }
            
            // Generate unique file name
            const timestamp = Date.now();
            const fileExt = file.name.split('.').pop();
            const uniqueFileName = `${timestamp}_${Math.random().toString(36).substr(2, 9)}.${fileExt}`;
            
            // Create storage reference
            const storageRef = storage.ref(`files/${uniqueFileName}`);
            
            // Show progress bar
            const progressBar = document.getElementById('progressBar');
            const uploadProgress = document.getElementById('uploadProgress');
            uploadProgress.style.display = 'block';
            progressBar.style.width = '0%';
            
            // Disable upload button
            const uploadBtn = document.getElementById('uploadBtn');
            uploadBtn.disabled = true;
            uploadBtn.innerHTML = '‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...';
            
            // Upload file
            const uploadTask = storageRef.put(file);
            
            uploadTask.on('state_changed',
                (snapshot) => {
                    // Progress monitoring
                    const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
                    progressBar.style.width = progress + '%';
                },
                (error) => {
                    // Error handling
                    console.error("Upload error:", error);
                    showStatus("‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•: " + error.message, "error");
                    uploadProgress.style.display = 'none';
                    uploadBtn.disabled = false;
                    uploadBtn.innerHTML = 'üì§ ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®';
                },
                () => {
                    // Upload completed
                    uploadTask.snapshot.ref.getDownloadURL().then((downloadURL) => {
                        // Save file info to database
                        const fileData = {
                            originalName: file.name,
                            fileName: fileName,
                            description: fileDescription,
                            class: fileClass,
                            subject: fileSubject,
                            type: fileType,
                            tags: fileTags.split(',').map(tag => tag.trim()).filter(tag => tag),
                            size: file.size,
                            url: downloadURL,
                            storagePath: `files/${uniqueFileName}`,
                            uploadDate: new Date().toLocaleString('bn-BD'),
                            timestamp: timestamp,
                            uploadedBy: currentUser.email,
                            mimeType: file.type,
                            downloadCount: 0,
                            viewCount: 0
                        };
                        
                        db.ref('files').push(fileData)
                            .then(() => {
                                showStatus("‡¶´‡¶æ‡¶á‡¶≤ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶π‡ßü‡ßá‡¶õ‡ßá!", "success");
                                
                                // Reset form
                                document.getElementById('fileName').value = '';
                                document.getElementById('fileDescription').value = '';
                                document.getElementById('fileTags').value = '';
                                document.getElementById('filePreview').innerHTML = '';
                                selectedFiles = [];
                                document.getElementById('fileInput').value = '';
                                
                                // Hide progress bar
                                uploadProgress.style.display = 'none';
                                
                                // Enable upload button
                                uploadBtn.disabled = false;
                                uploadBtn.innerHTML = 'üì§ ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®';
                                
                                // Load files list
                                loadFiles();
                            })
                            .catch((error) => {
                                showStatus("‡¶°‡ßá‡¶ü‡¶æ ‡¶∏‡ßá‡¶≠ ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•: " + error.message, "error");
                                uploadProgress.style.display = 'none';
                                uploadBtn.disabled = false;
                                uploadBtn.innerHTML = 'üì§ ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®';
                            });
                    });
                }
            );
        }
        
        // ‚úÖ Load Files from Database
        function loadFiles() {
            if (!db) return;
            
            db.ref('files').orderByChild('timestamp').on('value', (snapshot) => {
                const filesDisplay = document.getElementById('filesDisplay');
                const filesLoading = document.getElementById('filesLoading');
                
                if (filesLoading) filesLoading.style.display = "none";
                
                if (!snapshot.exists()) {
                    filesDisplay.innerHTML = "<p style='text-align: center; padding: 40px; color: #666;'>‡¶ï‡ßã‡¶®‡ßã ‡¶´‡¶æ‡¶á‡¶≤ ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø</p>";
                    updateFileStats(0, 0, 0, 0, 0);
                    return;
                }
                
                currentFiles = [];
                let html = `
                    <table>
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>‡¶´‡¶æ‡¶á‡¶≤ ‡¶®‡¶æ‡¶Æ</th>
                                <th>‡¶ï‡ßç‡¶≤‡¶æ‡¶∏</th>
                                <th>‡¶¨‡¶ø‡¶∑‡ßü</th>
                                <th>‡¶ü‡¶æ‡¶á‡¶™</th>
                                <th>‡¶∏‡¶æ‡¶á‡¶ú</th>
                                <th>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</th>
                                <th>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶®</th>
                            </tr>
                        </thead>
                        <tbody>`;
                
                let index = 1;
                let totalSize = 0;
                let pdfCount = 0;
                let imageCount = 0;
                let videoCount = 0;
                let docCount = 0;
                
                snapshot.forEach((child) => {
                    const val = child.val();
                    const key = child.key;
                    
                    currentFiles.push({key, ...val});
                    totalSize += val.size || 0;
                    
                    // Count by type
                    if (val.type === 'pdf') pdfCount++;
                    if (val.type === 'image') imageCount++;
                    if (val.type === 'video') videoCount++;
                    if (['doc', 'excel', 'ppt'].includes(val.type)) docCount++;
                    
                    const fileTypeClass = getFileTypeClass(val.type);
                    const fileTypeBadge = getFileTypeBadge(val.type);
                    
                    html += `
                        <tr>
                            <td>${index}</td>
                            <td>
                                <strong>${val.fileName}</strong>
                                ${fileTypeBadge}
                                <div style="font-size: 12px; color: #666;">${val.originalName}</div>
                            </td>
                            <td>${val.class}</td>
                            <td>${getSubjectName(val.subject)}</td>
                            <td><span class="material-type ${fileTypeClass}">${val.type}</span></td>
                            <td>${formatFileSize(val.size)}</td>
                            <td>${val.uploadDate}</td>
                            <td>
                                <div class="action-buttons">
                                    <button onclick="viewFile('${key}')" class="view-btn">üëÅÔ∏è</button>
                                    <button onclick="downloadFile('${key}')" class="download-btn">üì•</button>
                                    <button onclick="editFile('${key}')" class="edit-btn">‚úèÔ∏è</button>
                                    <button onclick="deleteFile('${key}')" class="delete-btn">üóëÔ∏è</button>
                                </div>
                            </td>
                        </tr>`;
                    index++;
                });
                
                html += `</tbody></table>`;
                filesDisplay.innerHTML = html;
                
                // Update statistics
                updateFileStats(currentFiles.length, totalSize, pdfCount, imageCount, videoCount + docCount);
            });
        }
        
        function getFileTypeClass(type) {
            const types = {
                'pdf': 'pdf',
                'image': 'image',
                'video': 'video',
                'doc': 'book',
                'excel': 'book',
                'ppt': 'book',
                'zip': 'other',
                'other': 'other'
            };
            return types[type] || 'other';
        }
        
        function getFileTypeBadge(type) {
            const badges = {
                'pdf': '<span class="file-type-badge file-type-pdf">PDF</span>',
                'image': '<span class="file-type-badge file-type-image">IMG</span>',
                'video': '<span class="file-type-badge file-type-video">VID</span>',
                'doc': '<span class="file-type-badge file-type-doc">DOC</span>',
                'excel': '<span class="file-type-badge file-type-doc">XLS</span>',
                'ppt': '<span class="file-type-badge file-type-doc">PPT</span>',
                'zip': '<span class="file-type-badge file-type-zip">ZIP</span>',
                'other': '<span class="file-type-badge file-type-other">FILE</span>'
            };
            return badges[type] || badges['other'];
        }
        
        function updateFileStats(total, size, pdf, image, other) {
            document.getElementById('totalFiles').textContent = total;
            document.getElementById('totalSize').textContent = formatFileSize(size);
            document.getElementById('pdfFiles').textContent = pdf;
            document.getElementById('imageFiles').textContent = image;
            
            document.getElementById('fileCount').textContent = total + '‡¶ü‡¶ø ‡¶´‡¶æ‡¶á‡¶≤';
            document.getElementById('storageUsed').textContent = formatFileSize(size) + ' ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡ßÉ‡¶§';
        }
        
        // ‚úÖ View File
        function viewFile(key) {
            const file = currentFiles.find(f => f.key === key);
            if (!file) return;
            
            // Update view count
            db.ref('files/' + key + '/viewCount').transaction((count) => {
                return (count || 0) + 1;
            });
            
            const modal = document.getElementById('fileViewModal');
            const title = document.getElementById('fileViewTitle');
            const content = document.getElementById('fileViewContent');
            
            title.textContent = file.fileName;
            
            let contentHTML = `
                <div style="margin-bottom: 20px;">
                    <p><strong>‡¶¨‡¶∞‡ßç‡¶£‡¶®‡¶æ:</strong> ${file.description || '‡¶ï‡ßã‡¶®‡ßã ‡¶¨‡¶∞‡ßç‡¶£‡¶®‡¶æ ‡¶®‡ßá‡¶á'}</p>
                    <p><strong>‡¶ï‡ßç‡¶≤‡¶æ‡¶∏:</strong> ${file.class}</p>
                    <p><strong>‡¶¨‡¶ø‡¶∑‡ßü:</strong> ${getSubjectName(file.subject)}</p>
                    <p><strong>‡¶ü‡¶æ‡¶á‡¶™:</strong> ${file.type}</p>
                    <p><strong>‡¶∏‡¶æ‡¶á‡¶ú:</strong> ${formatFileSize(file.size)}</p>
                    <p><strong>‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ:</strong> ${file.uploadDate}</p>
                    <p><strong>‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶®:</strong> ${file.uploadedBy}</p>
                    ${file.tags && file.tags.length ? `<p><strong>‡¶ü‡ßç‡¶Ø‡¶æ‡¶ó‡¶∏:</strong> ${file.tags.join(', ')}</p>` : ''}
                </div>
                <div style="text-align: center;">
                    <a href="${file.url}" target="_blank" class="btn" style="width: auto; margin: 10px;">
                        üîó ‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï
                    </a>
                    <button onclick="downloadFile('${key}')" class="btn" style="width: auto; margin: 10px; background: var(--success-color);">
                        üì• ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®
                    </button>
                </div>
                <div style="margin-top: 20px; text-align: center;">`;
            
            if (file.type === 'pdf') {
                contentHTML += `
                    <iframe src="${file.url}" class="file-viewer pdf" frameborder="0"></iframe>
                    <p style="color: #666; margin-top: 10px;">PDF ‡¶≠‡¶ø‡¶â‡ßü‡¶æ‡¶∞ ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
                `;
            } else if (file.type === 'image') {
                contentHTML += `
                    <img src="${file.url}" alt="${file.fileName}" class="file-viewer">
                `;
            } else if (file.type === 'video') {
                contentHTML += `
                    <video controls class="file-viewer">
                        <source src="${file.url}" type="${file.mimeType || 'video/mp4'}">
                        ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ï‡¶∞‡ßá ‡¶®‡¶æ‡•§
                    </video>
                `;
            } else {
                contentHTML += `
                    <div style="background: #f8f9fa; padding: 40px; border-radius: 10px; text-align: center;">
                        <div style="font-size: 48px; color: #3498db;">üìÑ</div>
                        <h4>‡¶´‡¶æ‡¶á‡¶≤ ‡¶™‡ßç‡¶∞‡¶ø‡¶≠‡¶ø‡¶â</h4>
                        <p>‡¶è‡¶á ‡¶´‡¶æ‡¶á‡¶≤‡¶ü‡¶ø‡¶∞ ‡¶™‡ßç‡¶∞‡¶ø‡¶≠‡¶ø‡¶â ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã ‡¶∏‡¶Æ‡ßç‡¶≠‡¶¨ ‡¶®‡ßü‡•§ ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßá ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®‡•§</p>
                        <p style="font-size: 14px; color: #666;">‡¶´‡¶æ‡¶á‡¶≤ ‡¶ü‡¶æ‡¶á‡¶™: ${file.type.toUpperCase()}</p>
                    </div>
                `;
            }
            
            contentHTML += `</div>`;
            content.innerHTML = contentHTML;
            modal.style.display = 'flex';
        }
        
        // ‚úÖ Download File
        function downloadFile(key) {
            const file = currentFiles.find(f => f.key === key);
            if (!file) return;
            
            // Update download count
            db.ref('files/' + key + '/downloadCount').transaction((count) => {
                return (count || 0) + 1;
            });
            
            // Create download link
            const link = document.createElement('a');
            link.href = file.url;
            link.download = file.fileName + '.' + file.originalName.split('.').pop();
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            showStatus("‡¶´‡¶æ‡¶á‡¶≤ ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶π‡ßü‡ßá‡¶õ‡ßá", "success");
        }
        
        // ‚úÖ Edit File
        function editFile(key) {
            const file = currentFiles.find(f => f.key === key);
            if (!file) return;
            
            selectedFile = file;
            
            const modal = document.getElementById('fileEditModal');
            const content = document.getElementById('fileEditContent');
            
            let contentHTML = `
                <div class="form-group">
                    <label>‡¶´‡¶æ‡¶á‡¶≤‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ:</label>
                    <input type="text" id="editFileName" value="${file.fileName}" placeholder="‡¶´‡¶æ‡¶á‡¶≤‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ">
                </div>
                
                <div class="form-group">
                    <label>‡¶¨‡¶∞‡ßç‡¶£‡¶®‡¶æ:</label>
                    <textarea id="editFileDescription" rows="3" placeholder="‡¶´‡¶æ‡¶á‡¶≤‡ßá‡¶∞ ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶¨‡¶∞‡ßç‡¶£‡¶®‡¶æ">${file.description || ''}</textarea>
                </div>
                
                <div class="two-column" style="grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div class="form-group">
                        <label>‡¶ï‡ßç‡¶≤‡¶æ‡¶∏:</label>
                        <select id="editFileClass">
                            <option value="Class 6" ${file.class === 'Class 6' ? 'selected' : ''}>Class 6 - ‡¶∑‡¶∑‡ßç‡¶† ‡¶∂‡ßç‡¶∞‡ßá‡¶£‡ßÄ</option>
                            <option value="Class 7" ${file.class === 'Class 7' ? 'selected' : ''}>Class 7 - ‡¶∏‡¶™‡ßç‡¶§‡¶Æ ‡¶∂‡ßç‡¶∞‡ßá‡¶£‡ßÄ</option>
                            <option value="Class 8" ${file.class === 'Class 8' ? 'selected' : ''}>Class 8 - ‡¶Ö‡¶∑‡ßç‡¶ü‡¶Æ ‡¶∂‡ßç‡¶∞‡ßá‡¶£‡ßÄ</option>
                            <option value="Class 9" ${file.class === 'Class 9' ? 'selected' : ''}>Class 9 - ‡¶®‡¶¨‡¶Æ ‡¶∂‡ßç‡¶∞‡ßá‡¶£‡ßÄ</option>
                            <option value="Class 10" ${file.class === 'Class 10' ? 'selected' : ''}>Class 10 - ‡¶¶‡¶∂‡¶Æ ‡¶∂‡ßç‡¶∞‡ßá‡¶£‡ßÄ</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>‡¶¨‡¶ø‡¶∑‡ßü:</label>
                        <select id="editFileSubject">
                            <option value="math" ${file.subject === 'math' ? 'selected' : ''}>‡¶ó‡¶£‡¶ø‡¶§</option>
                            <option value="english" ${file.subject === 'english' ? 'selected' : ''}>‡¶á‡¶Ç‡¶∞‡ßá‡¶ú‡¶ø</option>
                            <option value="science" ${file.subject === 'science' ? 'selected' : ''}>‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶®</option>
                            <option value="ict" ${file.subject === 'ict' ? 'selected' : ''}>ICT</option>
                            <option value="agriculture" ${file.subject === 'agriculture' ? 'selected' : ''}>‡¶ï‡ßÉ‡¶∑‡¶ø</option>
                            <option value="bangla" ${file.subject === 'bangla' ? 'selected' : ''}>‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>‡¶ü‡ßç‡¶Ø‡¶æ‡¶ó‡¶∏ (‡¶ï‡¶Æ‡¶æ ‡¶¶‡¶ø‡ßü‡ßá ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®):</label>
                    <input type="text" id="editFileTags" value="${file.tags ? file.tags.join(', ') : ''}" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶¨‡¶á, ‡¶ó‡¶æ‡¶á‡¶°, ‡¶®‡ßã‡¶ü">
                </div>
                
                <div style="margin-top: 20px;">
                    <button onclick="updateFile('${key}')" class="btn btn-success" style="margin-right: 10px;">
                        üíæ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
                    </button>
                    <button onclick="closeFileEditor()" class="btn" style="background: #95a5a6; color: white;">
                        ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®
                    </button>
                </div>
            `;
            
            content.innerHTML = contentHTML;
            modal.style.display = 'flex';
        }
        
        // ‚úÖ Update File Information
        function updateFile(key) {
            const fileName = document.getElementById('editFileName').value.trim();
            const fileDescription = document.getElementById('editFileDescription').value.trim();
            const fileClass = document.getElementById('editFileClass').value;
            const fileSubject = document.getElementById('editFileSubject').value;
            const fileTags = document.getElementById('editFileTags').value;
            
            if (!fileName || !fileClass || !fileSubject) {
                showStatus("‡¶´‡¶æ‡¶á‡¶≤‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ, ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏ ‡¶è‡¶¨‡¶Ç ‡¶¨‡¶ø‡¶∑‡ßü ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®", "error");
                return;
            }
            
            const updatedData = {
                fileName: fileName,
                description: fileDescription,
                class: fileClass,
                subject: fileSubject,
                tags: fileTags.split(',').map(tag => tag.trim()).filter(tag => tag),
                lastUpdated: new Date().toLocaleString('bn-BD')
            };
            
            db.ref('files/' + key).update(updatedData)
                .then(() => {
                    showStatus("‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶∏‡¶´‡¶≤!", "success");
                    closeFileEditor();
                    loadFiles();
                })
                .catch((error) => {
                    showStatus("‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•: " + error.message, "error");
                });
        }
        
        // ‚úÖ Delete File
        function deleteFile(key) {
            const file = currentFiles.find(f => f.key === key);
            if (!file) return;
            
            if (!confirm(`‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ "${file.fileName}" ‡¶´‡¶æ‡¶á‡¶≤‡¶ü‡¶ø ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®?`)) {
                return;
            }
            
            // Delete from storage
            const storageRef = storage.ref(file.storagePath);
            storageRef.delete().then(() => {
                // Delete from database
                db.ref('files/' + key).remove()
                    .then(() => {
                        showStatus("‡¶´‡¶æ‡¶á‡¶≤ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶π‡ßü‡ßá‡¶õ‡ßá", "success");
                        loadFiles();
                    })
                    .catch((error) => {
                        showStatus("‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•: " + error.message, "error");
                    });
            }).catch((error) => {
                showStatus("‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡ßá‡¶ú ‡¶•‡ßá‡¶ï‡ßá ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•: " + error.message, "error");
            });
        }
        
        // ‚úÖ Filter Files
        function filterFiles() {
            const typeFilter = document.getElementById('fileTypeFilter').value;
            const searchFilter = document.getElementById('fileSearch').value.toLowerCase();
            
            const filesDisplay = document.getElementById('filesDisplay');
            let html = `
                <table>
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>‡¶´‡¶æ‡¶á‡¶≤ ‡¶®‡¶æ‡¶Æ</th>
                            <th>‡¶ï‡ßç‡¶≤‡¶æ‡¶∏</th>
                            <th>‡¶¨‡¶ø‡¶∑‡ßü</th>
                            <th>‡¶ü‡¶æ‡¶á‡¶™</th>
                            <th>‡¶∏‡¶æ‡¶á‡¶ú</th>
                            <th>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</th>
                            <th>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶®</th>
                        </tr>
                    </thead>
                    <tbody>`;
            
            let index = 1;
            let totalSize = 0;
            let pdfCount = 0;
            let imageCount = 0;
            
            currentFiles.forEach(file => {
                if (typeFilter && file.type !== typeFilter) return;
                if (searchFilter && !file.fileName.toLowerCase().includes(searchFilter) && 
                    !file.originalName.toLowerCase().includes(searchFilter) &&
                    !(file.description && file.description.toLowerCase().includes(searchFilter))) {
                    return;
                }
                
                totalSize += file.size || 0;
                if (file.type === 'pdf') pdfCount++;
                if (file.type === 'image') imageCount++;
                
                const fileTypeClass = getFileTypeClass(file.type);
                const fileTypeBadge = getFileTypeBadge(file.type);
                
                html += `
                    <tr>
                        <td>${index}</td>
                        <td>
                            <strong>${file.fileName}</strong>
                            ${fileTypeBadge}
                            <div style="font-size: 12px; color: #666;">${file.originalName}</div>
                        </td>
                        <td>${file.class}</td>
                        <td>${getSubjectName(file.subject)}</td>
                        <td><span class="material-type ${fileTypeClass}">${file.type}</span></td>
                        <td>${formatFileSize(file.size)}</td>
                        <td>${file.uploadDate}</td>
                        <td>
                            <div class="action-buttons">
                                <button onclick="viewFile('${file.key}')" class="view-btn">üëÅÔ∏è</button>
                                <button onclick="downloadFile('${file.key}')" class="download-btn">üì•</button>
                                <button onclick="editFile('${file.key}')" class="edit-btn">‚úèÔ∏è</button>
                                <button onclick="deleteFile('${file.key}')" class="delete-btn">üóëÔ∏è</button>
                            </div>
                        </td>
                    </tr>`;
                index++;
            });
            
            html += `</tbody></table>`;
            filesDisplay.innerHTML = html || "<p style='text-align: center; padding: 40px; color: #666;'>‡¶ï‡ßã‡¶®‡ßã ‡¶´‡¶æ‡¶á‡¶≤ ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø</p>";
            
            document.getElementById('fileCount').textContent = (index-1) + '‡¶ü‡¶ø ‡¶´‡¶æ‡¶á‡¶≤';
            document.getElementById('storageUsed').textContent = formatFileSize(totalSize) + ' ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡ßÉ‡¶§';
        }
        
        // ‚úÖ Refresh Files
        function refreshFiles() {
            loadFiles();
            showStatus("‡¶´‡¶æ‡¶á‡¶≤ ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü ‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá", "info");
        }
        
        // ‚úÖ Close Modals
        function closeFileViewer() {
            document.getElementById('fileViewModal').style.display = 'none';
        }
        
        function closeFileEditor() {
            document.getElementById('fileEditModal').style.display = 'none';
            selectedFile = null;
        }
        
        // ‚úÖ PWA Functions (keep existing PWA functions)
        function checkAppInstalled() {
            const isStandalone = window.matchMedia('(display-mode: standalone)').matches;
            isAppInstalled = isStandalone || window.navigator.standalone;
            
            if (isAppInstalled) {
                document.querySelector('.app-installed-badge').style.display = 'block';
                document.getElementById('appStatus').textContent = 'üì± ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™';
            } else {
                document.querySelector('.app-installed-badge').style.display = 'none';
                document.getElementById('appStatus').textContent = 'üåê ‡¶ì‡ßü‡ßá‡¶¨';
            }
            
            return isAppInstalled;
        }
        
        // ‚úÖ Before Install Prompt
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
        });
        
        // ‚úÖ Install App
        function installApp() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choiceResult) => {
                    if (choiceResult.outcome === 'accepted') {
                        showStatus("‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶á‡¶®‡¶∏‡ßç‡¶ü‡¶≤ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...", "success");
                    }
                    deferredPrompt = null;
                });
            }
        }
        
        // ‚úÖ Existing Functions (keep all existing functions)
        function showStatus(message, type) {
            const statusDiv = document.getElementById('statusMessage');
            statusDiv.textContent = message;
            statusDiv.className = `status-message status-${type}`;
            statusDiv.style.display = 'block';
            
            setTimeout(() => {
                statusDiv.style.display = 'none';
            }, 3000);
        }
        
        function addData() {
            // Keep existing addData function
            if (!db || !currentUser) {
                showStatus("‡¶∏‡¶Ç‡¶Ø‡ßã‡¶ó ‡¶®‡ßá‡¶á ‡¶¨‡¶æ ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®", "error");
                return;
            }

            const cls = document.getElementById('classSelect').value;
            const subject = document.getElementById('subjectSelect').value;
            const type = document.getElementById('typeSelect').value;
            const title = document.getElementById('title').value.trim();
            const description = document.getElementById('description').value.trim();
            const link = document.getElementById('link').value.trim();
            const linkType = document.getElementById('linkType').value;

            if (!cls || !subject || !type || !title) {
                showStatus("‡¶ï‡ßç‡¶≤‡¶æ‡¶∏, ‡¶¨‡¶ø‡¶∑‡ßü, ‡¶ü‡¶æ‡¶á‡¶™ ‡¶è‡¶¨‡¶Ç ‡¶∂‡¶ø‡¶∞‡ßã‡¶®‡¶æ‡¶Æ ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®", "error");
                return;
            }

            let formattedLink = link;
            if (link && !link.startsWith('http')) {
                formattedLink = 'https://' + link;
            }

            const timestamp = Date.now();
            const newRef = db.ref('materials').push();
            
            const data = {
                class: cls,
                subject: subject,
                type: type,
                title: title,
                description: description,
                link: formattedLink || null,
                linkType: linkType,
                timestamp: timestamp,
                date: new Date().toLocaleString('bn-BD'),
                addedBy: currentUser.email
            };
            
            newRef.set(data)
                .then(() => {
                    showStatus("‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!", "success");
                    document.getElementById('title').value = "";
                    document.getElementById('description').value = "";
                    document.getElementById('link').value = "";
                    loadData();
                })
                .catch((error) => {
                    showStatus("‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•: " + error.message, "error");
                });
        }
        
        function loadData() {
            // Keep existing loadData function
            if (!db) return;

            db.ref('materials').on('value', (snapshot) => {
                const display = document.getElementById('dataDisplay');
                const loading = document.getElementById('loading');
                
                if (loading) loading.style.display = "none";
                
                if (!snapshot.exists()) {
                    display.innerHTML = "<p style='text-align: center; padding: 40px; color: #666;'>‡¶ï‡ßã‡¶®‡ßã ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø</p>";
                    updateCounts(0, 0);
                    return;
                }

                currentData = [];
                let html = `
                    <table>
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>‡¶∂‡¶ø‡¶∞‡ßã‡¶®‡¶æ‡¶Æ</th>
                                <th>‡¶ï‡ßç‡¶≤‡¶æ‡¶∏</th>
                                <th>‡¶¨‡¶ø‡¶∑‡ßü</th>
                                <th>‡¶ü‡¶æ‡¶á‡¶™</th>
                                <th>‡¶≤‡¶ø‡¶ô‡ßç‡¶ï</th>
                                <th>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</th>
                                <th>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶®</th>
                            </tr>
                        </thead>
                        <tbody>`;

                let index = 1;
                let linkCount = 0;
                
                snapshot.forEach((child) => {
                    const val = child.val();
                    const key = child.key;
                    
                    currentData.push({key, ...val});
                    
                    if (val.link) linkCount++;
                    
                    const subjectName = getSubjectName(val.subject || '');
                    const typeClass = getTypeClass(val.type || '');
                    
                    html += `
                        <tr>
                            <td>${index}</td>
                            <td><strong>${val.title || 'N/A'}</strong></td>
                            <td>${val.class || 'N/A'}</td>
                            <td>${subjectName}</td>
                            <td><span class="material-type ${typeClass}">${val.type || 'N/A'}</span></td>
                            <td>${val.link ? '‚úÖ ‡¶Ü‡¶õ‡ßá' : '‚ùå ‡¶®‡ßá‡¶á'}</td>
                            <td>${val.date || new Date(val.timestamp).toLocaleDateString('bn-BD')}</td>
                            <td>
                                <div class="action-buttons">
                                    <button onclick="viewData('${key}')" class="view-btn">üëÅÔ∏è</button>
                                    <button onclick="editData('${key}')" class="edit-btn">‚úèÔ∏è</button>
                                    <button onclick="deleteData('${key}')" class="delete-btn">üóëÔ∏è</button>
                                </div>
                            </td>
                        </tr>`;
                    index++;
                });

                html += `</tbody></table>`;
                display.innerHTML = html;
                updateCounts(index-1, linkCount);
            });
        }
        
        function getSubjectName(subjectCode) {
            const subjects = {
                'math': '‡¶ó‡¶£‡¶ø‡¶§',
                'english': '‡¶á‡¶Ç‡¶∞‡ßá‡¶ú‡¶ø',
                'science': '‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶®',
                'ict': 'ICT',
                'agriculture': '‡¶ï‡ßÉ‡¶∑‡¶ø'
            };
            return subjects[subjectCode] || subjectCode;
        }
        
        function getTypeClass(type) {
            const types = {
                '‡¶¨‡¶á': 'book',
                '‡¶ó‡¶æ‡¶á‡¶°': 'guide',
                '‡¶®‡ßã‡¶ü': 'note',
                '‡¶≠‡¶ø‡¶°‡¶ø‡¶ì': 'video',
                '‡¶™‡¶ø‡¶°‡¶ø‡¶è‡¶´': 'pdf',
                '‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®': 'question',
                '‡¶õ‡¶¨‡¶ø': 'image',
                'MCQ': 'question'
            };
            return types[type] || 'book';
        }
        
        function updateCounts(total, links) {
            document.getElementById('totalCount').textContent = total;
            document.getElementById('linkCount').textContent = links;
        }
        
        function viewData(key) {
            const item = currentData.find(d => d.key === key);
            if (!item) return;
            
            alert(`‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®: ${item.title}\n\n‡¶ï‡ßç‡¶≤‡¶æ‡¶∏: ${item.class}\n‡¶¨‡¶ø‡¶∑‡ßü: ${getSubjectName(item.subject)}\n‡¶ü‡¶æ‡¶á‡¶™: ${item.type}\n\n${item.description || '‡¶ï‡ßã‡¶®‡ßã ‡¶¨‡¶∞‡ßç‡¶£‡¶®‡¶æ ‡¶®‡ßá‡¶á'}`);
        }
        
        function editData(key) {
            const item = currentData.find(d => d.key === key);
            if (!item) return;
            
            document.getElementById('classSelect').value = item.class;
            document.getElementById('subjectSelect').value = item.subject;
            document.getElementById('typeSelect').value = item.type;
            document.getElementById('title').value = item.title;
            document.getElementById('description').value = item.description || '';
            document.getElementById('link').value = item.link || '';
            document.getElementById('linkType').value = item.linkType || 'other';
            
            const submitBtn = document.getElementById('submitBtn');
            submitBtn.innerHTML = '‚úèÔ∏è ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®';
            submitBtn.onclick = () => updateData(key);
            
            showStatus(`"${item.title}" ‡¶è‡¶°‡¶ø‡¶ü ‡¶Æ‡ßã‡¶°‡ßá`, "warning");
        }
        
        function updateData(key) {
            if (!db) return;

            const cls = document.getElementById('classSelect').value;
            const subject = document.getElementById('subjectSelect').value;
            const type = document.getElementById('typeSelect').value;
            const title = document.getElementById('title').value.trim();
            const description = document.getElementById('description').value.trim();
            const link = document.getElementById('link').value.trim();
            const linkType = document.getElementById('linkType').value;

            if (!cls || !subject || !type || !title) {
                showStatus("‡¶∏‡¶¨ ‡¶´‡¶ø‡¶≤‡ßç‡¶° ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®", "error");
                return;
            }

            let formattedLink = link;
            if (link && !link.startsWith('http')) {
                formattedLink = 'https://' + link;
            }

            const updatedData = {
                class: cls,
                subject: subject,
                type: type,
                title: title,
                description: description,
                link: formattedLink || null,
                linkType: linkType
            };
            
            db.ref('materials/' + key).update(updatedData)
                .then(() => {
                    showStatus("‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶∏‡¶´‡¶≤!", "success");
                    
                    document.getElementById('title').value = "";
                    document.getElementById('description').value = "";
                    document.getElementById('link').value = "";
                    
                    const submitBtn = document.getElementById('submitBtn');
                    submitBtn.innerHTML = 'üíæ ‡¶°‡ßá‡¶ü‡¶æ ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®';
                    submitBtn.onclick = addData;
                    
                    loadData();
                })
                .catch((error) => {
                    showStatus("‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•", "error");
                });
        }
        
        function deleteData(key) {
            if (!confirm("‡¶è‡¶á ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®?")) return;
            
            if (!db) return;
            
            db.ref('materials/' + key).remove()
                .then(() => {
                    showStatus("‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶∏‡¶´‡¶≤", "success");
                    loadData();
                })
                .catch((error) => {
                    showStatus("‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•", "error");
                });
        }
        
        function filterData() {
            const classFilter = document.getElementById('filterClass').value;
            const subjectFilter = document.getElementById('filterSubject').value;
            const searchFilter = document.getElementById('searchInput').value.toLowerCase();
            
            const display = document.getElementById('dataDisplay');
            let html = `
                <table>
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>‡¶∂‡¶ø‡¶∞‡ßã‡¶®‡¶æ‡¶Æ</th>
                            <th>‡¶ï‡ßç‡¶≤‡¶æ‡¶∏</th>
                            <th>‡¶¨‡¶ø‡¶∑‡ßü</th>
                            <th>‡¶ü‡¶æ‡¶á‡¶™</th>
                            <th>‡¶≤‡¶ø‡¶ô‡ßç‡¶ï</th>
                            <th>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</th>
                            <th>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶®</th>
                        </tr>
                    </thead>
                    <tbody>`;
            
            let index = 1;
            let linkCount = 0;
            
            currentData.forEach(item => {
                if (classFilter && item.class !== classFilter) return;
                if (subjectFilter && item.subject !== subjectFilter) return;
                if (searchFilter && !item.title.toLowerCase().includes(searchFilter)) return;
                
                if (item.link) linkCount++;
                
                html += `
                    <tr>
                        <td>${index}</td>
                        <td><strong>${item.title}</strong></td>
                        <td>${item.class}</td>
                        <td>${getSubjectName(item.subject)}</td>
                        <td><span class="material-type ${getTypeClass(item.type)}">${item.type}</span></td>
                        <td>${item.link ? '‚úÖ ‡¶Ü‡¶õ‡ßá' : '‚ùå ‡¶®‡ßá‡¶á'}</td>
                        <td>${item.date || new Date(item.timestamp).toLocaleDateString('bn-BD')}</td>
                        <td>
                            <div class="action-buttons">
                                <button onclick="viewData('${item.key}')" class="view-btn">üëÅÔ∏è</button>
                                <button onclick="editData('${item.key}')" class="edit-btn">‚úèÔ∏è</button>
                                <button onclick="deleteData('${item.key}')" class="delete-btn">üóëÔ∏è</button>
                            </div>
                        </td>
                    </tr>`;
                index++;
            });
            
            html += `</tbody></table>`;
            display.innerHTML = html || "<p style='text-align: center; padding: 40px; color: #666;'>‡¶ï‡ßã‡¶®‡ßã ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø</p>";
            updateCounts(index-1, linkCount);
        }

        // ‚úÖ Initialize on Load
        document.addEventListener('DOMContentLoaded', function() {
            initializeFirebase();
            
            // Drag and drop for file upload
            const dropArea = document.getElementById('dropArea');
            
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                dropArea.addEventListener(eventName, preventDefaults, false);
            });
            
            function preventDefaults(e) {
                e.preventDefault();
                e.stopPropagation();
            }
            
            ['dragenter', 'dragover'].forEach(eventName => {
                dropArea.addEventListener(eventName, highlight, false);
            });
            
            ['dragleave', 'drop'].forEach(eventName => {
                dropArea.addEventListener(eventName, unhighlight, false);
            });
            
            function highlight() {
                dropArea.classList.add('dragover');
            }
            
            function unhighlight() {
                dropArea.classList.remove('dragover');
            }
            
            dropArea.addEventListener('drop', handleDrop, false);
            
            function handleDrop(e) {
                const dt = e.dataTransfer;
                const files = dt.files;
                
                selectedFiles = Array.from(files);
                displayFilePreview();
            }
            
            // Check app installed
            checkAppInstalled();
            
            // Check network status
            if (!navigator.onLine) {
                document.getElementById('statusIcon').textContent = 'üî¥';
                document.getElementById('statusText').textContent = '‡¶Ö‡¶´‡¶≤‡¶æ‡¶á‡¶®';
                document.getElementById('connectionStatus').classList.add('status-offline');
            }
        });
    </script>
</body>
</html>
