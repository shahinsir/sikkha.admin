<!DOCTYPE html>
<html lang="bn">
<head>
  <base href="./">
     
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#2c3e50">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ ‡¶è‡¶°‡¶Æ‡¶ø‡¶®">
    <meta name="description" content="‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ ‡¶∏‡¶π‡¶æ‡¶Ø‡¶º‡¶ø‡¶ï‡¶æ ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ - ‡¶™‡ßÇ‡¶∞‡ßç‡¶£‡¶æ‡¶ô‡ßç‡¶ó ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™">
    <meta name="keywords" content="‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ, ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü, ‡¶è‡¶°‡¶Æ‡¶ø‡¶®, ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂, ‡¶¨‡¶á, ‡¶ó‡¶æ‡¶á‡¶°, PWA">
    <title>‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ ‡¶∏‡¶π‡¶æ‡¶Ø‡¶º‡¶ø‡¶ï‡¶æ ‡¶è‡¶°‡¶Æ‡¶ø‡¶®</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="https://i.ibb.co/XGNQ8V4/icon-180x180.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://i.ibb.co/XGNQ8V4/icon-180x180.png">
    <link rel="apple-touch-icon" sizes="167x167" href="https://i.ibb.co/XGNQ8V4/icon-180x180.png">
    <link rel="apple-touch-icon" sizes="152x152" href="https://i.ibb.co/XGNQ8V4/icon-180x180.png">
    <link rel="apple-touch-icon" sizes="120x120" href="https://i.ibb.co/XGNQ8V4/icon-180x180.png">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://i.ibb.co/wFnz89n6/icon-192x192.png">
    
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-storage-compat.js"></script>
    
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --success-color: #27ae60;
            --danger-color: #e74c3c;
            --warning-color: #f39c12;
            --accent-color: #9b59b6;
            --dark-color: #1a252f;
            --light-color: #ecf0f1;
            --gradient-primary: linear-gradient(135deg, #2c3e50, #34495e);
            --gradient-success: linear-gradient(135deg, #27ae60, #219653);
            --gradient-danger: linear-gradient(135deg, #e74c3c, #c0392b);
            --gradient-accent: linear-gradient(135deg, #9b59b6, #8e44ad);
            --shadow-light: 0 8px 25px rgba(0, 0, 0, 0.08);
            --shadow-medium: 0 10px 30px rgba(0, 0, 0, 0.12);
            --shadow-heavy: 0 15px 35px rgba(0, 0, 0, 0.2);
            --border-radius: 16px;
            --card-radius: 14px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: white;
            min-height: 100vh;
            -webkit-tap-highlight-color: transparent;
            line-height: 1.6;
        }
        
        /* Login Modal */
        #loginModal {
            display: flex;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            z-index: 9999;
            justify-content: center;
            align-items: center;
            padding: 20px;
            backdrop-filter: blur(10px);
        }
        
        .login-container {
            background: rgba(255, 255, 255, 0.95);
            padding: 50px 40px;
            border-radius: var(--border-radius);
            max-width: 450px;
            width: 100%;
            text-align: center;
            box-shadow: var(--shadow-heavy);
            animation: slideUp 0.5s ease;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        @keyframes slideUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .login-container h2 {
            color: var(--primary-color);
            margin-bottom: 25px;
            font-size: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .login-form-group {
            margin-bottom: 25px;
            text-align: left;
        }
        
        .login-form-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--primary-color);
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .login-form-group input {
            width: 100%;
            padding: 16px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-size: 16px;
            transition: var(--transition);
            background: white;
        }
        
        .login-form-group input:focus {
            border-color: var(--secondary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }
        
        #loginError {
            background: linear-gradient(135deg, rgba(231, 76, 60, 0.1), rgba(192, 57, 43, 0.1));
            color: var(--danger-color);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: none;
            border: 1px solid rgba(231, 76, 60, 0.3);
            text-align: left;
        }
        
        .login-btn {
            background: var(--gradient-primary);
            color: white;
            border: none;
            width: 100%;
            padding: 18px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            margin-top: 15px;
            transition: var(--transition);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .login-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }
        
        .login-footer {
            margin-top: 30px;
            color: #666;
            font-size: 14px;
            line-height: 1.5;
            border-top: 1px solid #eee;
            padding-top: 20px;
        }
        
        /* Main App Styles */
        .admin-container {
            max-width: 1400px;
            margin: 20px auto;
            background: white;
            color: #333;
            padding: 30px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-heavy);
            display: none;
            min-height: 90vh;
        }
        
        .app-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid var(--primary-color);
        }
        
        .header-left h1 {
            color: var(--primary-color);
            font-size: 28px;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .header-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .user-info {
            background: var(--light-color);
            padding: 12px 20px;
            border-radius: 25px;
            color: var(--primary-color);
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            border: 2px solid #e0e0e0;
        }
        
        .logout-btn {
            background: var(--gradient-danger);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 12px rgba(231, 76, 60, 0.2);
        }
        
        .logout-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(231, 76, 60, 0.3);
        }
        
        .connection-status {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: var(--gradient-success);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(39, 174, 96, 0.2);
            border: 2px solid white;
        }
        
        .status-offline {
            background: var(--gradient-danger);
        }
        
        .pwa-status-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: var(--gradient-primary);
            color: white;
            padding: 12px 20px;
            font-size: 14px;
            text-align: center;
            z-index: 9998;
            display: none;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-weight: 600;
        }
        
        .app-installed-badge {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--gradient-success);
            color: white;
            padding: 8px 16px;
            border-radius: 25px;
            font-size: 13px;
            z-index: 9997;
            display: none;
            animation: pulse 2s infinite;
            box-shadow: 0 4px 12px rgba(39, 174, 96, 0.3);
            border: 2px solid white;
            font-weight: 600;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(39, 174, 96, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(39, 174, 96, 0); }
            100% { box-shadow: 0 0 0 0 rgba(39, 174, 96, 0); }
        }
        
        .form-section {
            background: #f8f9fa;
            padding: 30px;
            border-radius: var(--card-radius);
            margin-bottom: 30px;
            border: 1px solid #e9ecef;
            box-shadow: var(--shadow-light);
        }
        
        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }
        
        @media (max-width: 768px) {
            .two-column {
                grid-template-columns: 1fr;
            }
            .admin-container {
                padding: 20px;
                margin: 10px;
            }
        }
        
        .btn {
            background: var(--gradient-primary);
            color: white;
            border: none;
            padding: 16px 30px;
            cursor: pointer;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            transition: var(--transition);
            width: 100%;
            margin-top: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }
        
        .btn-success {
            background: var(--gradient-success);
        }
        
        .btn-warning {
            background: var(--gradient-accent);
        }
        
        .btn-install {
            background: var(--gradient-accent);
            margin-top: 20px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            margin-top: 20px;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--shadow-light);
        }
        
        th {
            background: var(--primary-color);
            color: white;
            padding: 18px;
            text-align: left;
            font-weight: 600;
        }
        
        td {
            padding: 18px;
            border-bottom: 1px solid #eee;
        }
        
        tr:hover {
            background-color: #f8f9fa;
        }
        
        .material-type {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            border: 1px solid transparent;
        }
        
        .material-type.book { background: #e3f2fd; color: #1976d2; border-color: #bbdefb; }
        .material-type.guide { background: #e8f5e9; color: #388e3c; border-color: #c8e6c9; }
        .material-type.note { background: #fff3e0; color: #f57c00; border-color: #ffe0b2; }
        .material-type.video { background: #f3e5f5; color: #7b1fa2; border-color: #e1bee7; }
        .material-type.image { background: #e0f7fa; color: #0097a7; border-color: #b2ebf2; }
        .material-type.pdf { background: #ffebee; color: #d32f2f; border-color: #ffcdd2; }
        .material-type.question { background: #fce4ec; color: #c2185b; border-color: #f8bbd9; }
        .material-type.mcq { background: #f3e5f5; color: #7b1fa2; border-color: #e1bee7; }
        
        .action-buttons {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .view-btn, .edit-btn, .delete-btn, .download-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 6px;
            min-width: 80px;
            justify-content: center;
        }
        
        .view-btn { background: var(--gradient-success); color: white; box-shadow: 0 2px 8px rgba(39, 174, 96, 0.2); }
        .edit-btn { background: var(--gradient-accent); color: white; box-shadow: 0 2px 8px rgba(155, 89, 182, 0.2); }
        .delete-btn { background: var(--gradient-danger); color: white; box-shadow: 0 2px 8px rgba(231, 76, 60, 0.2); }
        .download-btn { background: var(--gradient-primary); color: white; box-shadow: 0 2px 8px rgba(52, 152, 219, 0.2); }
        
        .view-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(39, 174, 96, 0.3); }
        .edit-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(155, 89, 182, 0.3); }
        .delete-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(231, 76, 60, 0.3); }
        .download-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(52, 152, 219, 0.3); }
        
        /* PWA Install Prompt */
        #installPrompt {
            display: none;
            position: fixed;
            bottom: 25px;
            right: 25px;
            background: white;
            padding: 25px;
            border-radius: var(--card-radius);
            box-shadow: var(--shadow-heavy);
            z-index: 9999;
            max-width: 350px;
            animation: slideInRight 0.4s ease;
            border: 3px solid var(--primary-color);
        }
        
        @keyframes slideInRight {
            from {
                transform: translateX(100px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        #installPrompt h4 {
            color: var(--primary-color);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 18px;
        }
        
        .prompt-buttons {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }
        
        .prompt-buttons button {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
            font-size: 15px;
        }
        
        .install-prompt-btn {
            background: var(--gradient-success);
            color: white;
        }
        
        .install-prompt-btn:hover {
            background: linear-gradient(135deg, #219653, #1e8449);
        }
        
        .later-btn {
            background: #95a5a6;
            color: white;
        }
        
        .later-btn:hover {
            background: #7f8c8d;
        }
        
        /* iOS Install Instructions */
        #iosInstallModal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 10000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            backdrop-filter: blur(5px);
        }
        
        .ios-modal-content {
            background: white;
            padding: 30px;
            border-radius: var(--border-radius);
            max-width: 500px;
            width: 100%;
            animation: popIn 0.3s ease;
            box-shadow: var(--shadow-heavy);
        }
        
        @keyframes popIn {
            from {
                transform: scale(0.9);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        /* Android Install Instructions */
        #androidInstallModal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 10001;
            justify-content: center;
            align-items: center;
            padding: 20px;
            backdrop-filter: blur(5px);
        }
        
        .android-modal-content {
            background: white;
            padding: 30px;
            border-radius: var(--border-radius);
            max-width: 500px;
            width: 100%;
            animation: popIn 0.3s ease;
            box-shadow: var(--shadow-heavy);
        }
        
        /* Custom Install Button Styles */
        .install-button-container {
            text-align: center;
            margin: 30px 0;
            padding: 25px;
            background: linear-gradient(135deg, #f5f7fa, #c3cfe2);
            border-radius: var(--card-radius);
            border: 2px dashed var(--secondary-color);
        }
        
        .install-button-container h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 22px;
        }
        
        .install-features {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 25px 0;
        }
        
        .install-feature {
            background: white;
            padding: 15px;
            border-radius: 10px;
            font-size: 14px;
            text-align: center;
            border: 1px solid #e0e0e0;
            transition: var(--transition);
        }
        
        .install-feature:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-light);
        }
        
        .install-feature span {
            display: block;
            font-size: 24px;
            margin-bottom: 8px;
        }
        
        /* Touch Optimizations */
        @media (hover: none) and (pointer: coarse) {
            .btn, .view-btn, .edit-btn, .delete-btn, .logout-btn {
                min-height: 50px;
                min-width: 50px;
            }
            
            input, select, textarea, button {
                font-size: 16px !important;
            }
        }
        
        /* Status Messages */
        .status-message {
            position: fixed;
            top: 25px;
            right: 25px;
            padding: 20px 30px;
            border-radius: 12px;
            color: white;
            z-index: 9996;
            display: none;
            animation: slideDown 0.3s ease;
            box-shadow: var(--shadow-medium);
            max-width: 400px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        @keyframes slideDown {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .status-success {
            background: var(--gradient-success);
        }
        
        .status-error {
            background: var(--gradient-danger);
        }
        
        .status-warning {
            background: linear-gradient(135deg, var(--warning-color), #d68910);
        }
        
        .status-info {
            background: var(--gradient-primary);
        }
        
        /* Form Elements */
        .form-group {
            margin-bottom: 25px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--primary-color);
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .form-group select, .form-group input, .form-group textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            transition: var(--transition);
            background: white;
        }
        
        .form-group select:focus, .form-group input:focus, .form-group textarea:focus {
            border-color: var(--secondary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }
        
        .form-group textarea {
            resize: vertical;
            min-height: 120px;
        }
        
        /* File Upload Styles */
        .file-upload-container {
            background: #f8f9fa;
            border: 3px dashed #3498db;
            border-radius: 15px;
            padding: 40px 20px;
            text-align: center;
            margin: 20px 0;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .file-upload-container:hover {
            background: #e8f4fc;
            border-color: #2980b9;
            transform: translateY(-3px);
        }
        
        .file-upload-container.dragover {
            background: #d6eaf8;
            border-color: var(--success-color);
            transform: scale(1.02);
        }
        
        .file-preview {
            max-width: 200px;
            max-height: 200px;
            margin: 10px auto;
            display: block;
            border-radius: 8px;
            box-shadow: var(--shadow-light);
        }
        
        .file-info {
            background: #e8f4fd;
            padding: 15px;
            border-radius: 10px;
            margin-top: 10px;
            font-size: 14px;
            color: var(--primary-color);
            border: 1px solid #bbdefb;
        }
        
        .file-size {
            font-size: 12px;
            color: #7f8c8d;
            margin-top: 5px;
        }
        
        .upload-progress {
            width: 100%;
            height: 12px;
            background: #ecf0f1;
            border-radius: 6px;
            margin: 15px 0;
            overflow: hidden;
            display: none;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #3498db, #2ecc71);
            width: 0%;
            transition: width 0.3s;
            border-radius: 6px;
        }
        
        /* File Management Tabs */
        .tabs {
            display: flex;
            border-bottom: 2px solid #e0e0e0;
            margin-bottom: 30px;
            gap: 2px;
            background: white;
            padding: 10px 10px 0;
            border-radius: 12px;
            box-shadow: var(--shadow-light);
        }
        
        .tab {
            padding: 18px 25px;
            cursor: pointer;
            background: none;
            border: none;
            font-size: 16px;
            font-weight: 600;
            color: #718096;
            border-bottom: 3px solid transparent;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
            border-radius: 8px 8px 0 0;
        }
        
        .tab:hover {
            color: var(--secondary-color);
            background: #f8fafc;
        }
        
        .tab.active {
            color: var(--secondary-color);
            border-bottom-color: var(--secondary-color);
            background: linear-gradient(to bottom, rgba(52, 152, 219, 0.05), transparent);
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.4s ease;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* File Type Badges */
        .file-type-badge {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 11px;
            font-weight: 600;
            margin-right: 8px;
            border: 1px solid transparent;
        }
        
        .file-type-pdf { background: #ffebee; color: #d32f2f; border-color: #ffcdd2; }
        .file-type-image { background: #e8f5e9; color: #388e3c; border-color: #c8e6c9; }
        .file-type-video { background: #f3e5f5; color: #7b1fa2; border-color: #e1bee7; }
        .file-type-doc { background: #e3f2fd; color: #1976d2; border-color: #bbdefb; }
        .file-type-zip { background: #fff3e0; color: #f57c00; border-color: #ffe0b2; }
        .file-type-other { background: #f5f5f5; color: #616161; border-color: #e0e0e0; }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 10002;
            justify-content: center;
            align-items: center;
            padding: 20px;
            backdrop-filter: blur(5px);
        }
        
        .modal-content {
            background: white;
            padding: 40px;
            border-radius: var(--border-radius);
            max-width: 700px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            animation: popIn 0.3s ease;
            box-shadow: var(--shadow-heavy);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid #eee;
        }
        
        .close-modal {
            background: none;
            border: none;
            font-size: 28px;
            cursor: pointer;
            color: #7f8c8d;
            padding: 5px;
            border-radius: 8px;
            transition: var(--transition);
        }
        
        .close-modal:hover {
            background: #f8f9fa;
            color: var(--danger-color);
        }
        
        .file-viewer {
            max-width: 100%;
            max-height: 400px;
            margin: 0 auto;
            display: block;
            border-radius: 10px;
            box-shadow: var(--shadow-light);
        }
        
        .file-viewer.pdf {
            width: 100%;
            height: 500px;
            border: 1px solid #ddd;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .stat-box {
            background: white;
            padding: 25px 15px;
            border-radius: var(--card-radius);
            text-align: center;
            border: 1px solid #e9ecef;
            box-shadow: var(--shadow-light);
            transition: var(--transition);
        }
        
        .stat-box:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-medium);
        }
        
        .stat-number {
            font-size: 32px;
            font-weight: bold;
            color: var(--secondary-color);
            margin-bottom: 10px;
        }
        
        .stat-label {
            font-size: 14px;
            color: #7f8c8d;
            font-weight: 600;
        }
        
        /* Quick Actions */
        .quick-actions {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .quick-action-btn {
            padding: 15px 25px;
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 600;
            color: var(--primary-color);
            transition: var(--transition);
            flex: 1;
            min-width: 200px;
            justify-content: center;
            box-shadow: var(--shadow-light);
        }
        
        .quick-action-btn:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-medium);
            border-color: var(--secondary-color);
            color: var(--secondary-color);
        }
        
        /* Dashboard Cards */
        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }
        
        .dashboard-card {
            background: white;
            padding: 30px;
            border-radius: var(--card-radius);
            border: 1px solid #e9ecef;
            box-shadow: var(--shadow-light);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }
        
        .dashboard-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: var(--gradient-primary);
        }
        
        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-medium);
        }
        
        .card-icon {
            font-size: 48px;
            margin-bottom: 20px;
            display: block;
        }
        
        /* Progress Circle */
        .progress-circle {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: conic-gradient(var(--secondary-color) 0% 75%, #e0e0e0 75% 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px auto;
            position: relative;
        }
        
        .progress-circle::before {
            content: '';
            position: absolute;
            width: 80px;
            height: 80px;
            background: white;
            border-radius: 50%;
        }
        
        .progress-text {
            position: relative;
            z-index: 1;
            font-size: 24px;
            font-weight: bold;
            color: var(--secondary-color);
        }
        
        /* Notification Badge */
        .notification-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--danger-color);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            min-width: 25px;
            text-align: center;
            border: 2px solid white;
        }
        
        /* Search Box */
        .search-box {
            position: relative;
            margin: 20px 0;
        }
        
        .search-input {
            width: 100%;
            padding: 16px 50px 16px 20px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 16px;
            transition: var(--transition);
            background: white;
            box-shadow: var(--shadow-light);
        }
        
        .search-input:focus {
            border-color: var(--secondary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1), var(--shadow-light);
        }
        
        .search-icon {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--secondary-color);
            font-size: 20px;
            cursor: pointer;
        }
        
        /* Alert Box */
        .alert-box {
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            display: flex;
            align-items: center;
            gap: 15px;
            background: #fff8e1;
            border-left: 5px solid var(--warning-color);
        }
        
        .alert-icon {
            font-size: 24px;
        }
        
        /* Dropdown Menu */
        .dropdown {
            position: relative;
            display: inline-block;
        }
        
        .dropdown-content {
            display: none;
            position: absolute;
            background: white;
            min-width: 200px;
            box-shadow: var(--shadow-heavy);
            border-radius: 10px;
            z-index: 1000;
            right: 0;
            top: 100%;
            margin-top: 10px;
            overflow: hidden;
        }
        
        .dropdown:hover .dropdown-content {
            display: block;
        }
        
        .dropdown-item {
            padding: 15px 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: #333;
            text-decoration: none;
            transition: var(--transition);
            border-bottom: 1px solid #eee;
        }
        
        .dropdown-item:hover {
            background: #f8f9fa;
            color: var(--secondary-color);
        }
        
        /* Toggle Switch */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .toggle-slider {
            background-color: var(--secondary-color);
        }
        
        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }
        
        /* Dark Mode Styles */
        body.dark-mode {
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 100%);
            color: #e0e0e0;
        }
        
        body.dark-mode .admin-container {
            background: #1e1e2e;
            color: #e0e0e0;
        }
        
        body.dark-mode .form-section {
            background: #252540;
            border-color: #333;
        }
        
        body.dark-mode table {
            background: #252540;
            color: #e0e0e0;
        }
        
        body.dark-mode th {
            background: #2c3e50;
        }
        
        body.dark-mode td {
            border-color: #444;
        }
        
        body.dark-mode tr:hover {
            background-color: #2d2d4a;
        }
        
        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .tabs {
                flex-direction: column;
                padding: 10px;
            }
            
            .tab {
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 5px;
                border-bottom: none;
                border-left: 3px solid transparent;
            }
            
            .tab.active {
                border-left-color: var(--secondary-color);
                border-bottom: none;
            }
            
            .dashboard-cards {
                grid-template-columns: 1fr;
            }
            
            .quick-actions {
                flex-direction: column;
            }
            
            .quick-action-btn {
                min-width: 100%;
            }
            
            .header-right {
                flex-direction: column;
                gap: 10px;
                align-items: flex-end;
            }
        }
        
        @media (max-width: 480px) {
            .login-container {
                padding: 30px 20px;
            }
            
            .admin-container {
                padding: 15px;
            }
            
            .form-section {
                padding: 20px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr 1fr;
            }
            
            .action-buttons {
                flex-direction: column;
                gap: 5px;
            }
            
            .action-buttons button {
                width: 100%;
            }
        }
        
        /* Loading Animation */
        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--secondary-color);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #718096;
        }
        
        .empty-state-icon {
            font-size: 64px;
            margin-bottom: 20px;
            opacity: 0.3;
        }
        
        /* Success Animation */
        .success-checkmark {
            width: 80px;
            height: 80px;
            margin: 0 auto;
        }
        
        .check-icon {
            width: 80px;
            height: 80px;
            position: relative;
            border-radius: 50%;
            box-sizing: content-box;
            border: 4px solid var(--success-color);
        }
        
        .check-icon::before {
            top: 3px;
            left: -2px;
            width: 30px;
            transform-origin: 100% 50%;
            border-radius: 100px 0 0 100px;
        }
        
        .check-icon::after {
            top: 0;
            left: 30px;
            width: 60px;
            transform-origin: 0 50%;
            border-radius: 0 100px 100px 0;
            animation: rotate-circle 4.25s ease-in;
        }
        
        .check-icon::before, .check-icon::after {
            content: '';
            height: 100px;
            position: absolute;
            background: white;
            transform: rotate(-45deg);
        }
        
        .icon-line {
            height: 5px;
            background-color: var(--success-color);
            display: block;
            border-radius: 2px;
            position: absolute;
            z-index: 10;
        }
        
        .icon-line.line-tip {
            top: 46px;
            left: 14px;
            width: 25px;
            transform: rotate(45deg);
            animation: icon-line-tip 0.75s;
        }
        
        .icon-line.line-long {
            top: 38px;
            right: 8px;
            width: 47px;
            transform: rotate(-45deg);
            animation: icon-line-long 0.75s;
        }
    </style>
</head>
<body>
    <!-- Login Modal -->
    <div id="loginModal">
        <div class="login-container">
            <h2>
                <img src="https://i.ibb.co/wFnz89n6/icon-192x192.png" alt="‡¶Ü‡¶á‡¶ï‡¶®" style="width: 50px; height: 50px; border-radius: 10px;">
                ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ ‡¶∏‡¶π‡¶æ‡¶Ø‡¶º‡¶ø‡¶ï‡¶æ ‡¶è‡¶°‡¶Æ‡¶ø‡¶®
            </h2>
            <p style="color: #666; margin-bottom: 30px; font-size: 15px; line-height: 1.6;">
                ‡¶™‡ßÇ‡¶∞‡ßç‡¶£‡¶æ‡¶ô‡ßç‡¶ó ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ<br>
                ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶Ö‡¶®‡ßÅ‡¶Æ‡ßã‡¶¶‡¶ø‡¶§ ‡¶è‡¶°‡¶Æ‡¶ø‡¶®‡¶¶‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø
            </p>
            
            <div id="loginError"></div>
            
            <div class="login-form-group">
                <label>
                    <span>üìß</span>
                    ‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶è‡¶°‡ßç‡¶∞‡ßá‡¶∏
                </label>
                <input type="email" id="adminEmail" placeholder="admin@example.com" autocomplete="email">
            </div>
            
            <div class="login-form-group">
                <label>
                    <span>üîí</span>
                    ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°
                </label>
                <input type="password" id="adminPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password">
            </div>
            
            <button onclick="loginAdmin()" class="login-btn">
                <span>üîë</span>
                ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®
            </button>
            
            <div class="install-button-container">
                <h3>üì± ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶á‡¶®‡¶∏‡ßç‡¶ü‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
                <p style="color: #666; margin-bottom: 20px;">
                    ‡¶π‡ßã‡¶Æ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡ßá ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡ßá ‡¶™‡ßÇ‡¶∞‡ßç‡¶£‡¶æ‡¶ô‡ßç‡¶ó ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßá‡¶∞ ‡¶Ö‡¶≠‡¶ø‡¶ú‡ßç‡¶û‡¶§‡¶æ ‡¶®‡¶ø‡¶®
                </p>
                <div class="install-features">
                    <div class="install-feature"><span>‚ö°</span> ‡¶¶‡ßç‡¶∞‡ßÅ‡¶§ ‡¶≤‡ßã‡¶°</div>
                    <div class="install-feature"><span>üì∂</span> ‡¶Ö‡¶´‡¶≤‡¶æ‡¶á‡¶® ‡¶è‡¶ï‡ßç‡¶∏‡ßá‡¶∏</div>
                    <div class="install-feature"><span>üìÅ</span> ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú</div>
                    <div class="install-feature"><span>üîî</span> ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶®</div>
                </div>
                <button id="installButtonMain" class="btn btn-install">
                    <span style="font-size: 24px; display: block; margin-bottom: 8px;">üì±</span>
                    <strong>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶á‡¶®‡¶∏‡ßç‡¶ü‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®</strong>
                    <br>
                    <small style="font-size: 12px; opacity: 0.8;">‡¶π‡ßã‡¶Æ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡ßá ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®</small>
                </button>
            </div>
            
            <div class="login-footer">
                <p>üì± PWA ‡¶π‡¶ø‡¶∏‡ßá‡¶¨‡ßá ‡¶á‡¶®‡¶∏‡ßç‡¶ü‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶® - ‡¶ï‡ßã‡¶®‡ßã ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶® ‡¶®‡ßá‡¶á</p>
                <p style="font-size: 13px; color: #888; margin-top: 15px;">‡¶á‡¶®‡¶∏‡ßç‡¶ü‡¶≤ ‡¶ï‡¶∞‡¶§‡ßá ‡¶â‡¶™‡¶∞‡ßá‡¶∞ ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®</p>
            </div>
        </div>
    </div>
    
    <!-- PWA Status Bar -->
    <div id="pwaStatus" class="pwa-status-bar"></div>
    
    <!-- App Installed Badge -->
    <div class="app-installed-badge">üì≤ ‡¶á‡¶®‡¶∏‡ßç‡¶ü‡¶≤ ‡¶ï‡¶∞‡¶æ</div>
    
    <!-- Status Messages -->
    <div id="statusMessage" class="status-message">
        <div id="statusContent"></div>
    </div>
    
    <!-- File View Modal -->
    <div id="fileViewModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="fileViewTitle">‡¶´‡¶æ‡¶á‡¶≤ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</h3>
                <button onclick="closeFileViewer()" class="close-modal">√ó</button>
            </div>
            <div id="fileViewContent">
                <!-- File content will be loaded here -->
            </div>
        </div>
    </div>
    
    <!-- File Edit Modal -->
    <div id="fileEditModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>‡¶´‡¶æ‡¶á‡¶≤ ‡¶è‡¶°‡¶ø‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
                <button onclick="closeFileEditor()" class="close-modal">√ó</button>
            </div>
            <div id="fileEditContent">
                <!-- File edit form will be loaded here -->
            </div>
        </div>
    </div>
    
    <!-- Main App Container -->
    <div class="admin-container" id="adminContainer">
        <div class="app-header">
            <div class="header-left">
                <h1>
                    <img src="https://i.ibb.co/wFnz89n6/icon-192x192.png" alt="‡¶Ü‡¶á‡¶ï‡¶®" style="width: 50px; height: 50px; border-radius: 10px; border: 2px solid var(--secondary-color);">
                    ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ ‡¶∏‡¶π‡¶æ‡¶Ø‡¶º‡¶ø‡¶ï‡¶æ ‡¶è‡¶°‡¶Æ‡¶ø‡¶®
                </h1>
            </div>
            <div class="header-right">
                <div class="user-info">
                    <span>üë§</span>
                    <span id="userEmail">admin@example.com</span>
                </div>
                <div class="dropdown">
                    <button class="logout-btn">
                        <span>‚öôÔ∏è</span>
                        ‡¶Æ‡ßá‡¶®‡ßÅ
                    </button>
                    <div class="dropdown-content">
                        <a href="javascript:void(0)" class="dropdown-item" onclick="showProfile()">
                            <span>üë§</span> ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤
                        </a>
                        <a href="javascript:void(0)" class="dropdown-item" onclick="showSettings()">
                            <span>‚öôÔ∏è</span> ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏
                        </a>
                        <a href="javascript:void(0)" class="dropdown-item" onclick="refreshAllData()">
                            <span>üîÑ</span> ‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂
                        </a>
                        <a href="javascript:void(0)" class="dropdown-item" onclick="logoutAdmin()">
                            <span>üö™</span> ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü
                        </a>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Dashboard Cards -->
        <div class="dashboard-cards">
            <div class="dashboard-card">
                <div class="card-icon">üìö</div>
                <h3 style="color: var(--primary-color); margin-bottom: 10px;">‡¶Æ‡ßã‡¶ü ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü</h3>
                <div class="stat-number" id="totalContentCount">0</div>
                <p style="color: #666; font-size: 14px;">‡¶∏‡¶ï‡¶≤ ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏‡ßá‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶Æ‡¶ø‡¶≤‡¶ø‡¶§</p>
            </div>
            
            <div class="dashboard-card">
                <div class="card-icon">üìÅ</div>
                <h3 style="color: var(--primary-color); margin-bottom: 10px;">‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶´‡¶æ‡¶á‡¶≤</h3>
                <div class="stat-number" id="totalFileCount">0</div>
                <p style="color: #666; font-size: 14px;">‡¶´‡¶æ‡¶á‡¶≤ ‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡ßá‡¶ú</p>
            </div>
            
            <div class="dashboard-card">
                <div class="card-icon">üë•</div>
                <h3 style="color: var(--primary-color); margin-bottom: 10px;">‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡ßü ‡¶á‡¶â‡¶ú‡¶æ‡¶∞</h3>
                <div class="stat-number" id="activeUserCount">0</div>
                <p style="color: #666; font-size: 14px;">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ</p>
            </div>
            
            <div class="dashboard-card">
                <div class="card-icon">üìä</div>
                <h3 style="color: var(--primary-color); margin-bottom: 10px;">‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡ßá‡¶ú ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞</h3>
                <div class="progress-circle">
                    <div class="progress-text" id="storagePercent">0%</div>
                </div>
            </div>
        </div>
        
        <!-- Connection Status -->
        <div style="text-align: center; margin: 25px 0;">
            <span id="connectionStatus" class="connection-status">
                <span id="statusIcon">üü¢</span>
                <span id="statusText">‡¶Ö‡¶®‡¶≤‡¶æ‡¶á‡¶®</span>
            </span>
        </div>
        
        <!-- Quick Actions -->
        <div class="quick-actions">
            <button onclick="switchTab('contentTab')" class="quick-action-btn">
                <span>üìù</span>
                ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú
            </button>
            <button onclick="switchTab('fileTab')" class="quick-action-btn">
                <span>üìÅ</span>
                ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú
            </button>
            <button onclick="switchTab('uploadTab')" class="quick-action-btn">
                <span>üì§</span>
                ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶™‡¶≤‡ßã‡¶°
            </button>
            <button onclick="showAnalytics()" class="quick-action-btn">
                <span>üìä</span>
                ‡¶è‡¶®‡¶æ‡¶≤‡¶ø‡¶ü‡¶ø‡¶ï‡ßç‡¶∏
            </button>
        </div>
        
        <!-- File Management Tabs -->
        <div class="tabs">
            <button class="tab active" onclick="switchTab('contentTab')">
                <span>üìù</span>
                ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü
                <span class="notification-badge" id="contentBadge">0</span>
            </button>
            <button class="tab" onclick="switchTab('fileTab')">
                <span>üìÅ</span>
                ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü
                <span class="notification-badge" id="fileBadge">0</span>
            </button>
            <button class="tab" onclick="switchTab('uploadTab')">
                <span>üì§</span>
                ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶™‡¶≤‡ßã‡¶°
            </button>
        </div>
        
        <!-- Content Tab -->
        <div id="contentTab" class="tab-content active">
            <div class="instruction form-section">
                <h4>üìå ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡ßá‡¶∂‡¶®‡¶æ:</h4>
                <div class="two-column" style="margin-top: 20px;">
                    <div>
                        <p>1. ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏ ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶® (‡ß¨-‡ßß‡ß¶)</p>
                        <p>2. ‡¶¨‡¶ø‡¶∑‡ßü ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                        <p>3. ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶ü‡¶æ‡¶á‡¶™ ‡¶è‡¶¨‡¶Ç ‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤ ‡¶¶‡¶ø‡¶®</p>
                        <p>4. ‡¶ó‡ßÅ‡¶ó‡¶≤ ‡¶°‡ßç‡¶∞‡¶æ‡¶á‡¶≠ ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                    </div>
                    <div>
                        <p>5. ‡¶¨‡¶∞‡ßç‡¶£‡¶®‡¶æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶® (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)</p>
                        <p>6. ‡¶∏‡ßá‡¶≠ ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                        <p>7. ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßá ‡¶∏‡ßç‡¶¨‡ßü‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡ßü‡¶≠‡¶æ‡¶¨‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá</p>
                        <p>8. ‡¶è‡¶°‡¶ø‡¶ü/‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶ü‡ßá‡¶¨‡¶ø‡¶≤‡ßá‡¶∞ ‡¶¨‡¶æ‡¶ü‡¶® ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                    </div>
                </div>
            </div>
            
            <!-- Alert Box -->
            <div class="alert-box">
                <div class="alert-icon">‚ö†Ô∏è</div>
                <div>
                    <strong>‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡ßç‡¶¨‡¶™‡ßÇ‡¶∞‡ßç‡¶£:</strong> ‡¶´‡¶æ‡¶Ø‡¶º‡¶æ‡¶∞‡¶¨‡ßá‡¶∏ ‡¶°‡¶æ‡¶ü‡¶æ‡¶¨‡ßá‡¶ú ‡¶∞‡ßÅ‡¶≤‡¶∏ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§ ‡¶è‡¶ñ‡¶® ‡¶ï‡ßã‡¶®‡ßã Permission denied ‡¶è‡¶∞‡¶∞ ‡¶Ü‡¶∏‡¶¨‡ßá ‡¶®‡¶æ‡•§ ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡ßç‡¶¨‡¶Ø‡¶º‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶≠‡¶æ‡¶¨‡ßá ‡¶∏‡ßá‡¶≠ ‡¶π‡¶¨‡ßá‡•§
                </div>
            </div>
            
            <div class="two-column">
                <!-- Form Section -->
                <div class="form-section">
                    <h3 style="color: var(--primary-color); margin-bottom: 25px; display: flex; align-items: center; gap: 10px;">
                        <span>‚ûï</span>
                        ‡¶®‡¶§‡ßÅ‡¶® ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®
                    </h3>
                    
                    <div class="form-group">
                        <label>
                            <span>üè´</span>
                            ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®:
                        </label>
                        <select id="classSelect">
                            <option value="">-- ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏ ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶® --</option>
                            <option value="Class 6">Class 6 - ‡¶∑‡¶∑‡ßç‡¶† ‡¶∂‡ßç‡¶∞‡ßá‡¶£‡ßÄ</option>
                            <option value="Class 7">Class 7 - ‡¶∏‡¶™‡ßç‡¶§‡¶Æ ‡¶∂‡ßç‡¶∞‡ßá‡¶£‡ßÄ</option>
                            <option value="Class 8">Class 8 - ‡¶Ö‡¶∑‡ßç‡¶ü‡¶Æ ‡¶∂‡ßç‡¶∞‡ßá‡¶£‡ßÄ</option>
                            <option value="Class 9">Class 9 - ‡¶®‡¶¨‡¶Æ ‡¶∂‡ßç‡¶∞‡ßá‡¶£‡ßÄ</option>
                            <option value="Class 10">Class 10 - ‡¶¶‡¶∂‡¶Æ ‡¶∂‡ßç‡¶∞‡ßá‡¶£‡ßÄ</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <span>üìö</span>
                            ‡¶¨‡¶ø‡¶∑‡ßü ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®:
                        </label>
                        <select id="subjectSelect">
                            <option value="">-- ‡¶¨‡¶ø‡¶∑‡ßü ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶® --</option>
                            <option value="math">‡¶ó‡¶£‡¶ø‡¶§ (Mathematics)</option>
                            <option value="english">‡¶á‡¶Ç‡¶∞‡ßá‡¶ú‡¶ø (English)</option>
                            <option value="science">‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶® (Science)</option>
                            <option value="ict">‡¶§‡¶•‡ßç‡¶Ø ‡¶ì ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶™‡ßç‡¶∞‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§‡¶ø (ICT)</option>
                            <option value="agriculture">‡¶ï‡ßÉ‡¶∑‡¶ø ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ (Agriculture)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <span>üìÑ</span>
                            ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶ü‡¶æ‡¶á‡¶™:
                        </label>
                        <select id="typeSelect">
                            <option value="‡¶¨‡¶á">‡¶¨‡¶á (Book)</option>
                            <option value="‡¶ó‡¶æ‡¶á‡¶°">‡¶ó‡¶æ‡¶á‡¶° (Guide)</option>
                            <option value="‡¶®‡ßã‡¶ü">‡¶®‡ßã‡¶ü (Note)</option>
                            <option value="‡¶≠‡¶ø‡¶°‡¶ø‡¶ì">‡¶≠‡¶ø‡¶°‡¶ø‡¶ì (Video)</option>
                            <option value="‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®">‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® (Question)</option>
                            <option value="‡¶™‡¶ø‡¶°‡¶ø‡¶è‡¶´">‡¶™‡¶ø‡¶°‡¶ø‡¶è‡¶´ (PDF)</option>
                            <option value="‡¶õ‡¶¨‡¶ø">‡¶õ‡¶¨‡¶ø (Image)</option>
                            <option value="MCQ">MCQ</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <span>üìù</span>
                            ‡¶∂‡¶ø‡¶∞‡ßã‡¶®‡¶æ‡¶Æ (Title):
                        </label>
                        <input type="text" id="title" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶ó‡¶£‡¶ø‡¶§ ‡¶¨‡¶á, ‡¶á‡¶Ç‡¶∞‡ßá‡¶ú‡¶ø ‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡¶æ‡¶∞, ‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶® ‡¶®‡ßã‡¶ü">
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <span>üìã</span>
                            ‡¶¨‡¶∞‡ßç‡¶£‡¶®‡¶æ (Description):
                        </label>
                        <textarea id="description" rows="3" placeholder="‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶¨‡¶∞‡ßç‡¶£‡¶®‡¶æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <span>üîó</span>
                            ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï (Link):
                        </label>
                        <input type="text" id="link" placeholder="https://drive.google.com/file/d/XXXXX/view">
                        <small style="color: #666; display: block; margin-top: 8px;">
                            Google Drive, YouTube, PDF ‡¶¨‡¶æ ‡¶Ö‡¶®‡ßç‡¶Ø ‡¶Ø‡ßá‡¶ï‡ßã‡¶®‡ßã ‡¶´‡¶æ‡¶á‡¶≤ ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶¶‡¶ø‡¶®
                        </small>
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <span>üè∑Ô∏è</span>
                            ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶ü‡¶æ‡¶á‡¶™:
                        </label>
                        <select id="linkType">
                            <option value="drive">Google Drive</option>
                            <option value="youtube">YouTube</option>
                            <option value="pdf">PDF ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï</option>
                            <option value="image">‡¶õ‡¶¨‡¶ø ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï</option>
                            <option value="website">‡¶ì‡ßü‡ßá‡¶¨‡¶∏‡¶æ‡¶á‡¶ü</option>
                            <option value="other">‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <span>‚≠ê</span>
                            ‡¶´‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶° ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü:
                        </label>
                        <label style="display: flex; align-items: center; gap: 10px; margin-top: 8px;">
                            <input type="checkbox" id="featured" style="width: auto;">
                            <span>‡¶™‡ßç‡¶∞‡¶ß‡¶æ‡¶® ‡¶™‡ßá‡¶ú‡ßá ‡¶π‡¶æ‡¶á‡¶≤‡¶æ‡¶á‡¶ü ‡¶π‡¶ø‡¶∏‡ßá‡¶¨‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã ‡¶π‡¶¨‡ßá</span>
                        </label>
                    </div>
                    
                    <button onclick="addData()" class="btn btn-success" id="submitBtn">
                        <span>üíæ</span>
                        ‡¶°‡ßá‡¶ü‡¶æ ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®
                    </button>
                </div>
                
                <!-- Link Guide Section -->
                <div class="form-section">
                    <h3 style="color: var(--primary-color); margin-bottom: 25px; display: flex; align-items: center; gap: 10px;">
                        <span>üîó</span>
                        ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶ó‡¶æ‡¶á‡¶° ‡¶ì ‡¶ü‡¶ø‡¶™‡¶∏
                    </h3>
                    
                    <div class="link-box" style="background: #e8f4fd; padding: 20px; border-radius: 12px; margin-bottom: 20px;">
                        <strong style="color: var(--primary-color); display: block; margin-bottom: 15px;">
                            üìå ‡¶ó‡ßÅ‡¶ó‡¶≤ ‡¶°‡ßç‡¶∞‡¶æ‡¶á‡¶≠ ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶§‡ßà‡¶∞‡¶ø:
                        </strong>
                        <div style="background: white; padding: 15px; border-radius: 8px; font-size: 14px; color: #666; line-height: 1.6;">
                            1. ‡¶´‡¶æ‡¶á‡¶≤ ‡¶ó‡ßÅ‡¶ó‡¶≤ ‡¶°‡ßç‡¶∞‡¶æ‡¶á‡¶≠‡ßá ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®<br>
                            2. ‡¶´‡¶æ‡¶á‡¶≤‡ßá ‡¶∞‡¶æ‡¶á‡¶ü-‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‚Üí "Get link"<br>
                            3. "Anyone with the link" ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®<br>
                            4. ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶™‡ßá‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®<br>
                            5. ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï‡¶ü‡¶ø ‡¶è‡¶á‡¶∞‡¶ï‡¶Æ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá: <code style="background: #f1f1f1; padding: 2px 5px; border-radius: 3px;">https://drive.google.com/file/d/XXXXX/view</code>
                        </div>
                    </div>
                    
                    <div style="background: #fff8e1; padding: 15px; border-radius: 10px; margin-top: 20px; border-left: 4px solid var(--warning-color);">
                        <strong>üí° ‡¶ü‡¶ø‡¶™‡¶∏:</strong>
                        <ul style="margin-top: 10px; padding-left: 20px; color: #666;">
                            <li>‡¶¨‡¶á ‡¶è‡¶¨‡¶Ç ‡¶ó‡¶æ‡¶á‡¶°‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø Google Drive ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶¶‡¶ø‡¶®</li>
                            <li>‡¶≠‡¶ø‡¶°‡¶ø‡¶ì‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø YouTube ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶¶‡¶ø‡¶®</li>
                            <li>PDF ‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶¶‡¶ø‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡¶®</li>
                            <li>‡¶´‡¶æ‡¶á‡¶≤ ‡¶∏‡¶æ‡¶á‡¶ú 50MB ‡¶è‡¶∞ ‡¶®‡¶ø‡¶ö‡ßá ‡¶∞‡¶æ‡¶ñ‡ßÅ‡¶®</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Search and Filters -->
            <div class="form-section">
                <div class="search-box">
                    <input type="text" id="searchInput" class="search-input" placeholder="üîç ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶®...">
                    <div class="search-icon">üîç</div>
                </div>
                
                <div style="display: flex; gap: 15px; margin-top: 20px; flex-wrap: wrap;">
                    <select id="filterClass" onchange="filterData()" style="padding: 12px; border: 2px solid #ddd; border-radius: 8px; min-width: 140px; background: white;">
                        <option value="">‡¶∏‡¶¨ ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏</option>
                        <option value="Class 6">Class 6</option>
                        <option value="Class 7">Class 7</option>
                        <option value="Class 8">Class 8</option>
                        <option value="Class 9">Class 9</option>
                        <option value="Class 10">Class 10</option>
                    </select>
                    
                    <select id="filterSubject" onchange="filterData()" style="padding: 12px; border: 2px solid #ddd; border-radius: 8px; min-width: 140px; background: white;">
                        <option value="">‡¶∏‡¶¨ ‡¶¨‡¶ø‡¶∑‡ßü</option>
                        <option value="math">‡¶ó‡¶£‡¶ø‡¶§</option>
                        <option value="english">‡¶á‡¶Ç‡¶∞‡ßá‡¶ú‡¶ø</option>
                        <option value="science">‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶®</option>
                        <option value="ict">ICT</option>
                        <option value="agriculture">‡¶ï‡ßÉ‡¶∑‡¶ø</option>
                    </select>
                    
                    <select id="filterType" onchange="filterData()" style="padding: 12px; border: 2px solid #ddd; border-radius: 8px; min-width: 140px; background: white;">
                        <option value="">‡¶∏‡¶¨ ‡¶ü‡¶æ‡¶á‡¶™</option>
                        <option value="‡¶¨‡¶á">‡¶¨‡¶á</option>
                        <option value="‡¶ó‡¶æ‡¶á‡¶°">‡¶ó‡¶æ‡¶á‡¶°</option>
                        <option value="‡¶®‡ßã‡¶ü">‡¶®‡ßã‡¶ü</option>
                        <option value="‡¶≠‡¶ø‡¶°‡¶ø‡¶ì">‡¶≠‡¶ø‡¶°‡¶ø‡¶ì</option>
                        <option value="MCQ">MCQ</option>
                    </select>
                </div>
            </div>

            <!-- Display Section -->
            <div class="form-section">
                <h3 style="color: var(--primary-color); margin-bottom: 25px; display: flex; align-items: center; gap: 10px;">
                    <span>üìã</span>
                    ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü‡¶∏‡¶Æ‡ßÇ‡¶π
                </h3>
                
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; flex-wrap: wrap; gap: 15px; padding: 15px; background: #f8f9fa; border-radius: 10px;">
                    <div style="color: #666; font-weight: 600;">
                        ‡¶Æ‡ßã‡¶ü: <span id="totalCount" style="color: var(--primary-color);">0</span>‡¶ü‡¶ø | 
                        ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶∏‡¶π: <span id="linkCount" style="color: var(--success-color);">0</span>‡¶ü‡¶ø |
                        ‡¶´‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶°: <span id="featuredCount" style="color: var(--accent-color);">0</span>‡¶ü‡¶ø
                    </div>
                    
                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                        <button onclick="exportToExcel()" class="btn" style="width: auto; padding: 10px 20px;">
                            <span>üìä</span>
                            ‡¶è‡¶ï‡ßç‡¶∏‡ßá‡¶≤ ‡¶è‡¶ï‡ßç‡¶∏‡¶™‡ßã‡¶∞‡ßç‡¶ü
                        </button>
                        <button onclick="refreshContent()" class="btn" style="width: auto; padding: 10px 20px; background: var(--accent-color);">
                            <span>üîÑ</span>
                            ‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂
                        </button>
                    </div>
                </div>
                
                <div id="loading" style="text-align: center; padding: 60px; color: #666;">
                    <div class="loading-spinner"></div>
                    <p style="margin-top: 20px;">‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
                </div>
                <div id="dataDisplay"></div>
            </div>
        </div>
        
        <!-- File Management Tab -->
        <div id="fileTab" class="tab-content">
            <div class="form-section">
                <h3 style="color: var(--primary-color); margin-bottom: 25px; display: flex; align-items: center; gap: 10px;">
                    <span>üìÅ</span>
                    ‡¶Ü‡¶™‡¶≤‡ßã‡¶°‡¶ï‡ßÉ‡¶§ ‡¶´‡¶æ‡¶á‡¶≤‡¶∏‡¶Æ‡ßÇ‡¶π
                </h3>
                
                <div class="stats-grid">
                    <div class="stat-box">
                        <div class="stat-number" id="totalFiles">0</div>
                        <div class="stat-label">‡¶Æ‡ßã‡¶ü ‡¶´‡¶æ‡¶á‡¶≤</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-number" id="totalSize">0 MB</div>
                        <div class="stat-label">‡¶Æ‡ßã‡¶ü ‡¶∏‡¶æ‡¶á‡¶ú</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-number" id="pdfFiles">0</div>
                        <div class="stat-label">PDF ‡¶´‡¶æ‡¶á‡¶≤</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-number" id="imageFiles">0</div>
                        <div class="stat-label">‡¶õ‡¶¨‡¶ø ‡¶´‡¶æ‡¶á‡¶≤</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-number" id="videoFiles">0</div>
                        <div class="stat-label">‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶´‡¶æ‡¶á‡¶≤</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-number" id="docFiles">0</div>
                        <div class="stat-label">‡¶°‡¶ï‡ßÅ‡¶Æ‡ßá‡¶®‡ßç‡¶ü</div>
                    </div>
                </div>
                
                <div class="search-box">
                    <input type="text" id="fileSearch" class="search-input" placeholder="üîç ‡¶´‡¶æ‡¶á‡¶≤ ‡¶®‡¶æ‡¶Æ, ‡¶¨‡¶∞‡ßç‡¶£‡¶®‡¶æ ‡¶¨‡¶æ ‡¶ü‡ßç‡¶Ø‡¶æ‡¶ó ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶®...">
                    <div class="search-icon">üîç</div>
                </div>
                
                <div style="display: flex; gap: 15px; margin-top: 20px; flex-wrap: wrap;">
                    <select id="fileTypeFilter" onchange="filterFiles()" style="padding: 12px; border: 2px solid #ddd; border-radius: 8px; min-width: 140px; background: white;">
                        <option value="">‡¶∏‡¶¨ ‡¶ü‡¶æ‡¶á‡¶™</option>
                        <option value="pdf">PDF</option>
                        <option value="image">‡¶õ‡¶¨‡¶ø</option>
                        <option value="video">‡¶≠‡¶ø‡¶°‡¶ø‡¶ì</option>
                        <option value="doc">‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶°‡¶ï</option>
                        <option value="excel">‡¶è‡¶ï‡ßç‡¶∏‡ßá‡¶≤</option>
                        <option value="ppt">‡¶™‡¶æ‡¶ì‡ßü‡¶æ‡¶∞‡¶™‡ßü‡ßá‡¶®‡ßç‡¶ü</option>
                        <option value="zip">‡¶ú‡¶ø‡¶™ ‡¶´‡¶æ‡¶á‡¶≤</option>
                    </select>
                    
                    <select id="fileClassFilter" onchange="filterFiles()" style="padding: 12px; border: 2px solid #ddd; border-radius: 8px; min-width: 140px; background: white;">
                        <option value="">‡¶∏‡¶¨ ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏</option>
                        <option value="Class 6">Class 6</option>
                        <option value="Class 7">Class 7</option>
                        <option value="Class 8">Class 8</option>
                        <option value="Class 9">Class 9</option>
                        <option value="Class 10">Class 10</option>
                    </select>
                    
                    <button onclick="refreshFiles()" class="btn" style="width: auto; padding: 12px 24px;">
                        <span>üîÑ</span>
                        ‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂ ‡¶ï‡¶∞‡ßÅ‡¶®
                    </button>
                    
                    <button onclick="showBulkDelete()" class="btn" style="width: auto; padding: 12px 24px; background: var(--danger-color);">
                        <span>üóëÔ∏è</span>
                        ‡¶¨‡¶æ‡¶≤‡ßç‡¶ï ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü
                    </button>
                </div>
                
                <div id="filesLoading" style="text-align: center; padding: 60px; color: #666;">
                    <div class="loading-spinner"></div>
                    <p style="margin-top: 20px;">‡¶´‡¶æ‡¶á‡¶≤ ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
                </div>
                
                <div id="filesDisplay"></div>
            </div>
        </div>
        
        <!-- File Upload Tab -->
        <div id="uploadTab" class="tab-content">
            <div class="form-section">
                <h3 style="color: var(--primary-color); margin-bottom: 25px; display: flex; align-items: center; gap: 10px;">
                    <span>üì§</span>
                    ‡¶®‡¶§‡ßÅ‡¶® ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®
                </h3>
                
                <div class="two-column">
                    <div>
                        <div class="form-group">
                            <label>
                                <span>üìÅ</span>
                                ‡¶´‡¶æ‡¶á‡¶≤ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®:
                            </label>
                            <div class="file-upload-container" id="dropArea" onclick="document.getElementById('fileInput').click()">
                                <div style="font-size: 64px; color: var(--secondary-color);">üìÅ</div>
                                <p style="color: #666; margin: 15px 0; font-size: 16px; font-weight: 600;">
                                    ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶¨‡¶æ ‡¶´‡¶æ‡¶á‡¶≤ ‡¶°‡ßç‡¶∞‡¶™ ‡¶ï‡¶∞‡ßÅ‡¶®
                                </p>
                                <p style="font-size: 14px; color: #888; line-height: 1.6;">
                                    ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü‡ßá‡¶° ‡¶´‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ü: PDF, Image (JPG, PNG), Video (MP4), Word, Excel, PowerPoint, ZIP
                                </p>
                                <p style="font-size: 13px; color: #aaa; margin-top: 10px;">
                                    ‡¶∏‡¶∞‡ßç‡¶¨‡ßã‡¶ö‡ßç‡¶ö ‡¶∏‡¶æ‡¶á‡¶ú: 50MB
                                </p>
                            </div>
                            <input type="file" id="fileInput" multiple style="display: none;" onchange="handleFileSelect(event)">
                        </div>
                        
                        <div class="upload-progress" id="uploadProgress">
                            <div class="progress-bar" id="progressBar"></div>
                        </div>
                        
                        <div id="filePreview"></div>
                    </div>
                    
                    <div>
                        <div class="form-group">
                            <label>
                                <span>üìù</span>
                                ‡¶´‡¶æ‡¶á‡¶≤‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ (‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶¨‡¶æ ‡¶á‡¶Ç‡¶∞‡ßá‡¶ú‡¶ø):
                            </label>
                            <input type="text" id="fileName" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶ó‡¶£‡¶ø‡¶§ ‡¶¨‡¶á, English Grammar, Science Note">
                        </div>
                        
                        <div class="form-group">
                            <label>
                                <span>üìã</span>
                                ‡¶¨‡¶∞‡ßç‡¶£‡¶®‡¶æ (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï):
                            </label>
                            <textarea id="fileDescription" rows="3" placeholder="‡¶´‡¶æ‡¶á‡¶≤‡ßá‡¶∞ ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶¨‡¶∞‡ßç‡¶£‡¶®‡¶æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..."></textarea>
                        </div>
                        
                        <div class="two-column" style="grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div class="form-group">
                                <label>
                                    <span>üè´</span>
                                    ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®:
                                </label>
                                <select id="fileClass">
                                    <option value="">-- ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏ ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶® --</option>
                                    <option value="Class 6">Class 6 - ‡¶∑‡¶∑‡ßç‡¶† ‡¶∂‡ßç‡¶∞‡ßá‡¶£‡ßÄ</option>
                                    <option value="Class 7">Class 7 - ‡¶∏‡¶™‡ßç‡¶§‡¶Æ ‡¶∂‡ßç‡¶∞‡ßá‡¶£‡ßÄ</option>
                                    <option value="Class 8">Class 8 - ‡¶Ö‡¶∑‡ßç‡¶ü‡¶Æ ‡¶∂‡ßç‡¶∞‡ßá‡¶£‡ßÄ</option>
                                    <option value="Class 9">Class 9 - ‡¶®‡¶¨‡¶Æ ‡¶∂‡ßç‡¶∞‡ßá‡¶£‡ßÄ</option>
                                    <option value="Class 10">Class 10 - ‡¶¶‡¶∂‡¶Æ ‡¶∂‡ßç‡¶∞‡ßá‡¶£‡ßÄ</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label>
                                    <span>üìö</span>
                                    ‡¶¨‡¶ø‡¶∑‡ßü ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®:
                                </label>
                                <select id="fileSubject">
                                    <option value="">-- ‡¶¨‡¶ø‡¶∑‡ßü ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶® --</option>
                                    <option value="math">‡¶ó‡¶£‡¶ø‡¶§ (Mathematics)</option>
                                    <option value="english">‡¶á‡¶Ç‡¶∞‡ßá‡¶ú‡¶ø (English)</option>
                                    <option value="science">‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶® (Science)</option>
                                    <option value="ict">‡¶§‡¶•‡ßç‡¶Ø ‡¶ì ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶™‡ßç‡¶∞‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§‡¶ø (ICT)</option>
                                    <option value="agriculture">‡¶ï‡ßÉ‡¶∑‡¶ø ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ (Agriculture)</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>
                                <span>üìÑ</span>
                                ‡¶´‡¶æ‡¶á‡¶≤ ‡¶ü‡¶æ‡¶á‡¶™:
                            </label>
                            <select id="fileType">
                                <option value="pdf">PDF ‡¶°‡¶ï‡ßÅ‡¶Æ‡ßá‡¶®‡ßç‡¶ü</option>
                                <option value="image">‡¶õ‡¶¨‡¶ø (Image)</option>
                                <option value="video">‡¶≠‡¶ø‡¶°‡¶ø‡¶ì (Video)</option>
                                <option value="doc">‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶°‡¶ï‡ßÅ‡¶Æ‡ßá‡¶®‡ßç‡¶ü</option>
                                <option value="excel">‡¶è‡¶ï‡ßç‡¶∏‡ßá‡¶≤ ‡¶´‡¶æ‡¶á‡¶≤</option>
                                <option value="ppt">‡¶™‡¶æ‡¶ì‡ßü‡¶æ‡¶∞‡¶™‡ßü‡ßá‡¶®‡ßç‡¶ü</option>
                                <option value="zip">‡¶ï‡¶Æ‡ßç‡¶™‡ßç‡¶∞‡ßá‡¶∏‡¶° ‡¶´‡¶æ‡¶á‡¶≤ (ZIP/RAR)</option>
                                <option value="other">‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>
                                <span>üè∑Ô∏è</span>
                                ‡¶ü‡ßç‡¶Ø‡¶æ‡¶ó‡¶∏ (‡¶ï‡¶Æ‡¶æ ‡¶¶‡¶ø‡ßü‡ßá ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®):
                            </label>
                            <input type="text" id="fileTags" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶¨‡¶á, ‡¶ó‡¶æ‡¶á‡¶°, ‡¶®‡ßã‡¶ü, ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®, ‡¶∏‡¶Æ‡¶æ‡¶ß‡¶æ‡¶®">
                            <small style="color: #666; display: block; margin-top: 8px;">
                                ‡¶è‡¶ï‡¶æ‡¶ß‡¶ø‡¶ï ‡¶ü‡ßç‡¶Ø‡¶æ‡¶ó ‡¶ï‡¶Æ‡¶æ (,) ‡¶¶‡¶ø‡ßü‡ßá ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®
                            </small>
                        </div>
                        
                        <button onclick="uploadFile()" class="btn btn-success" id="uploadBtn">
                            <span>üì§</span>
                            ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®
                        </button>
                    </div>
                </div>
                
                <!-- PWA Install Button -->
                <div class="install-button-container">
                    <h3>üì± ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶á‡¶®‡¶∏‡ßç‡¶ü‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
                    <div class="install-features">
                        <div class="install-feature"><span>‚ö°</span> ‡¶¶‡ßç‡¶∞‡ßÅ‡¶§ ‡¶≤‡ßã‡¶°</div>
                        <div class="install-feature"><span>üì∂</span> ‡¶Ö‡¶´‡¶≤‡¶æ‡¶á‡¶® ‡¶è‡¶ï‡ßç‡¶∏‡ßá‡¶∏</div>
                        <div class="install-feature"><span>üìÅ</span> ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú</div>
                        <div class="install-feature"><span>üîî</span> ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶®</div>
                    </div>
                    <button id="installButton" class="btn btn-install">
                        <span style="font-size: 28px; display: block; margin-bottom: 10px;">üì±</span>
                        <strong style="font-size: 18px;">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶á‡¶®‡¶∏‡ßç‡¶ü‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®</strong>
                        <br>
                        <small style="font-size: 13px; opacity: 0.8;">‡¶π‡ßã‡¶Æ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡ßá ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®</small>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- PWA Install Prompt -->
    <div id="installPrompt">
        <h4>üì± ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ ‡¶∏‡¶π‡¶æ‡¶Ø‡¶º‡¶ø‡¶ï‡¶æ ‡¶è‡¶°‡¶Æ‡¶ø‡¶®</h4>
        <p>‡¶è‡¶á ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡¶ü‡¶ø‡¶ï‡ßá ‡¶á‡¶®‡¶∏‡ßç‡¶ü‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶™‡ßÇ‡¶∞‡ßç‡¶£‡¶æ‡¶ô‡ßç‡¶ó ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßá‡¶∞ ‡¶Æ‡¶§‡ßã ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®:</p>
        <ul style="text-align: left; color: #555; margin: 15px 0; padding-left: 20px; font-size: 14px; line-height: 1.6;">
            <li>‡¶π‡ßã‡¶Æ ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡ßá ‡¶Ü‡¶á‡¶ï‡¶® ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶π‡¶¨‡ßá</li>
            <li>‡¶´‡ßÅ‡¶≤‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶® ‡¶Æ‡ßã‡¶°‡ßá ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶π‡¶¨‡ßá</li>
            <li>‡¶Ö‡¶´‡¶≤‡¶æ‡¶á‡¶®‡ßá‡¶ì ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®</li>
            <li>‡¶¶‡ßç‡¶∞‡ßÅ‡¶§ ‡¶è‡¶ï‡ßç‡¶∏‡ßá‡¶∏ ‡¶™‡¶æ‡¶¨‡ßá‡¶®</li>
            <li>‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶™‡¶æ‡¶¨‡ßá‡¶®</li>
            <li>‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡¶π‡¶ú ‡¶π‡¶¨‡ßá</li>
        </ul>
        <div class="prompt-buttons">
            <button onclick="installApp()" class="install-prompt-btn">‡¶á‡¶®‡¶∏‡ßç‡¶ü‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            <button onclick="hideInstallPrompt()" class="later-btn">‡¶™‡¶∞‡ßá</button>
        </div>
    </div>

    <!-- iOS Install Instructions Modal -->
    <div id="iosInstallModal">
        <div class="ios-modal-content">
            <h3 style="color: var(--primary-color); margin-bottom: 20px; display: flex; align-items: center; gap: 15px;">
                <span>üì±</span>
                iOS-‡¶è ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶á‡¶®‡¶∏‡ßç‡¶ü‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®
            </h3>
            <p style="color: #666; margin-bottom: 20px; text-align: center;">
                iOS ‡¶°‡¶ø‡¶≠‡¶æ‡¶á‡¶∏‡ßá ‡¶è‡¶á ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶á‡¶®‡¶∏‡ßç‡¶ü‡¶≤ ‡¶ï‡¶∞‡¶§‡ßá ‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶∏‡ßç‡¶ü‡ßá‡¶™‡¶ó‡ßÅ‡¶≤‡ßã ‡¶´‡¶≤‡ßã ‡¶ï‡¶∞‡ßÅ‡¶®:
            </p>
            
            <ol class="ios-steps" style="padding-left: 20px; color: #555; line-height: 1.8;">
                <li><strong>Safari ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞</strong> ‡¶ì‡¶™‡ßá‡¶® ‡¶ï‡¶∞‡ßÅ‡¶® (Chrome ‡¶®‡ßü)</li>
                <li>‡¶è‡¶á ‡¶™‡ßá‡¶ú‡ßá ‡¶Ø‡¶æ‡¶®: <code style="background: #f1f1f1; padding: 2px 5px; border-radius: 3px;" id="currentUrl"></code></li>
                <li>‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶∂‡ßá‡ßü‡¶æ‡¶∞ ‡¶Ü‡¶á‡¶ï‡¶®‡ßá ‡¶ü‡ßç‡¶Ø‡¶æ‡¶™ ‡¶ï‡¶∞‡ßÅ‡¶® (‡¶¨‡¶ï‡ßç‡¶∏ ‡¶•‡ßá‡¶ï‡ßá ‡¶¨‡ßá‡¶∞ ‡¶π‡¶ì‡ßü‡¶æ ‡¶§‡ßÄ‡¶∞‡ßá‡¶∞ ‡¶Ü‡¶á‡¶ï‡¶®)</li>
                <li>‡¶≤‡¶ø‡¶∏‡ßç‡¶ü ‡¶•‡ßá‡¶ï‡ßá <strong>"Add to Home Screen"</strong> ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</li>
                <li>"Add" ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ü‡ßç‡¶Ø‡¶æ‡¶™ ‡¶ï‡¶∞‡ßÅ‡¶®</li>
                <li>‡¶π‡ßã‡¶Æ ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶Ü‡¶á‡¶ï‡¶® ‡¶¶‡ßá‡¶ñ‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá</li>
            </ol>
            
            <div style="background: #e8f4fd; padding: 15px; border-radius: 10px; margin: 20px 0;">
                <strong>üí° ‡¶ü‡¶ø‡¶™:</strong> Safari ‡¶è‡¶∞ Settings ‚Üí General ‚Üí iPhone Storage ‚Üí Website Data ‡¶•‡ßá‡¶ï‡ßá ‡¶ì‡ßü‡ßá‡¶¨‡¶∏‡¶æ‡¶á‡¶ü ‡¶°‡ßá‡¶ü‡¶æ ‡¶ï‡ßç‡¶≤‡¶ø‡ßü‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡¶® ‡¶Ø‡¶¶‡¶ø ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡ßü‡•§
            </div>
            
            <button onclick="closeIOSModal()" class="btn" style="background: var(--secondary-color); color: white; width: 100%; padding: 15px;">
                <span>‚úÖ</span>
                ‡¶¨‡ßÅ‡¶ù‡ßá‡¶õ‡¶ø, ‡¶ß‡¶®‡ßç‡¶Ø‡¶¨‡¶æ‡¶¶
            </button>
        </div>
    </div>

    <!-- Android Install Instructions Modal -->
    <div id="androidInstallModal">
        <div class="android-modal-content">
            <h3 style="color: var(--primary-color); margin-bottom: 20px; display: flex; align-items: center; gap: 15px;">
                <span>üì±</span>
                Android-‡¶è ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶á‡¶®‡¶∏‡ßç‡¶ü‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®
            </h3>
            <p style="color: #666; margin-bottom: 20px; text-align: center;">
                Android ‡¶°‡¶ø‡¶≠‡¶æ‡¶á‡¶∏‡ßá ‡¶è‡¶á ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶á‡¶®‡¶∏‡ßç‡¶ü‡¶≤ ‡¶ï‡¶∞‡¶§‡ßá ‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶∏‡ßç‡¶ü‡ßá‡¶™‡¶ó‡ßÅ‡¶≤‡ßã ‡¶´‡¶≤‡ßã ‡¶ï‡¶∞‡ßÅ‡¶®:
            </p>
            
            <ol class="ios-steps" style="padding-left: 20px; color: #555; line-height: 1.8;">
                <li><strong>Chrome ‡¶¨‡¶æ Brave ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞</strong> ‡¶ì‡¶™‡ßá‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</li>
                <li>‡¶è‡¶á ‡¶™‡ßá‡¶ú‡ßá ‡¶Ø‡¶æ‡¶®: <code style="background: #f1f1f1; padding: 2px 5px; border-radius: 3px;" id="androidCurrentUrl"></code></li>
                <li>‡¶â‡¶™‡¶∞‡ßá‡¶∞ ‡¶°‡¶ü‡¶∏ ‡¶Æ‡ßá‡¶®‡ßÅ‡¶§‡ßá ‡¶ü‡ßç‡¶Ø‡¶æ‡¶™ ‡¶ï‡¶∞‡ßÅ‡¶® (‚ãÆ)</li>
                <li>‡¶≤‡¶ø‡¶∏‡ßç‡¶ü ‡¶•‡ßá‡¶ï‡ßá <strong>"Install app"</strong> ‡¶¨‡¶æ <strong>"Add to Home screen"</strong> ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</li>
                <li>"Install" ‡¶¨‡¶æ "Add" ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ü‡ßç‡¶Ø‡¶æ‡¶™ ‡¶ï‡¶∞‡ßÅ‡¶®</li>
                <li>‡¶π‡ßã‡¶Æ ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶Ü‡¶á‡¶ï‡¶® ‡¶¶‡ßá‡¶ñ‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá</li>
            </ol>
            
            <div style="background: #e8f4fd; padding: 15px; border-radius: 10px; margin: 20px 0;">
                <strong>üí° ‡¶ü‡¶ø‡¶™:</strong> ‡¶Ø‡¶¶‡¶ø "Install app" ‡¶Ö‡¶™‡¶∂‡¶® ‡¶®‡¶æ ‡¶¶‡ßá‡¶ñ‡ßá‡¶®, ‡¶§‡¶¨‡ßá "Add to Home screen" ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®‡•§
            </div>
            
            <div class="prompt-buttons" style="margin-top: 20px;">
                <button onclick="closeAndroidModal()" class="btn" style="background: var(--secondary-color); color: white; flex: 1;">
                    <span>‚úÖ</span>
                    ‡¶¨‡ßÅ‡¶ù‡ßá‡¶õ‡¶ø
                </button>
                <button onclick="tryAutoInstall()" class="btn" style="background: var(--success-color); color: white; flex: 1;">
                    <span>‚ö°</span>
                    ‡¶∏‡ßç‡¶¨‡ßü‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡ßü ‡¶á‡¶®‡¶∏‡ßç‡¶ü‡¶≤
                </button>
            </div>
        </div>
    </div>

    <script>
        // ‚úÖ Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyB1vOW-DY6zIkXhPK5CRF3N8w-LzUKsvgg",
            authDomain: "education-app-8931d.firebaseapp.com",
            databaseURL: "https://education-app-8931d-default-rtdb.firebaseio.com",
            projectId: "education-app-8931d",
            storageBucket: "education-app-8931d.firebasestorage.app",
            messagingSenderId: "667995018685",
            appId: "1:667995018685:web:c8cdc1d432748cdc98eed4"
        };

        // ‚úÖ Global Variables
        let db;
        let auth;
        let storage;
        let currentUser = null;
        let currentData = [];
        let currentFiles = [];
        let selectedFile = null;
        let deferredPrompt = null;
        let isAppInstalled = false;
        let selectedFiles = [];

        // ‚úÖ Initialize Firebase
        function initializeFirebase() {
            try {
                firebase.initializeApp(firebaseConfig);
                db = firebase.database();
                auth = firebase.auth();
                storage = firebase.storage();
                console.log("‚úÖ Firebase initialized successfully");
                setupAuth();
                setupRealtimeConnection();
            } catch (error) {
                console.error("‚ùå Firebase initialization error:", error);
                showStatus("Firebase ‡¶∏‡¶Ç‡¶Ø‡ßã‡¶ó ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•", "error");
            }
        }

        // ‚úÖ Setup Realtime Database Connection Monitoring
        function setupRealtimeConnection() {
            const connectedRef = db.ref(".info/connected");
            connectedRef.on("value", (snap) => {
                if (snap.val() === true) {
                    document.getElementById('statusIcon').textContent = 'üü¢';
                    document.getElementById('statusText').textContent = '‡¶Ö‡¶®‡¶≤‡¶æ‡¶á‡¶®';
                    document.getElementById('connectionStatus').classList.remove('status-offline');
                } else {
                    document.getElementById('statusIcon').textContent = 'üî¥';
                    document.getElementById('statusText').textContent = '‡¶Ö‡¶´‡¶≤‡¶æ‡¶á‡¶®';
                    document.getElementById('connectionStatus').classList.add('status-offline');
                }
            });
        }

        // ‚úÖ Authentication Setup
        function setupAuth() {
            auth.onAuthStateChanged((user) => {
                if (user) {
                    currentUser = user;
                    document.getElementById('userEmail').textContent = user.email;
                    document.getElementById('loginModal').style.display = 'none';
                    document.getElementById('adminContainer').style.display = 'block';
                    document.title = "‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ ‡¶è‡¶°‡¶Æ‡¶ø‡¶® - " + user.email;
                    
                    // Load all data
                    loadData();
                    loadFiles();
                    loadDashboardStats();
                    
                    // Check PWA status
                    checkAppInstalled();
                    
                    // Show success message
                    showStatus(`‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ ${user.email}!`, "success");
                } else {
                    currentUser = null;
                    document.getElementById('loginModal').style.display = 'flex';
                    document.getElementById('adminContainer').style.display = 'none';
                }
            });
        }

        // ‚úÖ Login Function
        function loginAdmin() {
            const email = document.getElementById('adminEmail').value.trim();
            const password = document.getElementById('adminPassword').value.trim();
            const errorDiv = document.getElementById('loginError');
            
            if (!email || !password) {
                errorDiv.innerHTML = "<span>‚ö†Ô∏è</span> ‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶è‡¶¨‡¶Ç ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡¶ø‡¶®";
                errorDiv.style.display = 'block';
                return;
            }
            
            auth.signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    errorDiv.style.display = 'none';
                })
                .catch((error) => {
                    let errorMessage = "‡¶≤‡¶ó‡¶á‡¶® ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•";
                    switch(error.code) {
                        case 'auth/invalid-email': errorMessage = "‡¶≠‡ßÅ‡¶≤ ‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶´‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ü"; break;
                        case 'auth/user-disabled': errorMessage = "‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶®‡¶ø‡¶∑‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º"; break;
                        case 'auth/user-not-found': errorMessage = "‡¶è‡¶á ‡¶á‡¶Æ‡ßá‡¶á‡¶≤‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶®‡ßá‡¶á"; break;
                        case 'auth/wrong-password': errorMessage = "‡¶≠‡ßÅ‡¶≤ ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°"; break;
                        case 'auth/too-many-requests': errorMessage = "‡¶Ö‡¶®‡ßá‡¶ï‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶®, ‡¶™‡¶∞‡ßá ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®"; break;
                    }
                    errorDiv.innerHTML = `<span>‚ùå</span> ${errorMessage}`;
                    errorDiv.style.display = 'block';
                });
        }

        // ‚úÖ Logout Function
        function logoutAdmin() {
            if (confirm("‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®?")) {
                auth.signOut()
                    .then(() => {
                        showStatus("‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü ‡¶∏‡¶´‡¶≤", "info");
                    })
                    .catch((error) => {
                        console.error("Logout error:", error);
                    });
            }
        }

        // ‚úÖ Tab Switching
        function switchTab(tabName) {
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            const tabButtons = document.querySelectorAll('.tab');
            tabButtons.forEach(button => button.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            
            if (tabName === 'fileTab') {
                loadFiles();
            } else if (tabName === 'contentTab') {
                loadData();
            }
        }

        // ‚úÖ Show Profile Modal
        function showProfile() {
            showStatus("‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶™‡ßá‡¶ú ‡¶∂‡ßÄ‡¶ò‡ßç‡¶∞‡¶á ‡¶Ü‡¶∏‡¶¨‡ßá", "info");
        }

        // ‚úÖ Show Settings Modal
        function showSettings() {
            showStatus("‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ ‡¶™‡ßá‡¶ú ‡¶∂‡ßÄ‡¶ò‡ßç‡¶∞‡¶á ‡¶Ü‡¶∏‡¶¨‡ßá", "info");
        }

        // ‚úÖ Refresh All Data
        function refreshAllData() {
            loadData();
            loadFiles();
            loadDashboardStats();
            showStatus("‡¶∏‡¶Æ‡¶∏‡ßç‡¶§ ‡¶°‡ßá‡¶ü‡¶æ ‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá", "success");
        }

        // ‚úÖ Show Analytics
        function showAnalytics() {
            showStatus("‡¶è‡¶®‡¶æ‡¶≤‡¶ø‡¶ü‡¶ø‡¶ï‡ßç‡¶∏ ‡¶™‡ßá‡¶ú ‡¶∂‡ßÄ‡¶ò‡ßç‡¶∞‡¶á ‡¶Ü‡¶∏‡¶¨‡ßá", "info");
        }

        // ‚úÖ Load Dashboard Statistics
        function loadDashboardStats() {
            if (!db) return;
            
            // Load total content count
            db.ref('materials').once('value').then(snapshot => {
                const count = snapshot.exists() ? snapshot.numChildren() : 0;
                document.getElementById('totalContentCount').textContent = count;
                document.getElementById('contentBadge').textContent = count;
            });
            
            // Load total files count
            db.ref('files').once('value').then(snapshot => {
                const count = snapshot.exists() ? snapshot.numChildren() : 0;
                document.getElementById('totalFileCount').textContent = count;
                document.getElementById('fileBadge').textContent = count;
            });
            
            // Load active users count
            db.ref('users').once('value').then(snapshot => {
                const count = snapshot.exists() ? snapshot.numChildren() : 0;
                document.getElementById('activeUserCount').textContent = count;
            });
            
            // Load storage usage
            db.ref('files').once('value').then(snapshot => {
                let totalSize = 0;
                if (snapshot.exists()) {
                    snapshot.forEach(child => {
                        const file = child.val();
                        totalSize += file.size || 0;
                    });
                }
                const totalGB = 5 * 1024 * 1024 * 1024; // 5GB free storage
                const usedPercent = Math.min(Math.round((totalSize / totalGB) * 100), 100);
                document.getElementById('storagePercent').textContent = usedPercent + '%';
                
                // Update progress circle
                const circle = document.querySelector('.progress-circle');
                if (circle) {
                    circle.style.background = `conic-gradient(var(--secondary-color) 0% ${usedPercent}%, #e0e0e0 ${usedPercent}% 100%)`;
                }
            });
        }

        // ‚úÖ Add Content Data
        function addData() {
            if (!db || !currentUser) {
                showStatus("‡¶∏‡¶Ç‡¶Ø‡ßã‡¶ó ‡¶®‡ßá‡¶á ‡¶¨‡¶æ ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®", "error");
                return;
            }

            const cls = document.getElementById('classSelect').value;
            const subject = document.getElementById('subjectSelect').value;
            const type = document.getElementById('typeSelect').value;
            const title = document.getElementById('title').value.trim();
            const description = document.getElementById('description').value.trim();
            const link = document.getElementById('link').value.trim();
            const linkType = document.getElementById('linkType').value;
            const featured = document.getElementById('featured').checked;

            if (!cls || !subject || !type || !title) {
                showStatus("‡¶ï‡ßç‡¶≤‡¶æ‡¶∏, ‡¶¨‡¶ø‡¶∑‡ßü, ‡¶ü‡¶æ‡¶á‡¶™ ‡¶è‡¶¨‡¶Ç ‡¶∂‡¶ø‡¶∞‡ßã‡¶®‡¶æ‡¶Æ ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®", "error");
                return;
            }

            let formattedLink = link;
            if (link && !link.startsWith('http')) {
                formattedLink = 'https://' + link;
            }

            const timestamp = Date.now();
            const newRef = db.ref('materials').push();
            
            const data = {
                class: cls,
                subject: subject,
                type: type,
                title: title,
                description: description,
                link: formattedLink || null,
                linkType: linkType,
                featured: featured,
                timestamp: timestamp,
                date: new Date().toLocaleString('bn-BD'),
                addedBy: currentUser.email,
                views: 0,
                downloads: 0
            };
            
            // Show loading
            const submitBtn = document.getElementById('submitBtn');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<span>‚è≥</span> ‡¶∏‡ßá‡¶≠ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...';
            submitBtn.disabled = true;
            
            newRef.set(data)
                .then(() => {
                    showStatus("‚úÖ ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!", "success");
                    
                    // Reset form
                    document.getElementById('title').value = "";
                    document.getElementById('description').value = "";
                    document.getElementById('link').value = "";
                    document.getElementById('featured').checked = false;
                    
                    // Reset button
                    submitBtn.innerHTML = originalText;
                    submitBtn.disabled = false;
                    
                    // Reload data
                    loadData();
                    loadDashboardStats();
                })
                .catch((error) => {
                    showStatus("‚ùå ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•: " + error.message, "error");
                    
                    // Reset button
                    submitBtn.innerHTML = originalText;
                    submitBtn.disabled = false;
                    
                    // Check if it's a permission error
                    if (error.code === 'PERMISSION_DENIED') {
                        showFirebaseRulesFix();
                    }
                });
        }

        // ‚úÖ Show Firebase Rules Fix Instructions
        function showFirebaseRulesFix() {
            const fixMessage = `
                <div style="background: #fff8e1; padding: 20px; border-radius: 10px; margin: 20px 0; border-left: 4px solid var(--warning-color);">
                    <strong>‚ö†Ô∏è Firebase Permission Error Fix:</strong>
                    <p style="margin-top: 10px; color: #666;">
                        Firebase ‡¶°‡¶æ‡¶ü‡¶æ‡¶¨‡ßá‡¶ú ‡¶∞‡ßÅ‡¶≤‡¶∏ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§ Firebase Console-‡¶è ‡¶Ø‡¶æ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶∞‡ßÅ‡¶≤‡¶∏ ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®:
                    </p>
                    <pre style="background: #f5f5f5; padding: 15px; border-radius: 5px; overflow-x: auto; margin-top: 10px; font-size: 12px;">
{
  "rules": {
    "materials": {
      ".read": true,
      ".write": "auth != null"
    },
    "files": {
      ".read": true,
      ".write": "auth != null"
    },
    "users": {
      "$uid": {
        ".read": "auth != null",
        ".write": "auth != null && auth.uid == $uid"
      }
    }
  }
}</pre>
                    <p style="margin-top: 10px; color: #666; font-size: 14px;">
                        üìç Firebase Console ‚Üí Database ‚Üí Rules ‚Üí ‡¶â‡¶™‡¶∞‡ßá‡¶∞ ‡¶∞‡ßÅ‡¶≤‡¶∏ ‡¶™‡ßá‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶® ‚Üí Publish
                    </p>
                </div>
            `;
            
            const alertBox = document.querySelector('.alert-box');
            if (alertBox) {
                alertBox.innerHTML = fixMessage;
            }
        }

        // ‚úÖ Load Content Data
        function loadData() {
            if (!db) return;

            const display = document.getElementById('dataDisplay');
            const loading = document.getElementById('loading');
            
            if (loading) loading.style.display = "block";
            
            db.ref('materials').orderByChild('timestamp').on('value', (snapshot) => {
                if (loading) loading.style.display = "none";
                
                if (!snapshot.exists()) {
                    display.innerHTML = `
                        <div class="empty-state">
                            <div class="empty-state-icon">üì≠</div>
                            <h3>‡¶ï‡ßã‡¶®‡ßã ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø</h3>
                            <p>‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶è‡¶ü‡¶ø ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá</p>
                        </div>`;
                    updateCounts(0, 0, 0);
                    return;
                }

                currentData = [];
                let html = `
                    <table>
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>‡¶∂‡¶ø‡¶∞‡ßã‡¶®‡¶æ‡¶Æ</th>
                                <th>‡¶ï‡ßç‡¶≤‡¶æ‡¶∏</th>
                                <th>‡¶¨‡¶ø‡¶∑‡ßü</th>
                                <th>‡¶ü‡¶æ‡¶á‡¶™</th>
                                <th>‡¶≤‡¶ø‡¶ô‡ßç‡¶ï</th>
                                <th>‡¶´‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶°</th>
                                <th>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</th>
                                <th>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶®</th>
                            </tr>
                        </thead>
                        <tbody>`;

                let index = 1;
                let linkCount = 0;
                let featuredCount = 0;
                
                snapshot.forEach((child) => {
                    const val = child.val();
                    const key = child.key;
                    
                    currentData.push({key, ...val});
                    
                    if (val.link) linkCount++;
                    if (val.featured) featuredCount++;
                    
                    const subjectName = getSubjectName(val.subject || '');
                    const typeClass = getTypeClass(val.type || '');
                    
                    html += `
                        <tr>
                            <td>${index}</td>
                            <td><strong>${val.title || 'N/A'}</strong></td>
                            <td>${val.class || 'N/A'}</td>
                            <td>${subjectName}</td>
                            <td><span class="material-type ${typeClass}">${val.type || 'N/A'}</span></td>
                            <td>${val.link ? '‚úÖ ‡¶Ü‡¶õ‡ßá' : '‚ùå ‡¶®‡ßá‡¶á'}</td>
                            <td>${val.featured ? '‚≠ê' : ''}</td>
                            <td>${val.date || new Date(val.timestamp).toLocaleDateString('bn-BD')}</td>
                            <td>
                                <div class="action-buttons">
                                    <button onclick="viewData('${key}')" class="view-btn">
                                        <span>üëÅÔ∏è</span>
                                        ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®
                                    </button>
                                    <button onclick="editData('${key}')" class="edit-btn">
                                        <span>‚úèÔ∏è</span>
                                        ‡¶è‡¶°‡¶ø‡¶ü
                                    </button>
                                    <button onclick="deleteData('${key}')" class="delete-btn">
                                        <span>üóëÔ∏è</span>
                                        ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü
                                    </button>
                                </div>
                            </td>
                        </tr>`;
                    index++;
                });

                html += `</tbody></table>`;
                display.innerHTML = html;
                updateCounts(index-1, linkCount, featuredCount);
                loadDashboardStats();
            });
        }

        // ‚úÖ Helper Functions
        function getSubjectName(subjectCode) {
            const subjects = {
                'math': '‡¶ó‡¶£‡¶ø‡¶§',
                'english': '‡¶á‡¶Ç‡¶∞‡ßá‡¶ú‡¶ø',
                'science': '‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶®',
                'ict': 'ICT',
                'agriculture': '‡¶ï‡ßÉ‡¶∑‡¶ø',
            };
            return subjects[subjectCode] || subjectCode;
        }
        
        function getTypeClass(type) {
            const types = {
                '‡¶¨‡¶á': 'book',
                '‡¶ó‡¶æ‡¶á‡¶°': 'guide',
                '‡¶®‡ßã‡¶ü': 'note',
                '‡¶≠‡¶ø‡¶°‡¶ø‡¶ì': 'video',
                '‡¶™‡¶ø‡¶°‡¶ø‡¶è‡¶´': 'pdf',
                '‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®': 'question',
                '‡¶õ‡¶¨‡¶ø': 'image',
                'MCQ': 'question'
            };
            return types[type] || 'book';
        }
        
        function updateCounts(total, links, featured) {
            document.getElementById('totalCount').textContent = total;
            document.getElementById('linkCount').textContent = links;
            document.getElementById('featuredCount').textContent = featured;
        }

        // ‚úÖ View Content
        function viewData(key) {
            const item = currentData.find(d => d.key === key);
            if (!item) return;
            
            const modal = document.getElementById('fileViewModal');
            const title = document.getElementById('fileViewTitle');
            const content = document.getElementById('fileViewContent');
            
            title.textContent = item.title;
            
            let contentHTML = `
                <div style="margin-bottom: 25px;">
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                        <p><strong>üìù ‡¶∂‡¶ø‡¶∞‡ßã‡¶®‡¶æ‡¶Æ:</strong> ${item.title}</p>
                        <p><strong>üè´ ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏:</strong> ${item.class}</p>
                        <p><strong>üìö ‡¶¨‡¶ø‡¶∑‡ßü:</strong> ${getSubjectName(item.subject)}</p>
                        <p><strong>üìÑ ‡¶ü‡¶æ‡¶á‡¶™:</strong> ${item.type}</p>
                        <p><strong>‚≠ê ‡¶´‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶°:</strong> ${item.featured ? '‡¶π‡ßç‡¶Ø‡¶æ‡¶Å' : '‡¶®‡¶æ'}</p>
                        <p><strong>üìÖ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ:</strong> ${item.date}</p>
                        <p><strong>üë§ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶®:</strong> ${item.addedBy}</p>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <strong>üìã ‡¶¨‡¶∞‡ßç‡¶£‡¶®‡¶æ:</strong>
                        <p style="margin-top: 10px; color: #666; line-height: 1.6;">${item.description || '‡¶ï‡ßã‡¶®‡ßã ‡¶¨‡¶∞‡ßç‡¶£‡¶®‡¶æ ‡¶®‡ßá‡¶á'}</p>
                    </div>`;
            
            if (item.link) {
                contentHTML += `
                    <div style="background: #e8f4fd; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                        <strong>üîó ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï:</strong>
                        <p style="margin-top: 10px;"><a href="${item.link}" target="_blank" style="color: var(--secondary-color); word-break: break-all;">${item.link}</a></p>
                        <p style="margin-top: 10px;"><strong>‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶ü‡¶æ‡¶á‡¶™:</strong> ${item.linkType || 'other'}</p>
                    </div>
                    <div style="text-align: center;">
                        <a href="${item.link}" target="_blank" class="btn" style="width: auto; padding: 12px 30px; margin: 10px;">
                            <span>üîó</span>
                            ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶ì‡¶™‡ßá‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®
                        </a>
                    </div>`;
            }
            
            contentHTML += `</div>`;
            content.innerHTML = contentHTML;
            modal.style.display = 'flex';
        }

        // ‚úÖ Edit Content
        function editData(key) {
            const item = currentData.find(d => d.key === key);
            if (!item) return;
            
            document.getElementById('classSelect').value = item.class;
            document.getElementById('subjectSelect').value = item.subject;
            document.getElementById('typeSelect').value = item.type;
            document.getElementById('title').value = item.title;
            document.getElementById('description').value = item.description || '';
            document.getElementById('link').value = item.link || '';
            document.getElementById('linkType').value = item.linkType || 'other';
            document.getElementById('featured').checked = item.featured || false;
            
            const submitBtn = document.getElementById('submitBtn');
            submitBtn.innerHTML = '<span>‚úèÔ∏è</span> ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®';
            submitBtn.onclick = () => updateData(key);
            
            showStatus(`"${item.title}" ‡¶è‡¶°‡¶ø‡¶ü ‡¶Æ‡ßã‡¶°‡ßá`, "warning");
            
            // Scroll to form
            document.getElementById('contentTab').scrollIntoView({ behavior: 'smooth' });
        }

        // ‚úÖ Update Content
        function updateData(key) {
            if (!db) return;

            const cls = document.getElementById('classSelect').value;
            const subject = document.getElementById('subjectSelect').value;
            const type = document.getElementById('typeSelect').value;
            const title = document.getElementById('title').value.trim();
            const description = document.getElementById('description').value.trim();
            const link = document.getElementById('link').value.trim();
            const linkType = document.getElementById('linkType').value;
            const featured = document.getElementById('featured').checked;

            if (!cls || !subject || !type || !title) {
                showStatus("‡¶∏‡¶¨ ‡¶´‡¶ø‡¶≤‡ßç‡¶° ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®", "error");
                return;
            }

            let formattedLink = link;
            if (link && !link.startsWith('http')) {
                formattedLink = 'https://' + link;
            }

            const updatedData = {
                class: cls,
                subject: subject,
                type: type,
                title: title,
                description: description,
                link: formattedLink || null,
                linkType: linkType,
                featured: featured,
                lastUpdated: new Date().toLocaleString('bn-BD')
            };
            
            const submitBtn = document.getElementById('submitBtn');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<span>‚è≥</span> ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶π‡¶ö‡ßç‡¶õ‡ßá...';
            submitBtn.disabled = true;
            
            db.ref('materials/' + key).update(updatedData)
                .then(() => {
                    showStatus("‚úÖ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶∏‡¶´‡¶≤!", "success");
                    
                    // Reset form
                    document.getElementById('title').value = "";
                    document.getElementById('description').value = "";
                    document.getElementById('link').value = "";
                    document.getElementById('featured').checked = false;
                    
                    // Reset button
                    submitBtn.innerHTML = '<span>üíæ</span> ‡¶°‡ßá‡¶ü‡¶æ ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®';
                    submitBtn.onclick = addData;
                    submitBtn.disabled = false;
                    
                    // Reload data
                    loadData();
                    loadDashboardStats();
                })
                .catch((error) => {
                    showStatus("‚ùå ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•: " + error.message, "error");
                    
                    // Reset button
                    submitBtn.innerHTML = originalText;
                    submitBtn.disabled = false;
                });
        }

        // ‚úÖ Delete Content
        function deleteData(key) {
            const item = currentData.find(d => d.key === key);
            if (!item) return;
            
            if (!confirm(`‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ "${item.title}" ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü‡¶ü‡¶ø ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®?`)) {
                return;
            }
            
            db.ref('materials/' + key).remove()
                .then(() => {
                    showStatus("‚úÖ ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶∏‡¶´‡¶≤", "success");
                    loadData();
                    loadDashboardStats();
                })
                .catch((error) => {
                    showStatus("‚ùå ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•: " + error.message, "error");
                });
        }

        // ‚úÖ Filter Content
        function filterData() {
            const classFilter = document.getElementById('filterClass').value;
            const subjectFilter = document.getElementById('filterSubject').value;
            const typeFilter = document.getElementById('filterType').value;
            const searchFilter = document.getElementById('searchInput').value.toLowerCase();
            
            const display = document.getElementById('dataDisplay');
            let html = `
                <table>
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>‡¶∂‡¶ø‡¶∞‡ßã‡¶®‡¶æ‡¶Æ</th>
                            <th>‡¶ï‡ßç‡¶≤‡¶æ‡¶∏</th>
                            <th>‡¶¨‡¶ø‡¶∑‡ßü</th>
                            <th>‡¶ü‡¶æ‡¶á‡¶™</th>
                            <th>‡¶≤‡¶ø‡¶ô‡ßç‡¶ï</th>
                            <th>‡¶´‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶°</th>
                            <th>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</th>
                            <th>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶®</th>
                        </tr>
                    </thead>
                    <tbody>`;
            
            let index = 1;
            let linkCount = 0;
            let featuredCount = 0;
            
            currentData.forEach(item => {
                if (classFilter && item.class !== classFilter) return;
                if (subjectFilter && item.subject !== subjectFilter) return;
                if (typeFilter && item.type !== typeFilter) return;
                if (searchFilter && !item.title.toLowerCase().includes(searchFilter) && 
                    !(item.description && item.description.toLowerCase().includes(searchFilter))) {
                    return;
                }
                
                if (item.link) linkCount++;
                if (item.featured) featuredCount++;
                
                html += `
                    <tr>
                        <td>${index}</td>
                        <td><strong>${item.title}</strong></td>
                        <td>${item.class}</td>
                        <td>${getSubjectName(item.subject)}</td>
                        <td><span class="material-type ${getTypeClass(item.type)}">${item.type}</span></td>
                        <td>${item.link ? '‚úÖ ‡¶Ü‡¶õ‡ßá' : '‚ùå ‡¶®‡ßá‡¶á'}</td>
                        <td>${item.featured ? '‚≠ê' : ''}</td>
                        <td>${item.date || new Date(item.timestamp).toLocaleDateString('bn-BD')}</td>
                        <td>
                            <div class="action-buttons">
                                <button onclick="viewData('${item.key}')" class="view-btn">
                                    <span>üëÅÔ∏è</span>
                                    ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®
                                </button>
                                <button onclick="editData('${item.key}')" class="edit-btn">
                                    <span>‚úèÔ∏è</span>
                                    ‡¶è‡¶°‡¶ø‡¶ü
                                </button>
                                <button onclick="deleteData('${item.key}')" class="delete-btn">
                                    <span>üóëÔ∏è</span>
                                    ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü
                                </button>
                            </div>
                        </td>
                    </tr>`;
                index++;
            });
            
            html += `</tbody></table>`;
            display.innerHTML = html || `
                <div class="empty-state">
                    <div class="empty-state-icon">üîç</div>
                    <h3>‡¶ï‡ßã‡¶®‡ßã ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø</h3>
                    <p>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡¶®‡ßÅ‡¶∏‡¶®‡ßç‡¶ß‡¶æ‡¶®‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶Æ‡¶ø‡¶≤‡¶õ‡ßá ‡¶®‡¶æ</p>
                </div>`;
            updateCounts(index-1, linkCount, featuredCount);
        }

        // ‚úÖ Refresh Content
        function refreshContent() {
            loadData();
            showStatus("‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá", "info");
        }

        // ‚úÖ Export to Excel
        function exportToExcel() {
            showStatus("‡¶è‡¶ï‡ßç‡¶∏‡ßá‡¶≤ ‡¶è‡¶ï‡ßç‡¶∏‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶∂‡ßÄ‡¶ò‡ßç‡¶∞‡¶á ‡¶Ü‡¶∏‡¶¨‡ßá", "info");
        }

        // ‚úÖ File Upload Functions
        function handleFileSelect(event) {
            selectedFiles = Array.from(event.target.files);
            displayFilePreview();
        }
        
        function displayFilePreview() {
            const previewDiv = document.getElementById('filePreview');
            previewDiv.innerHTML = '';
            
            selectedFiles.forEach((file, index) => {
                const fileDiv = document.createElement('div');
                fileDiv.className = 'file-info';
                fileDiv.style.marginBottom = '15px';
                
                const fileName = file.name;
                const fileSize = formatFileSize(file.size);
                const fileType = getFileType(file.type);
                
                fileDiv.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong>${fileName}</strong>
                            <div class="file-size">${fileSize} ‚Ä¢ ${fileType}</div>
                        </div>
                        <button onclick="removeFile(${index})" style="background: var(--danger-color); color: white; border: none; padding: 8px 15px; border-radius: 8px; cursor: pointer; font-weight: bold;">
                            √ó
                        </button>
                    </div>
                `;
                
                previewDiv.appendChild(fileDiv);
            });
            
            if (selectedFiles.length > 0) {
                document.getElementById('fileName').value = selectedFiles[0].name.split('.')[0];
            }
        }
        
        function removeFile(index) {
            selectedFiles.splice(index, 1);
            displayFilePreview();
        }
        
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }
        
        function getFileType(mimeType) {
            if (mimeType.includes('pdf')) return 'PDF';
            if (mimeType.includes('image')) return 'Image';
            if (mimeType.includes('video')) return 'Video';
            if (mimeType.includes('word') || mimeType.includes('document')) return 'Word';
            if (mimeType.includes('excel') || mimeType.includes('spreadsheet')) return 'Excel';
            if (mimeType.includes('powerpoint') || mimeType.includes('presentation')) return 'PowerPoint';
            if (mimeType.includes('zip') || mimeType.includes('compressed')) return 'ZIP';
            return 'Other';
        }

        // ‚úÖ Upload File
        function uploadFile() {
            if (!selectedFiles.length) {
                showStatus("‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶´‡¶æ‡¶á‡¶≤ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®", "error");
                return;
            }
            
            const fileName = document.getElementById('fileName').value.trim();
            const fileDescription = document.getElementById('fileDescription').value.trim();
            const fileClass = document.getElementById('fileClass').value;
            const fileSubject = document.getElementById('fileSubject').value;
            const fileType = document.getElementById('fileType').value;
            const fileTags = document.getElementById('fileTags').value;
            
            if (!fileName || !fileClass || !fileSubject) {
                showStatus("‡¶´‡¶æ‡¶á‡¶≤‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ, ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏ ‡¶è‡¶¨‡¶Ç ‡¶¨‡¶ø‡¶∑‡ßü ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®", "error");
                return;
            }
            
            const file = selectedFiles[0];
            const maxSize = 50 * 1024 * 1024; // 50MB
            
            if (file.size > maxSize) {
                showStatus("‡¶´‡¶æ‡¶á‡¶≤ ‡¶∏‡¶æ‡¶á‡¶ú 50MB ‡¶è‡¶∞ ‡¶ï‡¶Æ ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá", "error");
                return;
            }
            
            // Generate unique file name
            const timestamp = Date.now();
            const fileExt = file.name.split('.').pop();
            const uniqueFileName = `${timestamp}_${Math.random().toString(36).substr(2, 9)}.${fileExt}`;
            
            // Create storage reference
            const storageRef = storage.ref(`files/${uniqueFileName}`);
            
            // Show progress bar
            const progressBar = document.getElementById('progressBar');
            const uploadProgress = document.getElementById('uploadProgress');
            uploadProgress.style.display = 'block';
            progressBar.style.width = '0%';
            
            // Disable upload button
            const uploadBtn = document.getElementById('uploadBtn');
            uploadBtn.disabled = true;
            uploadBtn.innerHTML = '<span>‚è≥</span> ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...';
            
            // Upload file
            const uploadTask = storageRef.put(file);
            
            uploadTask.on('state_changed',
                (snapshot) => {
                    const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
                    progressBar.style.width = progress + '%';
                },
                (error) => {
                    console.error("Upload error:", error);
                    showStatus("‚ùå ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•: " + error.message, "error");
                    uploadProgress.style.display = 'none';
                    uploadBtn.disabled = false;
                    uploadBtn.innerHTML = '<span>üì§</span> ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®';
                },
                () => {
                    uploadTask.snapshot.ref.getDownloadURL().then((downloadURL) => {
                        const fileData = {
                            originalName: file.name,
                            fileName: fileName,
                            description: fileDescription,
                            class: fileClass,
                            subject: fileSubject,
                            type: fileType,
                            tags: fileTags.split(',').map(tag => tag.trim()).filter(tag => tag),
                            size: file.size,
                            url: downloadURL,
                            storagePath: `files/${uniqueFileName}`,
                            uploadDate: new Date().toLocaleString('bn-BD'),
                            timestamp: timestamp,
                            uploadedBy: currentUser.email,
                            mimeType: file.type,
                            downloadCount: 0,
                            viewCount: 0
                        };
                        
                        db.ref('files').push(fileData)
                            .then(() => {
                                showStatus("‚úÖ ‡¶´‡¶æ‡¶á‡¶≤ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶π‡ßü‡ßá‡¶õ‡ßá!", "success");
                                
                                // Reset form
                                document.getElementById('fileName').value = '';
                                document.getElementById('fileDescription').value = '';
                                document.getElementById('fileTags').value = '';
                                document.getElementById('filePreview').innerHTML = '';
                                selectedFiles = [];
                                document.getElementById('fileInput').value = '';
                                
                                // Hide progress bar
                                uploadProgress.style.display = 'none';
                                
                                // Enable upload button
                                uploadBtn.disabled = false;
                                uploadBtn.innerHTML = '<span>üì§</span> ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®';
                                
                                // Load files list
                                loadFiles();
                                loadDashboardStats();
                            })
                            .catch((error) => {
                                showStatus("‚ùå ‡¶°‡ßá‡¶ü‡¶æ ‡¶∏‡ßá‡¶≠ ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•: " + error.message, "error");
                                uploadProgress.style.display = 'none';
                                uploadBtn.disabled = false;
                                uploadBtn.innerHTML = '<span>üì§</span> ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®';
                            });
                    });
                }
            );
        }

        // ‚úÖ Load Files
        function loadFiles() {
            if (!db) return;
            
            const filesDisplay = document.getElementById('filesDisplay');
            const filesLoading = document.getElementById('filesLoading');
            
            filesDisplay.innerHTML = '';
            if (filesLoading) filesLoading.style.display = "block";
            
            db.ref('files').orderByChild('timestamp').once('value', (snapshot) => {
                if (filesLoading) filesLoading.style.display = "none";
                
                if (!snapshot.exists()) {
                    filesDisplay.innerHTML = `
                        <div class="empty-state">
                            <div class="empty-state-icon">üìÅ</div>
                            <h3>‡¶ï‡ßã‡¶®‡ßã ‡¶´‡¶æ‡¶á‡¶≤ ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø</h3>
                            <p>‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶è‡¶ü‡¶ø ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá</p>
                        </div>`;
                    updateFileStats(0, 0, 0, 0, 0, 0);
                    return;
                }
                
                currentFiles = [];
                let html = `
                    <table>
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>‡¶´‡¶æ‡¶á‡¶≤ ‡¶®‡¶æ‡¶Æ</th>
                                <th>‡¶ï‡ßç‡¶≤‡¶æ‡¶∏</th>
                                <th>‡¶¨‡¶ø‡¶∑‡ßü</th>
                                <th>‡¶ü‡¶æ‡¶á‡¶™</th>
                                <th>‡¶∏‡¶æ‡¶á‡¶ú</th>
                                <th>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</th>
                                <th>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶®</th>
                            </tr>
                        </thead>
                        <tbody>`;
                
                let index = 1;
                let totalSize = 0;
                let pdfCount = 0;
                let imageCount = 0;
                let videoCount = 0;
                let docCount = 0;
                
                snapshot.forEach((child) => {
                    const val = child.val();
                    const key = child.key;
                    
                    currentFiles.push({key, ...val});
                    totalSize += val.size || 0;
                    
                    if (val.type === 'pdf') pdfCount++;
                    if (val.type === 'image') imageCount++;
                    if (val.type === 'video') videoCount++;
                    if (['doc', 'excel', 'ppt'].includes(val.type)) docCount++;
                    
                    const fileTypeClass = getFileTypeClass(val.type);
                    const fileTypeBadge = getFileTypeBadge(val.type);
                    
                    html += `
                        <tr>
                            <td>${index}</td>
                            <td>
                                <strong>${val.fileName}</strong>
                                ${fileTypeBadge}
                                <div style="font-size: 12px; color: #666;">${val.originalName}</div>
                            </td>
                            <td>${val.class}</td>
                            <td>${getSubjectName(val.subject)}</td>
                            <td><span class="material-type ${fileTypeClass}">${val.type}</span></td>
                            <td>${formatFileSize(val.size)}</td>
                            <td>${val.uploadDate}</td>
                            <td>
                                <div class="action-buttons">
                                    <button onclick="viewFile('${key}')" class="view-btn">
                                        <span>üëÅÔ∏è</span>
                                        ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®
                                    </button>
                                    <button onclick="downloadFile('${key}')" class="download-btn">
                                        <span>üì•</span>
                                        ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶°
                                    </button>
                                    <button onclick="editFile('${key}')" class="edit-btn">
                                        <span>‚úèÔ∏è</span>
                                        ‡¶è‡¶°‡¶ø‡¶ü
                                    </button>
                                    <button onclick="deleteFile('${key}')" class="delete-btn">
                                        <span>üóëÔ∏è</span>
                                        ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü
                                    </button>
                                </div>
                            </td>
                        </tr>`;
                    index++;
                });
                
                html += `</tbody></table>`;
                filesDisplay.innerHTML = html;
                
                updateFileStats(currentFiles.length, totalSize, pdfCount, imageCount, videoCount, docCount);
                loadDashboardStats();
            });
        }
        
        function getFileTypeClass(type) {
            const types = {
                'pdf': 'pdf',
                'image': 'image',
                'video': 'video',
                'doc': 'book',
                'excel': 'book',
                'ppt': 'book',
                'zip': 'other',
                'other': 'other'
            };
            return types[type] || 'other';
        }
        
        function getFileTypeBadge(type) {
            const badges = {
                'pdf': '<span class="file-type-badge file-type-pdf">PDF</span>',
                'image': '<span class="file-type-badge file-type-image">IMG</span>',
                'video': '<span class="file-type-badge file-type-video">VID</span>',
                'doc': '<span class="file-type-badge file-type-doc">DOC</span>',
                'excel': '<span class="file-type-badge file-type-doc">XLS</span>',
                'ppt': '<span class="file-type-badge file-type-doc">PPT</span>',
                'zip': '<span class="file-type-badge file-type-zip">ZIP</span>',
                'other': '<span class="file-type-badge file-type-other">FILE</span>'
            };
            return badges[type] || badges['other'];
        }
        
        function updateFileStats(total, size, pdf, image, video, doc) {
            document.getElementById('totalFiles').textContent = total;
            document.getElementById('totalSize').textContent = formatFileSize(size);
            document.getElementById('pdfFiles').textContent = pdf;
            document.getElementById('imageFiles').textContent = image;
            document.getElementById('videoFiles').textContent = video;
            document.getElementById('docFiles').textContent = doc;
        }

        // ‚úÖ View File
        function viewFile(key) {
            const file = currentFiles.find(f => f.key === key);
            if (!file) return;
            
            const modal = document.getElementById('fileViewModal');
            const title = document.getElementById('fileViewTitle');
            const content = document.getElementById('fileViewContent');
            
            title.textContent = file.fileName;
            
            let contentHTML = `
                <div style="margin-bottom: 25px;">
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                        <p><strong>üìù ‡¶´‡¶æ‡¶á‡¶≤ ‡¶®‡¶æ‡¶Æ:</strong> ${file.fileName}</p>
                        <p><strong>üìÑ ‡¶Ü‡¶∏‡¶≤ ‡¶®‡¶æ‡¶Æ:</strong> ${file.originalName}</p>
                        <p><strong>üè´ ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏:</strong> ${file.class}</p>
                        <p><strong>üìö ‡¶¨‡¶ø‡¶∑‡ßü:</strong> ${getSubjectName(file.subject)}</p>
                        <p><strong>üìä ‡¶ü‡¶æ‡¶á‡¶™:</strong> ${file.type}</p>
                        <p><strong>üìè ‡¶∏‡¶æ‡¶á‡¶ú:</strong> ${formatFileSize(file.size)}</p>
                        <p><strong>üìÖ ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ:</strong> ${file.uploadDate}</p>
                        <p><strong>üë§ ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶®:</strong> ${file.uploadedBy}</p>
                        ${file.tags && file.tags.length ? `<p><strong>üè∑Ô∏è ‡¶ü‡ßç‡¶Ø‡¶æ‡¶ó‡¶∏:</strong> ${file.tags.join(', ')}</p>` : ''}
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <strong>üìã ‡¶¨‡¶∞‡ßç‡¶£‡¶®‡¶æ:</strong>
                        <p style="margin-top: 10px; color: #666; line-height: 1.6;">${file.description || '‡¶ï‡ßã‡¶®‡ßã ‡¶¨‡¶∞‡ßç‡¶£‡¶®‡¶æ ‡¶®‡ßá‡¶á'}</p>
                    </div>`;
            
            contentHTML += `
                <div style="background: #e8f4fd; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                    <strong>üîó ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï:</strong>
                    <p style="margin-top: 10px;"><a href="${file.url}" target="_blank" style="color: var(--secondary-color); word-break: break-all;">${file.url}</a></p>
                </div>
                <div style="text-align: center;">
                    <a href="${file.url}" target="_blank" class="btn" style="width: auto; padding: 12px 30px; margin: 10px;">
                        <span>üîó</span>
                        ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶ì‡¶™‡ßá‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®
                    </a>
                    <button onclick="downloadFile('${key}')" class="btn" style="width: auto; padding: 12px 30px; margin: 10px; background: var(--success-color);">
                        <span>üì•</span>
                        ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®
                    </button>
                </div>`;
            
            if (file.type === 'pdf') {
                contentHTML += `
                    <div style="margin-top: 30px;">
                        <h4 style="color: var(--primary-color); margin-bottom: 15px;">PDF ‡¶™‡ßç‡¶∞‡¶ø‡¶≠‡¶ø‡¶â</h4>
                        <iframe src="${file.url}" class="file-viewer pdf" frameborder="0"></iframe>
                        <p style="color: #666; margin-top: 10px; text-align: center;">PDF ‡¶≠‡¶ø‡¶â‡ßü‡¶æ‡¶∞ ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
                    </div>`;
            } else if (file.type === 'image') {
                contentHTML += `
                    <div style="margin-top: 30px; text-align: center;">
                        <h4 style="color: var(--primary-color); margin-bottom: 15px;">‡¶õ‡¶¨‡¶ø ‡¶™‡ßç‡¶∞‡¶ø‡¶≠‡¶ø‡¶â</h4>
                        <img src="${file.url}" alt="${file.fileName}" class="file-viewer">
                    </div>`;
            } else if (file.type === 'video') {
                contentHTML += `
                    <div style="margin-top: 30px; text-align: center;">
                        <h4 style="color: var(--primary-color); margin-bottom: 15px;">‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶™‡ßç‡¶∞‡¶ø‡¶≠‡¶ø‡¶â</h4>
                        <video controls class="file-viewer">
                            <source src="${file.url}" type="${file.mimeType || 'video/mp4'}">
                            ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ï‡¶∞‡ßá ‡¶®‡¶æ‡•§
                        </video>
                    </div>`;
            }
            
            contentHTML += `</div>`;
            content.innerHTML = contentHTML;
            modal.style.display = 'flex';
            
            // Update view count
            db.ref('files/' + key + '/viewCount').transaction((count) => {
                return (count || 0) + 1;
            });
        }

        // ‚úÖ Download File
        function downloadFile(key) {
            const file = currentFiles.find(f => f.key === key);
            if (!file) return;
            
            // Create download link
            const link = document.createElement('a');
            link.href = file.url;
            link.download = file.fileName + '.' + file.originalName.split('.').pop();
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            // Update download count
            db.ref('files/' + key + '/downloadCount').transaction((count) => {
                return (count || 0) + 1;
            });
            
            showStatus("‚úÖ ‡¶´‡¶æ‡¶á‡¶≤ ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶π‡ßü‡ßá‡¶õ‡ßá", "success");
        }

        // ‚úÖ Edit File
        function editFile(key) {
            const file = currentFiles.find(f => f.key === key);
            if (!file) return;
            
            selectedFile = file;
            
            const modal = document.getElementById('fileEditModal');
            const content = document.getElementById('fileEditContent');
            
            let contentHTML = `
                <div class="form-group">
                    <label>
                        <span>üìù</span>
                        ‡¶´‡¶æ‡¶á‡¶≤‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ:
                    </label>
                    <input type="text" id="editFileName" value="${file.fileName}" placeholder="‡¶´‡¶æ‡¶á‡¶≤‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ">
                </div>
                
                <div class="form-group">
                    <label>
                        <span>üìã</span>
                        ‡¶¨‡¶∞‡ßç‡¶£‡¶®‡¶æ:
                    </label>
                    <textarea id="editFileDescription" rows="3" placeholder="‡¶´‡¶æ‡¶á‡¶≤‡ßá‡¶∞ ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶¨‡¶∞‡ßç‡¶£‡¶®‡¶æ">${file.description || ''}</textarea>
                </div>
                
                <div class="two-column" style="grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div class="form-group">
                        <label>
                            <span>üè´</span>
                            ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏:
                        </label>
                        <select id="editFileClass">
                            <option value="Class 6" ${file.class === 'Class 6' ? 'selected' : ''}>Class 6 - ‡¶∑‡¶∑‡ßç‡¶† ‡¶∂‡ßç‡¶∞‡ßá‡¶£‡ßÄ</option>
                            <option value="Class 7" ${file.class === 'Class 7' ? 'selected' : ''}>Class 7 - ‡¶∏‡¶™‡ßç‡¶§‡¶Æ ‡¶∂‡ßç‡¶∞‡ßá‡¶£‡ßÄ</option>
                            <option value="Class 8" ${file.class === 'Class 8' ? 'selected' : ''}>Class 8 - ‡¶Ö‡¶∑‡ßç‡¶ü‡¶Æ ‡¶∂‡ßç‡¶∞‡ßá‡¶£‡ßÄ</option>
                            <option value="Class 9" ${file.class === 'Class 9' ? 'selected' : ''}>Class 9 - ‡¶®‡¶¨‡¶Æ ‡¶∂‡ßç‡¶∞‡ßá‡¶£‡ßÄ</option>
                            <option value="Class 10" ${file.class === 'Class 10' ? 'selected' : ''}>Class 10 - ‡¶¶‡¶∂‡¶Æ ‡¶∂‡ßç‡¶∞‡ßá‡¶£‡ßÄ</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <span>üìö</span>
                            ‡¶¨‡¶ø‡¶∑‡ßü:
                        </label>
                        <select id="editFileSubject">
                            <option value="math" ${file.subject === 'math' ? 'selected' : ''}>‡¶ó‡¶£‡¶ø‡¶§</option>
                            <option value="english" ${file.subject === 'english' ? 'selected' : ''}>‡¶á‡¶Ç‡¶∞‡ßá‡¶ú‡¶ø</option>
                            <option value="science" ${file.subject === 'science' ? 'selected' : ''}>‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶®</option>
                            <option value="ict" ${file.subject === 'ict' ? 'selected' : ''}>ICT</option>
                            <option value="agriculture" ${file.subject === 'agriculture' ? 'selected' : ''}>‡¶ï‡ßÉ‡¶∑‡¶ø ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>
                        <span>üè∑Ô∏è</span>
                        ‡¶ü‡ßç‡¶Ø‡¶æ‡¶ó‡¶∏ (‡¶ï‡¶Æ‡¶æ ‡¶¶‡¶ø‡ßü‡ßá ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®):
                    </label>
                    <input type="text" id="editFileTags" value="${file.tags ? file.tags.join(', ') : ''}" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶¨‡¶á, ‡¶ó‡¶æ‡¶á‡¶°, ‡¶®‡ßã‡¶ü">
                </div>
                
                <div style="margin-top: 30px; display: flex; gap: 15px;">
                    <button onclick="updateFile('${key}')" class="btn btn-success" style="flex: 1;">
                        <span>üíæ</span>
                        ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
                    </button>
                    <button onclick="closeFileEditor()" class="btn" style="flex: 1; background: #95a5a6; color: white;">
                        <span>‚ùå</span>
                        ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®
                    </button>
                </div>`;
            
            content.innerHTML = contentHTML;
            modal.style.display = 'flex';
        }

        // ‚úÖ Update File
        function updateFile(key) {
            const fileName = document.getElementById('editFileName').value.trim();
            const fileDescription = document.getElementById('editFileDescription').value.trim();
            const fileClass = document.getElementById('editFileClass').value;
            const fileSubject = document.getElementById('editFileSubject').value;
            const fileTags = document.getElementById('editFileTags').value;
            
            if (!fileName || !fileClass || !fileSubject) {
                showStatus("‡¶´‡¶æ‡¶á‡¶≤‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ, ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏ ‡¶è‡¶¨‡¶Ç ‡¶¨‡¶ø‡¶∑‡ßü ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®", "error");
                return;
            }
            
            const updatedData = {
                fileName: fileName,
                description: fileDescription,
                class: fileClass,
                subject: fileSubject,
                tags: fileTags.split(',').map(tag => tag.trim()).filter(tag => tag),
                lastUpdated: new Date().toLocaleString('bn-BD')
            };
            
            db.ref('files/' + key).update(updatedData)
                .then(() => {
                    showStatus("‚úÖ ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶∏‡¶´‡¶≤!", "success");
                    closeFileEditor();
                    loadFiles();
                })
                .catch((error) => {
                    showStatus("‚ùå ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•: " + error.message, "error");
                });
        }

        // ‚úÖ Delete File
        function deleteFile(key) {
            const file = currentFiles.find(f => f.key === key);
            if (!file) return;
            
            if (!confirm(`‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ "${file.fileName}" ‡¶´‡¶æ‡¶á‡¶≤‡¶ü‡¶ø ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®?`)) {
                return;
            }
            
            // Delete from storage
            const storageRef = storage.ref(file.storagePath);
            storageRef.delete().then(() => {
                // Delete from database
                db.ref('files/' + key).remove()
                    .then(() => {
                        showStatus("‚úÖ ‡¶´‡¶æ‡¶á‡¶≤ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶π‡ßü‡ßá‡¶õ‡ßá", "success");
                        loadFiles();
                        loadDashboardStats();
                    })
                    .catch((error) => {
                        showStatus("‚ùå ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•: " + error.message, "error");
                    });
            }).catch((error) => {
                showStatus("‚ùå ‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡ßá‡¶ú ‡¶•‡ßá‡¶ï‡ßá ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•: " + error.message, "error");
            });
        }

        // ‚úÖ Filter Files
        function filterFiles() {
            const typeFilter = document.getElementById('fileTypeFilter').value;
            const classFilter = document.getElementById('fileClassFilter').value;
            const searchFilter = document.getElementById('fileSearch').value.toLowerCase();
            
            const filesDisplay = document.getElementById('filesDisplay');
            let html = `
                <table>
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>‡¶´‡¶æ‡¶á‡¶≤ ‡¶®‡¶æ‡¶Æ</th>
                            <th>‡¶ï‡ßç‡¶≤‡¶æ‡¶∏</th>
                            <th>‡¶¨‡¶ø‡¶∑‡ßü</th>
                            <th>‡¶ü‡¶æ‡¶á‡¶™</th>
                            <th>‡¶∏‡¶æ‡¶á‡¶ú</th>
                            <th>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</th>
                            <th>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶®</th>
                        </tr>
                    </thead>
                    <tbody>`;
            
            let index = 1;
            let totalSize = 0;
            let pdfCount = 0;
            let imageCount = 0;
            
            currentFiles.forEach(file => {
                if (typeFilter && file.type !== typeFilter) return;
                if (classFilter && file.class !== classFilter) return;
                if (searchFilter && !file.fileName.toLowerCase().includes(searchFilter) && 
                    !file.originalName.toLowerCase().includes(searchFilter) &&
                    !(file.description && file.description.toLowerCase().includes(searchFilter)) &&
                    !(file.tags && file.tags.some(tag => tag.toLowerCase().includes(searchFilter)))) {
                    return;
                }
                
                totalSize += file.size || 0;
                if (file.type === 'pdf') pdfCount++;
                if (file.type === 'image') imageCount++;
                
                const fileTypeClass = getFileTypeClass(file.type);
                const fileTypeBadge = getFileTypeBadge(file.type);
                
                html += `
                    <tr>
                        <td>${index}</td>
                        <td>
                            <strong>${file.fileName}</strong>
                            ${fileTypeBadge}
                            <div style="font-size: 12px; color: #666;">${file.originalName}</div>
                        </td>
                        <td>${file.class}</td>
                        <td>${getSubjectName(file.subject)}</td>
                        <td><span class="material-type ${fileTypeClass}">${file.type}</span></td>
                        <td>${formatFileSize(file.size)}</td>
                        <td>${file.uploadDate}</td>
                        <td>
                            <div class="action-buttons">
                                <button onclick="viewFile('${file.key}')" class="view-btn">
                                    <span>üëÅÔ∏è</span>
                                    ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®
                                </button>
                                <button onclick="downloadFile('${file.key}')" class="download-btn">
                                    <span>üì•</span>
                                    ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶°
                                </button>
                                <button onclick="editFile('${file.key}')" class="edit-btn">
                                    <span>‚úèÔ∏è</span>
                                    ‡¶è‡¶°‡¶ø‡¶ü
                                </button>
                                <button onclick="deleteFile('${file.key}')" class="delete-btn">
                                    <span>üóëÔ∏è</span>
                                    ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü
                                </button>
                            </div>
                        </td>
                    </tr>`;
                index++;
            });
            
            html += `</tbody></table>`;
            filesDisplay.innerHTML = html || `
                <div class="empty-state">
                    <div class="empty-state-icon">üîç</div>
                    <h3>‡¶ï‡ßã‡¶®‡ßã ‡¶´‡¶æ‡¶á‡¶≤ ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø</h3>
                    <p>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡¶®‡ßÅ‡¶∏‡¶®‡ßç‡¶ß‡¶æ‡¶®‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶Æ‡¶ø‡¶≤‡¶õ‡ßá ‡¶®‡¶æ</p>
                </div>`;
        }

        // ‚úÖ Refresh Files
        function refreshFiles() {
            loadFiles();
            showStatus("‡¶´‡¶æ‡¶á‡¶≤ ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü ‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá", "info");
        }

        // ‚úÖ Show Bulk Delete
        function showBulkDelete() {
            showStatus("‡¶¨‡¶æ‡¶≤‡ßç‡¶ï ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶∂‡ßÄ‡¶ò‡ßç‡¶∞‡¶á ‡¶Ü‡¶∏‡¶¨‡ßá", "info");
        }

        // ‚úÖ Close Modals
        function closeFileViewer() {
            document.getElementById('fileViewModal').style.display = 'none';
        }
        
        function closeFileEditor() {
            document.getElementById('fileEditModal').style.display = 'none';
            selectedFile = null;
        }

        // ‚úÖ PWA Functions
        function checkAppInstalled() {
            const isStandalone = window.matchMedia('(display-mode: standalone)').matches;
            isAppInstalled = isStandalone || window.navigator.standalone;
            
            if (isAppInstalled) {
                document.querySelector('.app-installed-badge').style.display = 'block';
            } else {
                document.querySelector('.app-installed-badge').style.display = 'none';
            }
            
            return isAppInstalled;
        }
        
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            
            // Show install button
            const installBtn = document.getElementById('installButton');
            const installBtnMain = document.getElementById('installButtonMain');
            if (installBtn) installBtn.style.display = 'inline-flex';
            if (installBtnMain) installBtnMain.style.display = 'inline-flex';
        });
        
        function installApp() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choiceResult) => {
                    if (choiceResult.outcome === 'accepted') {
                        showStatus("‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶á‡¶®‡¶∏‡ßç‡¶ü‡¶≤ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...", "success");
                    }
                    deferredPrompt = null;
                });
            }
        }
        
        function hideInstallPrompt() {
            document.getElementById('installPrompt').style.display = 'none';
        }
        
        function closeIOSModal() {
            document.getElementById('iosInstallModal').style.display = 'none';
        }
        
        function closeAndroidModal() {
            document.getElementById('androidInstallModal').style.display = 'none';
        }
        
        function tryAutoInstall() {
            if (deferredPrompt) {
                installApp();
            } else {
                showStatus("‡¶∏‡ßç‡¶¨‡¶Ø‡¶º‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶á‡¶®‡¶∏‡ßç‡¶ü‡¶≤ ‡¶∏‡¶Æ‡ßç‡¶≠‡¶¨ ‡¶®‡¶Ø‡¶º", "warning");
            }
            closeAndroidModal();
        }

        // ‚úÖ Status Message
        function showStatus(message, type) {
            const statusDiv = document.getElementById('statusMessage');
            const statusContent = document.getElementById('statusContent');
            
            let icon = 'üí°';
            switch(type) {
                case 'success': icon = '‚úÖ'; break;
                case 'error': icon = '‚ùå'; break;
                case 'warning': icon = '‚ö†Ô∏è'; break;
                case 'info': icon = '‚ÑπÔ∏è'; break;
            }
            
            statusContent.innerHTML = `<span style="font-size: 20px; margin-right: 10px;">${icon}</span> ${message}`;
            statusDiv.className = `status-message status-${type}`;
            statusDiv.style.display = 'block';
            
            setTimeout(() => {
                statusDiv.style.display = 'none';
            }, 4000);
        }

        // ‚úÖ Initialize on Load
        document.addEventListener('DOMContentLoaded', function() {
            initializeFirebase();
            
            // Setup drag and drop
            const dropArea = document.getElementById('dropArea');
            
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                dropArea.addEventListener(eventName, preventDefaults, false);
            });
            
            function preventDefaults(e) {
                e.preventDefault();
                e.stopPropagation();
            }
            
            ['dragenter', 'dragover'].forEach(eventName => {
                dropArea.addEventListener(eventName, highlight, false);
            });
            
            ['dragleave', 'drop'].forEach(eventName => {
                dropArea.addEventListener(eventName, unhighlight, false);
            });
            
            function highlight() {
                dropArea.classList.add('dragover');
            }
            
            function unhighlight() {
                dropArea.classList.remove('dragover');
            }
            
            dropArea.addEventListener('drop', handleDrop, false);
            
            function handleDrop(e) {
                const dt = e.dataTransfer;
                const files = dt.files;
                
                selectedFiles = Array.from(files);
                displayFilePreview();
            }
            
            // Check app installed on load
            checkAppInstalled();
            
            // Set current URLs for install modals
            document.getElementById('currentUrl').textContent = window.location.href;
            document.getElementById('androidCurrentUrl').textContent = window.location.href;
            
            // Setup network status monitoring
            window.addEventListener('online', () => {
                document.getElementById('statusIcon').textContent = 'üü¢';
                document.getElementById('statusText').textContent = '‡¶Ö‡¶®‡¶≤‡¶æ‡¶á‡¶®';
                document.getElementById('connectionStatus').classList.remove('status-offline');
                showStatus("‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶®‡ßá‡¶ü ‡¶∏‡¶Ç‡¶Ø‡ßã‡¶ó ‡¶´‡¶ø‡¶∞‡ßá ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶ó‡ßá‡¶õ‡ßá", "success");
            });
            
            window.addEventListener('offline', () => {
                document.getElementById('statusIcon').textContent = 'üî¥';
                document.getElementById('statusText').textContent = '‡¶Ö‡¶´‡¶≤‡¶æ‡¶á‡¶®';
                document.getElementById('connectionStatus').classList.add('status-offline');
                showStatus("‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶®‡ßá‡¶ü ‡¶∏‡¶Ç‡¶Ø‡ßã‡¶ó ‡¶π‡¶æ‡¶∞‡¶ø‡¶Ø‡¶º‡ßá ‡¶ó‡ßá‡¶õ‡ßá", "warning");
            });
            
            // Setup search input event listeners
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.addEventListener('keyup', filterData);
            }
            
            const fileSearch = document.getElementById('fileSearch');
            if (fileSearch) {
                fileSearch.addEventListener('keyup', filterFiles);
            }
            
            // Auto-hide install prompt after 10 seconds
            setTimeout(() => {
                if (document.getElementById('installPrompt').style.display === 'block') {
                    hideInstallPrompt();
                }
            }, 10000);
        });
    </script>
</body>
</html>

